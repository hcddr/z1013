 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 1 - 18.7.2004 19:30:37


       1/       0 :                     	CPU	z80
       2/       0 :                     
       3/       0 :                     ;Z1013-MONITOR 2.02, A.2, Brosig (2.028 K7659), und meine (2.02B und 2.02C)
       4/       0 :                     ;reass: 1988-1990 Volker Pohlers, Lomonossowallee 41/81, Greifswald, 2200
       5/       0 :                     ;basierend auf GENS3M-Listing des 2.02-Monitors von C.Fischer/Ilmenau
       6/       0 :                     ;und teilweise (Tastaturkommentare) auf dem CP/M-BIOS 4.8-Listing
       7/       0 :                     ;Fassung für den Arnold-Assembler und gemeinsame Fassung für alle Monitore:
       8/       0 :                     ;Volker Pohlers, Sanitz, 23.04.2004
       9/       0 :                     
      10/       0 :                     ;
      11/       0 :                     ;gewünschten Monitortyp auskommentieren
      12/       0 :                     ;
      13/       0 :                     
      14/       0 :                     ;MONTYP	EQU	"Z1013_202"
      15/       0 :                     ;MONTYP	EQU	"Z1013_A2"
      16/       0 :                     ;MONTYP	EQU	"BROSIG_2028_K7659"
      17/       0 :                     ;MONTYP	EQU	"VP_202B_K7659"
      18/       0 : =VP_202C_K7659      MONTYP	EQU	"VP_202C_K7659"
      19/       0 :                     
      20/       0 : =>TRUE              	if 	(MONTYP == "BROSIG_2028_K7659") || (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
      21/       0 : =1H                 BROSIGERW	EQU	1
      22/       0 : =>FALSE             	else
      23/       0 :                     BROSIGERW	EQU	0
      24/       0 :                     	endif
      25/       0 :                     
      26/       0 :                     ;die wichtigsten Unterschiede A2 <-> 2.02
      27/       0 :                     ;- kein H- und A- und F-Kommandos
      28/       0 :                     ;- andere Adressen Windows-Speicher
      29/       0 :                     ;- andere INKEY-Routine und auch INCH-Routine!
      30/       0 :                     ;- KDO mit RST-Aufrufen programmiert, damit Verschiebung aller Routinen des Monitors!
      31/       0 :                     ;- Da Interrupt-Vektor NINTA fehlt bzw. auf falschen Wert zeigt (5131H statt 0F7FEH)
      32/       0 :                     ;  funktioniert das N-Kdo nicht.
      33/       0 :                     
      34/       0 :                     ;die wichtigsten Unterschiede Brosig <-> 2.02
      35/       0 :                     ; - H- und A- Kommandos	als Leerfunktion
      36/       0 :                     ; - statt H- und A-Kommandos gibt es O und Z
      37/       0 :                     ; - in freiem Raum der Inkey-Routine nun Z_Kdo, O_Kdo, Registeranzeige, Init3, Hardcopy
      38/       0 :                     ; - kleine Unterschiede in S_Kdo (sav4-sav7)
      39/       0 :                     ; - Bytekompatibel in allen weiteren Routinen
      40/       0 :                     ; - und in den oberen 2K Tastaturroutine, Headersave, Sprungverteiler ...
      41/       0 :                     
      42/       0 :                     ;die wichtigsten Unterschiede VP 202B <-> Brosig
      43/       0 :                     ; - Erweiterung/Korrektur Brosig-Monitor
      44/       0 :                     ; - Einbindung Joystick
      45/       0 :                     ; - Centronics-Druckertreiber
      46/       0 :                     ; - Zweite Shift-Ebene der Tastatur fuer Einbindung Peters-Platine
      47/       0 :                     ; - Aenderung Headerload: kein @LDA, keine Nutzung von BPADR
      48/       0 :                     
      49/       0 :                     ;die wichtigsten Unterschiede VP 202C <-> VP 202B
      50/       0 :                     ; - Einbindung von HeaderDisk bei Load/Save
      51/       0 :                     ; - dadurch Wegfall von Bildschirmkopie BSDR
      52/       0 :                     ; - kleine Aenderung in Sound (warum?)
      53/       0 :                     
      54/       0 :                     
      55/       0 :                     
      56/       0 :                     ; Makros
      57/       0 :                     ;hi              function x, (x>>8) & 0ffh	; High-Byte
      58/       0 :                     ;lo              function x, x & 0ffh		; Low-Byte
      59/       0 :                     
      60/       0 :                     ;
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 2 - 18.7.2004 19:30:37


      61/       0 :                     ;RAM-Zellen
      62/       0 :                     ;
      63/       0 : =3H                 R20BT:	EQU	00003H			;Nummer des RST20-Calls
      64/       0 : =4H                 LAKEY:	EQU	00004H			;letztes Zeichen von Tastatur
      65/       0 : =BH                 BPADR:	EQU	0000BH			;Breakpointadresse
      66/       0 : =DH                 BPOPC:	EQU	0000DH			;Operandenfolge bei Breakpoint
      67/       0 : =13H                DATA:	EQU	00013H			;Adresse bei INHEX
      68/       0 : =15H                SHILO:	EQU	00015H			;
      69/       0 : =16H                SOIL:	EQU	00016H			;Beginn Eingabezeile
      70/       0 : =1BH                ARG1:	EQU	0001BH			;1. Argument
      71/       0 : =1DH                ARG2:	EQU	0001DH			;2. Argument
      72/       0 : =1FH                BUFFA:	EQU	0001FH			;vom Cursor verdecktes Zeichen
      73/       0 : =20H                RST20:	EQU	00020H			;RST 20H
      74/       0 : =23H                ARG3:	EQU	00023H			;3. Argument
      75/       0 : =25H                SOIL2:	EQU	00025H			;Rest Eingabezeile
      76/       0 : =27H                KYBTS:	EQU	00027H			;Tastaturroutinenzelle
      77/       0 : =2BH                CUPOS:	EQU	0002BH			;aktuelle Cursorposition
      78/       0 : =33H                LSYNC:	EQU	00033H			;Kenntonlaenge
      79/       0 : =35H                DRZSP:	EQU	00035H			;3 Byte fuer Druckertreiber
      80/       0 : =38H                RST38:	EQU	00038H			;RST 38H
      81/       0 : =3BH                PTKEY:	EQU	0003BH			;Tastenbelegungsfeldpointer
      82/       0 : =3DH                PTSTG:	EQU	0003DH			;Stringfeldpointer
      83/       0 : =3FH                PTNXZ:	EQU	0003FH			;Pointer nae. auszg. $Zeichen
      84/       0 : =41H                PLFKY:	EQU	00041H			;Laenge Funktionstastenfeld
      85/       0 : =43H                PTFKY:	EQU	00043H			;Pointer Funktionstastenfeld
      86/       0 : =45H                PTFKA:	EQU	00045H			;Pointer Fkt.tastenadressfeld
      87/       0 : =>TRUE              	IF MONTYP <> "Z1013_A2"
      88/       0 : =47H                WINDL:	EQU	00047H			;Windowlaenge
      89/       0 : =49H                WINDA:	EQU	00049H			;Windowanfang
      90/       0 : =4BH                WINDE:	EQU	0004BH			;Windowende+1
      91/       0 : =>FALSE             	ELSE
      92/       0 :                     WINDL:	EQU	00035H			;Windowlaenge
      93/       0 :                     WINDA:	EQU	0003BH			;Windowanfang
      94/       0 :                     WINDE:	EQU	0003DH			;Windowende+1
      95/       0 :                     	ENDIF
      96/       0 : =4DH                REGBR:	EQU	0004DH			;Registerrettebereich
      97/       0 : =5BH                REGAF:	EQU	0005BH			;Register AF
      98/       0 : =61H                REGPC:	EQU	00061H			;Register PC
      99/       0 : =63H                REGSP:	EQU	00063H			;Userstack
     100/       0 : =66H                NMI:	EQU	00066H
     101/       0 : =69H                NBYTE:	EQU	00069H			;Operand bei NEXT
     102/       0 : =6AH                SPADR:	EQU	0006AH			;SP-Zwischenspeicher
     103/       0 : =6CH                FBANZ:	EQU	0006CH			;Zwsp. Anz. Suchbytes bei FIND
     104/       0 : =90H                USRSK:	EQU	00090H			;Userstack
     105/       0 : =B0H                SYSSK:	EQU	000B0H			;Systemstack
     106/       0 : =B0H                USRKD:	EQU	SYSSK
     107/       0 :                     ;Kopfpuffer fuer Headersave/load
     108/       0 : =E0H                AADR:	EQU	000E0H			;Anfangsadresse
     109/       0 : =E2H                EADR:	EQU	000E2H			;Endadresse
     110/       0 : =E4H                SADR:	EQU	000E4H			;Startadresse
     111/       0 : =ECH                TYP:	EQU	000ECH			;Typ
     112/       0 : =EDH                SIGNS:	EQU	000EDH			;Kopfkennzeichnung
     113/       0 : =F0H                NAME:	EQU	000F0H			;Name
     114/       0 :                     ;Druckertreiber
     115/       0 : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
     116/       0 :                     DRINI:	EQU	0E800H			;Initialisierung log. Treiber
     117/       0 :                     DRZEL:	EQU	0E803H			;druckt (ARG1) log.
     118/       0 :                     DRAKK:	EQU	0E806H			;druckt Register A log.
     119/       0 :                     ZEIDR:	EQU	0E809H			;druckt A phys.
     120/       0 :                     BSDRK:	EQU	0E80CH			;Bildschirmdruck
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 3 - 18.7.2004 19:30:37


     121/       0 :                     	ENDIF
     122/       0 : =E80FH              HARDC:	EQU	0E80FH			;druckt A log., wenn Flag on
     123/       0 :                     ;Bildschirm
     124/       0 : =EC00H              BWS:	EQU	0EC00H
     125/       0 :                     ;
     126/       0 :                     ;Markenvereinbarungen
     127/       0 :                     ;
     128/       0 : =CH                 CLS:	EQU	0CH
     129/       0 : =DH                 CR:	EQU	0DH
     130/       0 : =1BH                ESC:	EQU	27
     131/       0 : =1EH                NL:	EQU	1EH
     132/       0 : =AH                 LF:	EQU	0AH
     133/       0 :                     ;
     134/       0 : =E7H                ROUTC:	EQU	000E7H
     135/       0 : =1E7H               RINCH:	EQU	001E7H
     136/       0 : =2E7H               RPRST:	EQU	002E7H
     137/       0 : =3E7H               RINHX:	EQU	003E7H
     138/       0 : =4E7H               RINKY:	EQU	004E7H
     139/       0 : =6E7H               ROTHX:	EQU	006E7H
     140/       0 : =7E7H               ROTHL:	EQU	007E7H
     141/       0 : =CE7H               ROTHS:	EQU	00CE7H
     142/       0 : =DE7H               ROTDP:	EQU	00DE7H
     143/       0 : =EE7H               ROTSP:	EQU	00EE7H
     144/       0 :                     ;
     145/       0 :                     ;
     146/       0 :                     ;
     147/    F000 :                     	ORG	0F000H
     148/    F000 :                     ;
     149/    F000 : 18 0D               INIT:	JR	INIT2
     150/    F002 :                     ;Initialisierung
     151/    F002 : 21 4D 00            INIT1:	LD	HL,REGBR		;Registerrette-
     152/    F005 : 11 4E 00            	LD	DE,REGBR+1		;bereich loeschen
     153/    F008 : 36 00               	LD	(HL),0
     154/    F00A : 01 15 00            	LD	BC,0015H
     155/    F00D : ED B0               	LDIR
     156/    F00F : 31 B0 00            INIT2:	LD	SP,SYSSK		;System-Stack
     157/    F012 : =>FALSE             	IF MONTYP == "Z1013_202"
     158/    F012 :                     	xor	a
     159/    F012 :                     	ld	(KYBTS), a
     160/    F012 : =>TRUE              	ELSEIF MONTYP <> "Z1013_A2"
     161/    F012 : 00                  	NOP
     162/    F013 : CD 98 F1            	CALL	INIT3			;Initialisierung
     163/    F016 :                     	ENDIF
     164/    F016 : 3E C3               	LD	A,0C3H			;JMP ...
     165/    F018 : 32 20 00            	LD	(RST20),A
     166/    F01B : 21 E8 F0            	LD	HL,RST1			;RST20 eintragen
     167/    F01E : 22 21 00            	LD	(RST20+1),HL
     168/    F021 : 3E CF               	LD	A,0CFH			;PIO Port B init.
     169/    F023 : D3 03               	OUT	3, A			;BIT-Mode
     170/    F025 : =>TRUE              	IF	MONTYP <> "Z1013_A2"
     171/    F025 : 3E 7F               	LD	A,7FH			;BIT7-Ausgang
     172/    F027 : =>FALSE             	ELSE
     173/    F027 :                     	LD	A,6FH
     174/    F027 :                     	ENDIF
     175/    F027 : D3 03               	OUT	3, A
     176/    F029 : 21 F2 F1            	LD	HL,MONTB		;System-RAM init.
     177/    F02C : 11 33 00            	LD	DE,LSYNC
     178/    F02F : 01 1A 00            	LD	BC,INCH-MONTB		;Laenge Tabelle
     179/    F032 : ED B0               	LDIR
     180/    F034 :                     ;Systemmeldung
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 4 - 18.7.2004 19:30:37


     181/    F034 : E7 02               	DW	RPRST
     182/    F036 : 0C                  	DB	CLS
     183/    F037 : 0D                  	DB	CR
     184/    F038 : 0D                  	DB	CR
     185/    F039 : =>FALSE             	IF MONTYP == "Z1013_202"
     186/    F039 :                     	DB	"robotron Z 1013/2.02"
     187/    F039 : =>FALSE             	ELSEIF MONTYP == "Z1013_A2"
     188/    F039 :                     	DB	"robotron Z 1013/A.2"
     189/    F039 : =>FALSE             	ELSEIF MONTYP == "BROSIG_2028_K7659"
     190/    F039 :                     	DB	"Z1013+K7659/2.028 RB"
     191/    F039 : =>FALSE             	ELSEIF MONTYP == "VP_202B_K7659"
     192/    F039 :                     	DB	"Z1013+K7659/2.02B VP"
     193/    F039 : =>TRUE              	ELSEIF MONTYP == "VP_202C_K7659"
     194/    F039 : 5A 31 30 31 33 2B   	DB	"Z1013+K7659/2.02C VP"
                    4B 37 36 35 39 2F 
                    32 2E 30 32 43 20 
                    56 50 
     195/    F04D :                     	ENDIF
     196/    F04D : 8D                  	DB	CR+80H
     197/    F04E :                     ;
     198/    F04E : 21 90 00            	LD	HL,USRSK		;User-Stack
     199/    F051 : 22 63 00            	LD	(REGSP),HL
     200/    F054 : ED 5E               	IM	2
     201/    F056 : 18 07               	JR	KDO2
     202/    F058 :                     ;
     203/    F058 :                     ;Eingang Kommandomodus
     204/    F058 :                     ;
     205/    F058 : 31 B0 00            KDO1:	LD	SP,SYSSK		;System-Stack
     206/    F05B : =>FALSE             	IF MONTYP == "Z1013_A2"
     207/    F05B :                     	DW	RPRST
     208/    F05B : =>TRUE              	ELSE
     209/    F05B : CD A5 F2            	CALL	PRST7
     210/    F05E :                     	ENDIF
     211/    F05E : BF                  	DB	0BFH			;"?"
     212/    F05F :                     KDO2:
     213/    F05F : =>FALSE             	IF MONTYP == "Z1013_A2"
     214/    F05F :                     	RST	20H
     215/    F05F :                     	DB	5
     216/    F05F : =>TRUE              	ELSE
     217/    F05F : CD B3 F2            	CALL	INLIN			;Zeile eingeben
     218/    F062 :                     	ENDIF
     219/    F062 : ED 5B 16 00         	LD	DE,(SOIL)
     220/    F066 : CD CA F2            	CALL	SPACE			;Leerzeichen uebergehen
     221/    F069 : 47                  	LD	B,A			;B=1. Zeichen
     222/    F06A : 13                  	INC	DE
     223/    F06B : 1A                  	LD	A,(DE)
     224/    F06C : 4F                  	LD	C,A			;C=2. Zeichen
     225/    F06D : C5                  	PUSH	BC
     226/    F06E : 13                  	INC	DE
     227/    F06F : =>FALSE             	IF MONTYP == "Z1013_A2"
     228/    F06F :                     	DW	RINHX
     229/    F06F : =>TRUE              	ELSE
     230/    F06F : CD F4 F2            	CALL	INHEX
     231/    F072 :                     	ENDIF
     232/    F072 : 20 05               	JR	NZ, KDO3
     233/    F074 : 1A                  	LD	A,(DE)
     234/    F075 : FE 3A               	CP	A, ':'			;die alten Werte nehmen ?
     235/    F077 : 28 0F               	JR	Z, KDO4
     236/    F079 : 22 1B 00            KDO3:	LD	(ARG1),HL		;neue Argumente holen
     237/    F07C : =>FALSE             	IF MONTYP == "Z1013_A2"
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 5 - 18.7.2004 19:30:37


     238/    F07C :                     	DW	RINHX
     239/    F07C : =>TRUE              	ELSE
     240/    F07C : CD F4 F2            	CALL	INHEX
     241/    F07F :                     	ENDIF
     242/    F07F : 22 1D 00            	LD	(ARG2),HL
     243/    F082 : =>FALSE             	IF MONTYP == "Z1013_A2"
     244/    F082 :                     	DW	RINHX
     245/    F082 : =>TRUE              	ELSE
     246/    F082 : CD F4 F2            	CALL	INHEX
     247/    F085 :                     	ENDIF
     248/    F085 : 22 23 00            	LD	(ARG3),HL
     249/    F088 : C1                  KDO4:	POP	BC
     250/    F089 : 08                  	EX	AF, AF'
     251/    F08A : ED 53 25 00         	LD	(SOIL2),DE		;Anfang 4. Argument
     252/    F08E :                     ;Kommando (in Reg B) suchen
     253/    F08E : 21 B1 F0            	LD	HL,KDOTB		;in Kommandotabelle
     254/    F091 : 7E                  KDO5:	LD	A,(HL)
     255/    F092 : B8                  	CP	A, B
     256/    F093 : 28 11               	JR	Z, KDO6			;wenn gefunden
     257/    F095 : 23                  	INC	HL
     258/    F096 : 23                  	INC	HL
     259/    F097 : 23                  	INC	HL
     260/    F098 : B7                  	OR	A			;Tabellenende?
     261/    F099 : 20 F6               	JR	NZ, KDO5			;nein
     262/    F09B : 78                  	LD	A,B
     263/    F09C : FE 40               	CP	A, '@'			;"@"-Kommando?
     264/    F09E : 20 B8               	JR	NZ, KDO1			;nein -> Eingabefehler
     265/    F0A0 : 21 B0 00            	LD	HL,USRKD		;Suchen in "@"-Kdo.tab.
     266/    F0A3 : 41                  	LD	B,C
     267/    F0A4 : 18 EB               	JR	KDO5
     268/    F0A6 :                     ;
     269/    F0A6 : 23                  KDO6:	INC	HL
     270/    F0A7 : 5E                  	LD	E,(HL)
     271/    F0A8 : 23                  	INC	HL
     272/    F0A9 : 56                  	LD	D,(HL)
     273/    F0AA : EB                  	EX	DE,HL			;HL=UP-Adresse
     274/    F0AB : 08                  	EX	AF, AF'
     275/    F0AC : 01 5F F0            	LD	BC,KDO2			;Returnadresse
     276/    F0AF : C5                  	PUSH	BC
     277/    F0B0 : E9                  	JP	(HL)			;Sprung zur Routine
     278/    F0B1 :                     ;
     279/    F0B1 :                     KDOTB:
     280/    F0B1 : =>FALSE             	IF MONTYP == "Z1013_202"
     281/    F0B1 :                     	DB	"A"
     282/    F0B1 :                     	DW	A_KDO
     283/    F0B1 : =>TRUE              	ELSEIF BROSIGERW == 1
     284/    F0B1 : 5A                  	DB	"Z"
     285/    F0B2 : 48 F1               	DW	Z_KDO
     286/    F0B4 :                     	ENDIF
     287/    F0B4 : 42                  	DB	"B"
     288/    F0B5 : 87 F5               	DW	B_KDO
     289/    F0B7 : 43                  	DB	"C"
     290/    F0B8 : 77 F7               	DW	C_KDO
     291/    F0BA : 44                  	DB	"D"
     292/    F0BB : CE F4               	DW	D_KDO
     293/    F0BD : 45                  	DB	"E"
     294/    F0BE : 99 F5               	DW	E_KDO
     295/    F0C0 : =>TRUE              	IF MONTYP <> "Z1013_A2"
     296/    F0C0 : 46                  	DB	"F"
     297/    F0C1 : A2 F7               	DW	F_KDO
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 6 - 18.7.2004 19:30:37


     298/    F0C3 :                     	ENDIF
     299/    F0C3 : 47                  	DB	"G"
     300/    F0C4 : B3 F5               	DW	G_KDO
     301/    F0C6 : =>FALSE             	IF MONTYP == "Z1013_202"
     302/    F0C6 :                     	DB	"H"
     303/    F0C6 :                     	DW	H_KDO
     304/    F0C6 : =>TRUE              	ELSEIF BROSIGERW = 1
     305/    F0C6 : 4F                  	DB	"O"
     306/    F0C7 : 69 F1               	DW	O_KDO
     307/    F0C9 :                     	ENDIF
     308/    F0C9 : 49                  	DB	"I"
     309/    F0CA : 02 F0               	DW	INIT1
     310/    F0CC : 4A                  	DB	"J"
     311/    F0CD : A5 F5               	DW	J_KDO
     312/    F0CF : 4B                  	DB	"K"
     313/    F0D0 : 0B F5               	DW	K_KDO
     314/    F0D2 : 4C                  	DB	"L"
     315/    F0D3 : F8 F3               	DW	CLOAD
     316/    F0D5 : 4D                  	DB	"M"
     317/    F0D6 : 25 F3               	DW	MEM
     318/    F0D8 : 4E                  	DB	"N"
     319/    F0D9 : 27 F7               	DW	N_KDO
     320/    F0DB : 52                  	DB	"R"
     321/    F0DC : DF F5               	DW	R_KDO
     322/    F0DE : 53                  	DB	"S"
     323/    F0DF : 69 F3               	DW	CSAVE
     324/    F0E1 : 54                  	DB	"T"
     325/    F0E2 : 1D F5               	DW	T_KDO
     326/    F0E4 : 57                  	DB	"W"
     327/    F0E5 : D1 F6               	DW	W_KDO
     328/    F0E7 : 00                  	DB	0
     329/    F0E8 :                     ;
     330/    F0E8 :                     ;Eingang bei RST 20H
     331/    F0E8 :                     ;
     332/    F0E8 : E3                  RST1:	EX	(SP),HL
     333/    F0E9 : F5                  	PUSH	AF
     334/    F0EA : 7E                  	LD	A,(HL)			;Datenbyte hinter Ruf holen
     335/    F0EB : 32 03 00            	LD	(R20BT),A		;und ablegen
     336/    F0EE : 23                  	INC	HL			;Returnadresse erhoehen
     337/    F0EF : F1                  	POP	AF
     338/    F0F0 : E3                  	EX	(SP),HL
     339/    F0F1 :                     ;
     340/    F0F1 : E5                  	PUSH	HL
     341/    F0F2 : C5                  	PUSH	BC
     342/    F0F3 : F5                  	PUSH	AF
     343/    F0F4 : 21 08 F1            	LD	HL,RSTTB
     344/    F0F7 : 3A 03 00            	LD	A,(R20BT)
     345/    F0FA : CB 27               	SLA	A
     346/    F0FC : 4F                  	LD	C,A
     347/    F0FD : 06 00               	LD	B,0
     348/    F0FF : 09                  	ADD	HL,BC			;HL=Adresse in Tab.
     349/    F100 : 7E                  	LD	A,(HL)
     350/    F101 : 23                  	INC	HL
     351/    F102 : 66                  	LD	H,(HL)
     352/    F103 : 6F                  	LD	L,A			;HL=UP-Adresse
     353/    F104 : F1                  	POP	AF
     354/    F105 : C1                  	POP	BC
     355/    F106 : E3                  	EX	(SP),HL			;Ansprung der
     356/    F107 : C9                  	RET				;Routine
     357/    F108 :                     ;
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 7 - 18.7.2004 19:30:37


     358/    F108 : 1B F2               RSTTB:	DW	OUTCH			;DB 0
     359/    F10A : 0C F2               	DW	INCH			;DB 1
     360/    F10C : A5 F2               	DW	PRST7			;DB 2
     361/    F10E : F4 F2               	DW	INHEX			;DB 3
     362/    F110 : 30 F1               	DW	INKEY			;DB 4
     363/    F112 : B3 F2               	DW	INLIN			;DB 5
     364/    F114 : 01 F3               	DW	OUTHX			;DB 6
     365/    F116 : 1A F3               	DW	OUTHL			;DB 7
     366/    F118 : 69 F3               	DW	CSAVE			;DB 8
     367/    F11A : F8 F3               	DW	CLOAD			;DB 9
     368/    F11C : 25 F3               	DW	MEM			;DB 10
     369/    F11E : D1 F6               	DW	W_KDO			;DB 11
     370/    F120 : C7 F5               	DW	OTHLS			;DB 12
     371/    F122 : C4 F5               	DW	OUTDP			;DB 13
     372/    F124 : CF F5               	DW	OUTSP			;DB 14
     373/    F126 : 1D F5               	DW	T_KDO			;DB 15
     374/    F128 : B9 F2               	DW	INSTR			;DB 16
     375/    F12A : 0B F5               	DW	K_KDO			;DB 17
     376/    F12C : =>TRUE              	IF MONTYP <> "Z1013_A2"
     377/    F12C : B8 F6               	DW	H_KDO			;DB 18
     378/    F12E : C5 F6               	DW	A_KDO			;DB 19
     379/    F130 :                     	ENDIF
     380/    F130 :                     
     381/    F130 : =>FALSE             	IF MONTYP == "Z1013_202"
     382/    F130 :                     ;
     383/    F130 :                     ;Eingabe ein Zeichen von der Tastatur in A
     384/    F130 :                     ;
     385/    F130 :                     inkey:					;bei Ret A=ASCII
     386/    F130 :                     	xor	a
     387/    F130 :                     	ld	h, a
     388/    F130 :                     	ld	l, a
     389/    F130 :                     	call	ink9			;Tastenabfrage
     390/    F130 :                     	jr	nc, ink8		;Cy=0 keine Taste
     391/    F130 :                     	add	hl, de
     392/    F130 :                     	call	ink12			;restl. Spalten
     393/    F130 :                     	ld	c, 44h
     394/    F130 :                     	jr	c, ink1			;Cy=1 2.Taste gedr.
     395/    F130 :                     	ex	de, hl
     396/    F130 :                     	bit	3, d			;Abfrage Zeile 3
     397/    F130 :                     	jr	z, ink2			;Z=1 Taste gedr.
     398/    F130 :                     	jr	ink3
     399/    F130 :                     ink1:	bit	3, d			;2. Taste ? Zeile 3
     400/    F130 :                     	jr	z, ink2			;Z=1 Taste gedr.
     401/    F130 :                     	ex	de, hl
     402/    F130 :                     	bit	3, d			;1. Taste ? Zeile 3
     403/    F130 :                     	jr	nz, ink3		;Z=1 Taste gedr.
     404/    F130 :                     ink2:	call	ink13			;Welche Taste in Z3
     405/    F130 :                     	push	bc
     406/    F130 :                     	call	ink22			;Summand holen
     407/    F130 :                     	pop	bc
     408/    F130 :                     	jr	z, ink4			;Z=0 kein Summ.
     409/    F130 :                     	ex	de, hl
     410/    F130 :                     ink3:	call	ink22			;Summand holen
     411/    F130 :                     	jr	nz, ink8		;Z=0 kein Summ.
     412/    F130 :                     ink4:	add	a, e
     413/    F130 :                     	ld	hl, 27h
     414/    F130 :                     	add	a, (hl)
     415/    F130 :                     ;Berechnung Ascii-Wert abgeschlossen
     416/    F130 :                     ink5:	ld	hl, 4			;Softwareentprel-
     417/    F130 :                     	cp	(hl)			;lung, verhindert
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 8 - 18.7.2004 19:30:37


     418/    F130 :                     	jr	z, inkey		;Repeat-Funktion
     419/    F130 :                     	ld	b, a
     420/    F130 :                     	ld	a, (hl)
     421/    F130 :                     	or	a
     422/    F130 :                     	ld	a, b
     423/    F130 :                     	jr	nz, inkey		;Z=1 vorher keine
     424/    F130 :                     	ld	(LAKEY), a		;Taste gedrueckt
     425/    F130 :                     	cp	91h			;(S4/A)
     426/    F130 :                     	jr	z, ink6			;Z=1- ASCII
     427/    F130 :                     	cp	17h			;(S4/G)
     428/    F130 :                     	ret	nz			;Z=0 Ruecksprung
     429/    F130 :                     	ld	a, 80h
     430/    F130 :                     	jr	ink7
     431/    F130 :                     ink6:	xor	a
     432/    F130 :                     ink7:	ld	(KYBTS), a
     433/    F130 :                     ink8:	xor	a			;Ruecksprung wenn
     434/    F130 :                     	ld	(LAKEY), a		;keine Taste gedr.
     435/    F130 :                     	ret				;mit A=0
     436/    F130 :                     ink9:	ld	e, a			;E=Spaltennummer
     437/    F130 :                     	out	(8), a			;Ausgabe Spalte
     438/    F130 :                     	ld	b, 20h
     439/    F130 :                     ink10:	in	a, (2)
     440/    F130 :                     	and	0Fh
     441/    F130 :                     	ld	d, a			;D=Zeilennummer
     442/    F130 :                     	in	a, (2)
     443/    F130 :                     	and	0Fh
     444/    F130 :                     	cp	d
     445/    F130 :                     	jr	nz, ink11		;Z=0 Taste prellt
     446/    F130 :                     	cp	0Fh
     447/    F130 :                     	ret	nz			;Z=0 Taste gedr.
     448/    F130 :                     ink11:	djnz	ink10
     449/    F130 :                     ink12:	ld	a, e			;Erhoeh. Spalten-
     450/    F130 :                     	inc	a			;zahl
     451/    F130 :                     	cp	8
     452/    F130 :                     	jr	nz, ink9		;Z=1 alle Tasten
     453/    F130 :                     	ret				;abgefragt
     454/    F130 :                     ink13:	ld	a, 1			;Untersuchung
     455/    F130 :                     	cp	e			;welche Taste in
     456/    F130 :                     	jr	z, ink19		;Zeile 3 gedr. ist
     457/    F130 :                     	jr	nc, ink18		;E=Spaltenzahl
     458/    F130 :                     	add	a, 2			;E=0 - C=41H
     459/    F130 :                     	cp	e			;E=1 - C=3EH
     460/    F130 :                     	jr	z, ink21		;E=2 - C=3BH
     461/    F130 :                     	jr	nc, ink20		;E=3 - C=35H
     462/    F130 :                     	add	a, 2			;E=4 - A=08H
     463/    F130 :                     	cp	e			;E=5 - A=20H
     464/    F130 :                     	jr	z, ink15		;E=6 - A=09H
     465/    F130 :                     	jr	nc, ink16		;E=7 - A=0DH
     466/    F130 :                     	add	a, 2
     467/    F130 :                     	cp	e
     468/    F130 :                     	jr	z, ink14
     469/    F130 :                     	ld	a, 9
     470/    F130 :                     	jr	ink17
     471/    F130 :                     ink14:	ld	a, 0Dh
     472/    F130 :                     	jr	ink17
     473/    F130 :                     ink15:	ld	a, 20h
     474/    F130 :                     	jr	ink17
     475/    F130 :                     ink16:	ld	a, 8
     476/    F130 :                     ink17:	pop	bc
     477/    F130 :                     	jr	ink5
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 9 - 18.7.2004 19:30:37


     478/    F130 :                     ink18:	ld	c, 41h
     479/    F130 :                     	ret
     480/    F130 :                     ink19:	ld	c, 3Eh
     481/    F130 :                     	ret
     482/    F130 :                     ink20:	ld	c, 3Bh
     483/    F130 :                     	ret
     484/    F130 :                     ink21:	ld	c, 35h
     485/    F130 :                     	ret
     486/    F130 :                     ink22:	bit	0, d			;Abfrage Zeile 0
     487/    F130 :                     	jr	nz, ink24		;Z=0 keine Taste
     488/    F130 :                     ink23:	ld	l, c
     489/    F130 :                     	ld	h, 0
     490/    F130 :                     	ld	a, (hl)
     491/    F130 :                     	ret
     492/    F130 :                     ink24:	inc	c
     493/    F130 :                     	bit	1, d			;Abfrage Zeile 1
     494/    F130 :                     	jr	nz, ink25		;Z=0 keine Taste
     495/    F130 :                     	jr	ink23
     496/    F130 :                     ink25:	inc	c
     497/    F130 :                     	bit	2, d			;Abfrage Zeile 2
     498/    F130 :                     	ret	nz			;Z=0 keine Taste
     499/    F130 :                     	jr	ink23
     500/    F130 :                     
     501/    F130 : =>FALSE             	ELSEIF MONTYP == "Z1013_A2"
     502/    F130 :                     
     503/    F130 :                     inkey:	ld	hl, 37h
     504/    F130 :                     	ld	a, 5Bh
     505/    F130 :                     	and	(hl)
     506/    F130 :                     	ld	(hl), a
     507/    F130 :                     	ld	ix, keytab
     508/    F130 :                     	call	ink16
     509/    F130 :                     	jr	nc, ink1
     510/    F130 :                     	push	de
     511/    F130 :                     	set	7, (hl)
     512/    F130 :                     	call	ink20
     513/    F130 :                     	ld	(13h), a
     514/    F130 :                     	pop	de
     515/    F130 :                     	call	ink18
     516/    F130 :                     ink1:	ld	ix, tab2
     517/    F130 :                     	ld	e, 6
     518/    F130 :                     	call	ink19
     519/    F130 :                     	jr	z, ink9
     520/    F130 :                     	bit	0, c
     521/    F130 :                     	jr	z, ink2
     522/    F130 :                     	bit	5, c
     523/    F130 :                     	jr	z, ink5
     524/    F130 :                     	call	ink20
     525/    F130 :                     	ret
     526/    F130 :                     ink2:	ld	a, 2
     527/    F130 :                     	res	3, (hl)
     528/    F130 :                     ink3:	bit	6, (hl)
     529/    F130 :                     	jr	nz, ink4
     530/    F130 :                     	set	6, (hl)
     531/    F130 :                     	xor	(hl)
     532/    F130 :                     	ld	(hl), a
     533/    F130 :                     ink4:	xor	a
     534/    F130 :                     	ret
     535/    F130 :                     ink5:	set	5, (hl)
     536/    F130 :                     	bit	7, (hl)
     537/    F130 :                     	jr	z, ink9
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 10 - 18.7.2004 19:30:37


     538/    F130 :                     	ld	a, (13h)
     539/    F130 :                     	bit	6, a
     540/    F130 :                     	jr	nz, ink6
     541/    F130 :                     	set	4, a
     542/    F130 :                     ink6:	and	1Fh
     543/    F130 :                     ink7:	bit	1, (hl)
     544/    F130 :                     	ret	z
     545/    F130 :                     	set	7, a
     546/    F130 :                     	ret
     547/    F130 :                     ink8:	res	6, (hl)
     548/    F130 :                     	bit	7, (hl)
     549/    F130 :                     	ret	z
     550/    F130 :                     	ld	a, (13h)
     551/    F130 :                     	jr	ink7
     552/    F130 :                     ink9:	ld	e, 7
     553/    F130 :                     	call	ink19
     554/    F130 :                     	jr	z, ink10
     555/    F130 :                     	bit	7, c
     556/    F130 :                     	jr	z, ink15
     557/    F130 :                     	bit	6, c
     558/    F130 :                     	jr	nz, ink8
     559/    F130 :                     	bit	5, (hl)
     560/    F130 :                     	jr	nz, ink15
     561/    F130 :                     ink10:	bit	7, (hl)
     562/    F130 :                     	ret	z
     563/    F130 :                     	ld	a, (13h)
     564/    F130 :                     	bit	6, c
     565/    F130 :                     	jr	z, ink11
     566/    F130 :                     	bit	3, (hl)
     567/    F130 :                     	jr	z, ink7
     568/    F130 :                     	jr	ink12
     569/    F130 :                     ink11:	bit	3, (hl)
     570/    F130 :                     	jr	nz, ink7
     571/    F130 :                     ink12:	ld	b, a
     572/    F130 :                     	and	30h
     573/    F130 :                     	ld	a, b
     574/    F130 :                     	jp	po, ink13
     575/    F130 :                     	res	4, a
     576/    F130 :                     	jr	ink14
     577/    F130 :                     ink13:	set	4, a
     578/    F130 :                     ink14:	set	5, a
     579/    F130 :                     	jr	ink7
     580/    F130 :                     ink15:	ld	a, 8
     581/    F130 :                     	jp	ink3
     582/    F130 :                     ink16:	ld	e, 0
     583/    F130 :                     ink17:	call	ink19
     584/    F130 :                     	scf
     585/    F130 :                     	ret	nz
     586/    F130 :                     ink18:	inc	e
     587/    F130 :                     	ld	bc, 8
     588/    F130 :                     	add	ix, bc
     589/    F130 :                     	ld	a, e
     590/    F130 :                     	cp	6
     591/    F130 :                     	jr	nz, ink17
     592/    F130 :                     	scf
     593/    F130 :                     	ccf
     594/    F130 :                     	ret
     595/    F130 :                     ink19:	ld	a, e
     596/    F130 :                     	out	(8), a
     597/    F130 :                     	out	(2), a
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 11 - 18.7.2004 19:30:37


     598/    F130 :                     	in	a, (2)
     599/    F130 :                     	and	0Fh
     600/    F130 :                     	ld	c, a
     601/    F130 :                     	set	4, a
     602/    F130 :                     	out	(2), a
     603/    F130 :                     	in	a, (2)
     604/    F130 :                     	sla	a
     605/    F130 :                     	sla	a
     606/    F130 :                     	sla	a
     607/    F130 :                     	sla	a
     608/    F130 :                     	ld	d, a
     609/    F130 :                     	add	a, c
     610/    F130 :                     	ld	c, a
     611/    F130 :                     	xor	a
     612/    F130 :                     	out	(2), a
     613/    F130 :                     	in	a, (2)
     614/    F130 :                     	and	0Fh
     615/    F130 :                     	add	a, d
     616/    F130 :                     	cp	c
     617/    F130 :                     	jr	nz, ink19
     618/    F130 :                     	cpl
     619/    F130 :                     	or	a
     620/    F130 :                     	ld	a, 0
     621/    F130 :                     	ret
     622/    F130 :                     ink20:	ld	de, 0
     623/    F130 :                     	ld	b, 8
     624/    F130 :                     ink21:	sra	c
     625/    F130 :                     	jr	nc, ink22
     626/    F130 :                     	inc	e
     627/    F130 :                     	djnz	ink21
     628/    F130 :                     ink22:	add	ix, de
     629/    F130 :                     	ld	a, (ix+0)
     630/    F130 :                     	res	6, (hl)
     631/    F130 :                     	ret
     632/    F130 :                     
     633/    F130 :                     
     634/    F130 : =>TRUE              	ELSEIF BROSIGERW = 1
     635/    F130 :                     ;
     636/    F130 :                     ;Eingabe ein Zeichen von der Tastatur in A
     637/    F130 :                     ;
     638/    F130 : C5                  INKEY:	PUSH	BC
     639/    F131 : D5                  	PUSH	DE
     640/    F132 : E5                  	PUSH	HL
     641/    F133 : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
     642/    F133 :                     	CALL	INKY
     643/    F133 : =>TRUE              	ELSEIF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
     644/    F133 : CD 1B FF            	CALL	JOYIN
     645/    F136 :                     	ENDIF
     646/    F136 : E1                  	POP	HL
     647/    F137 : D1                  	POP	DE
     648/    F138 : C1                  	POP	BC
     649/    F139 : C9                  	RET
     650/    F13A :                     ;
     651/    F13A :                     ;uebergibt aktuell gedrueckte Taste
     652/    F13A :                     ;
     653/    F13A : AF                  POLL:	XOR	A
     654/    F13B : 32 04 00            	LD	(LAKEY),A		;Puffer loeschen
     655/    F13E : CD 30 F1            	CALL	INKEY
     656/    F141 : F5                  	PUSH	AF
     657/    F142 : AF                  	XOR	A
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 12 - 18.7.2004 19:30:37


     658/    F143 : 32 04 00            	LD	(LAKEY),A		;Puffer wieder
     659/    F146 : F1                  	POP	AF			;reinigen
     660/    F147 : C9                  	RET
     661/    F148 :                     ;
     662/    F148 :                     ;Anzeige Zusatzmonitorkommandos
     663/    F148 :                     ;
     664/    F148 : 11 B0 00            Z_KDO:	LD	DE,USRKD		;Adr. Tabelle
     665/    F14B : 1A                  ZKO1:	LD	A,(DE)
     666/    F14C : E6 E0               	AND	A, 0E0H
     667/    F14E : C8                  	RET	Z			;wenn Steuerzeichen
     668/    F14F : CB 7F               	BIT	7,A
     669/    F151 : C0                  	RET	NZ			;wenn Grafikzeichen
     670/    F152 : E7 02               	DW	RPRST
     671/    F154 : C0                  	DB	0C0H			;"@"
     672/    F155 : 1A                  	LD	A,(DE)
     673/    F156 : E7 00               	DW	ROUTC			;Buchstabe ausgeben
     674/    F158 : E7 02               	DW	RPRST
     675/    F15A : BE                  	DB	0BEH			;">"
     676/    F15B : 13                  	INC	DE
     677/    F15C : 1A                  	LD	A,(DE)
     678/    F15D : 6F                  	LD	L,A
     679/    F15E : 13                  	INC	DE
     680/    F15F : 1A                  	LD	A,(DE)
     681/    F160 : 67                  	LD	H,A
     682/    F161 : E7 07               	DW	ROTHL			;Adresse anzeigen
     683/    F163 : E7 02               	DW	RPRST
     684/    F165 : 8D                  	DB	CR+80H
     685/    F166 : 13                  	INC	DE
     686/    F167 : 18 E2               	JR	ZKO1			;naechstes Kommando
     687/    F169 :                     ;
     688/    F169 :                     ;Portausgabe
     689/    F169 :                     ;
     690/    F169 : 3A 1B 00            O_KDO:	LD	A,(ARG1)		;Portadresse
     691/    F16C : 4F                  	LD	C,A
     692/    F16D : 3A 1D 00            	LD	A,(ARG2)		;Wert
     693/    F170 : ED 79               	OUT	(C),A
     694/    F172 : C9                  	RET
     695/    F173 :                     ;
     696/    F173 :                     ;Registeranzeige / NMI-Routine
     697/    F173 :                     ;
     698/    F173 : CD 33 F5            REGAN:	CALL	REGA			;Register retten
     699/    F176 : E1                  	POP	HL
     700/    F177 : 22 0B 00            	LD	(BPADR),HL
     701/    F17A : 22 61 00            	LD	(REGPC),HL
     702/    F17D : ED 73 63 00         	LD	(REGSP),SP
     703/    F181 :                     ;
     704/    F181 : 31 B0 00            	LD	SP,SYSSK
     705/    F184 : 11 0D 00            	LD	DE,BPOPC
     706/    F187 : 01 03 00            	LD	BC,3
     707/    F18A : ED B0               	LDIR				;BREAK-Bytes kopieren
     708/    F18C :                     ;
     709/    F18C : CD E4 F5            	CALL	REGDA			;Registeranzeige
     710/    F18F :                     ;
     711/    F18F : 31 B0 00            	LD	SP,SYSSK		;Grundzustand herstellen
     712/    F192 : 21 5F F0            	LD	HL,KDO2
     713/    F195 : E5                  	PUSH	HL
     714/    F196 : ED 45               	RETN				;zum Monitor
     715/    F198 :                     ;
     716/    F198 :                     ;Initialisierung der Zusatzfunktionen
     717/    F198 :                     ;
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 13 - 18.7.2004 19:30:37


     718/    F198 : 3A 66 00            INIT3:	LD	A,(NMI)
     719/    F19B : FE C3               	CP	A, 0C3H			;schon init. ?
     720/    F19D : 28 2F               	JR	Z, INIT4		;dann zurueck
     721/    F19F :                     ;
     722/    F19F : 3E C3               	LD	A,0C3H
     723/    F1A1 : 32 66 00            	LD	(NMI),A
     724/    F1A4 : 21 73 F1            	LD	HL,REGAN		;NMI-Funktion:
     725/    F1A7 : 22 67 00            	LD	(NMI+1),HL		;Registeranzeige
     726/    F1AA :                     ;
     727/    F1AA : CD EE FF            	CALL	RZMIN			;Init. Zusatzmonitor
     728/    F1AD :                     ;
     729/    F1AD : AF                  	XOR	A
     730/    F1AE : 32 27 00            	LD	(KYBTS),A
     731/    F1B1 :                     ;Signalton
     732/    F1B1 : 01 40 A0            	LD	BC,0A040H
     733/    F1B4 : CD DC FF            	CALL	RBEEP
     734/    F1B7 : 01 00 05            	LD	BC,0500H
     735/    F1BA : CD DC FF            	CALL	RBEEP
     736/    F1BD : 01 40 A0            	LD	BC,0A040H
     737/    F1C0 : CD DC FF            	CALL	RBEEP
     738/    F1C3 :                     ;
     739/    F1C3 : 21 F2 F1            	LD	HL,MONTB
     740/    F1C6 : 11 33 00            	LD	DE,LSYNC
     741/    F1C9 : 01 1A 00            	LD	BC,001AH		;Monitorzellen
     742/    F1CC : ED B0               	LDIR				;initialisieren
     743/    F1CE : C9                  INIT4:	RET
     744/    F1CF :                     ;
     745/    F1CF :                     ;Hardcopy
     746/    F1CF :                     ;
     747/    F1CF : E5                  COPY:	PUSH	HL
     748/    F1D0 : F5                  	PUSH	AF
     749/    F1D1 : 21 27 00            	LD	HL,KYBTS
     750/    F1D4 : CB 5E               	BIT	3,(HL)
     751/    F1D6 : 28 09               	JR	Z, COPY2		;kein Copy an
     752/    F1D8 :                     ;
     753/    F1D8 : FE 0D               	CP	A, CR			;Konvertierung CR
     754/    F1DA : 20 02               	JR	NZ, COPY1
     755/    F1DC : 3E 1E               	LD	A,1EH			;in NL
     756/    F1DE : CD E8 FF            COPY1:	CALL	RDRAK			;Druckerausgabe
     757/    F1E1 : F1                  COPY2:	POP	AF
     758/    F1E2 : E1                  	POP	HL
     759/    F1E3 :                     ;
     760/    F1E3 : F5                  	PUSH	AF
     761/    F1E4 : C5                  	PUSH	BC
     762/    F1E5 : D5                  	PUSH	DE
     763/    F1E6 : C3 1E F2            	JP	OUT1			;weiter zu OUTCH
     764/    F1E9 :                     ;
     765/    F1E9 :                     ;
     766/    F1E9 :                     ;
     767/    F1E9 : FF                  	DB	0FFH
     768/    F1EA : FF                  	DB	0FFH
     769/    F1EB : FF                  	DB	0FFH
     770/    F1EC : FF                  	DB	0FFH
     771/    F1ED : FF                  	DB	0FFH
     772/    F1EE : FF                  	DB	0FFH
     773/    F1EF : FF                  	DB	0FFH
     774/    F1F0 : FF                  	DB	0FFH
     775/    F1F1 : FF                  	DB	0FFH
     776/    F1F2 :                     
     777/    F1F2 :                     	ENDIF
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 14 - 18.7.2004 19:30:37


     778/    F1F2 :                     
     779/    F1F2 :                     ;
     780/    F1F2 :                     ;Monitorinit., wird nach 33H umgeladen
     781/    F1F2 :                     ;
     782/    F1F2 :                     MONTB:
     783/      33 :                     	phase	0033h
     784/      33 :                     
     785/      33 : =>FALSE             	IF MONTYP == "Z1013_202"
     786/      33 :                     
     787/      33 :                     	DW	07D0H			;Kenntonlaenge LSYNC
     788/      33 :                     	DB	10h,00h,08h		;Tastaturcodetabelle 0035H
     789/      33 :                     	JP	KDO1			;RST38-Sprung	RST38
     790/      33 :                     	db	60h,68h,70h		;Tastaturcodetabelle 003BH
     791/      33 :                     	db	78h,20h,28h		;Tastaturcodetabelle 003EH
     792/      33 :                     	db	58h,30h,38h		;Tastaturcodetabelle 0041H
     793/      33 :                     	db	40h,48h,50h		;Tastaturcodetabelle 0044H
     794/      33 :                     	DW	03E0H			;WINDOW-Laenge	WINDL
     795/      33 :                     	DW	BWS			;WINDOW-Anfang	WINDA
     796/      33 :                     	DW	BWS+400H		;WINDOW-Ende	WINDE
     797/      33 :                     
     798/      33 : =>FALSE             	ELSEIF MONTYP == "Z1013_A2"
     799/      33 :                     
     800/      33 :                     	dw	7D0h			;Kenntonlaenge 	LSYNC
     801/      33 :                     	DW	03E0H			;WINDOW-Laenge 	WINDL
     802/      33 :                     	db	0
     803/      33 :                     	jp	kdo1			;RST38-Sprung	RST38
     804/      33 :                     	DW	BWS			;WINDOW-Anfang	WINDA
     805/      33 :                     	DW	BWS+400H		;WINDOW-Ende	WINDE
     806/      33 :                     
     807/      33 : =>TRUE              	ELSEIF BROSIGERW = 1
     808/      33 :                     
     809/      33 : D0 07               	DW	07D0H			;Kenntonlaenge	LSYNC
     810/      35 : 00                  	DB	0
     811/      36 : 00                  	DB	0
     812/      37 : 00                  	DB	0
     813/      38 : C3 58 F0            	JP	KDO1			;RST38-Sprung	RST38
     814/      3B : 19 FA               	DW	K7KEY			;Tastaturbelegungsfeld
     815/      3D : 64 FF               	DW	K7STG			;Stringfeld
     816/      3F : 00 00               	DW	0
     817/      41 : 0B 00               	DW	K7FKA-K7FKY		;Laenge Funktionstastenfeld
     818/      43 : F8 F9               	DW	K7FKY			;Fkt.tastenpositionsfeld
     819/      45 : 03 FA               	DW	K7FKA			;Funktionstastenadressfeld
     820/      47 : E0 03               	DW	03E0H			;WINDOW-Laenge	WINDL
     821/      49 : 00 EC               	DW	BWS			;WINDOW-Anfang	WINDA
     822/      4B : 00 F0               	DW	BWS+400H		;WINDOW-Ende	WINDE
     823/      4D :                     
     824/      4D :                     	ENDIF
     825/      4D :                     
     826/    F20C :                     	dephase
     827/    F20C :                     ;
     828/    F20C :                     ;Zeichen von Tastatur holen, warten bis Taste gedrueckt
     829/    F20C :                     ;
     830/    F20C : =>FALSE             	IF MONTYP == "Z1013_202"
     831/    F20C :                     
     832/    F20C :                     INCH:	push	bc
     833/    F20C :                     	push	de
     834/    F20C :                     	push	hl
     835/    F20C :                     INC1:	CALL	INKEY
     836/    F20C :                     	OR	A
     837/    F20C :                     	JR	Z, INC1			;keine Taste gedrueckt
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 15 - 18.7.2004 19:30:37


     838/    F20C :                     	pop	hl
     839/    F20C :                     	pop	de
     840/    F20C :                     	pop	bc
     841/    F20C :                     	RET
     842/    F20C :                     
     843/    F20C : =>TRUE              	ELSEIF BROSIGERW = 1
     844/    F20C :                     
     845/    F20C : 00                  INCH:	NOP
     846/    F20D : 00                  	NOP
     847/    F20E : 00                  	NOP
     848/    F20F : CD 30 F1            INC1:	CALL	INKEY
     849/    F212 : B7                  	OR	A
     850/    F213 : 28 FA               	JR	Z, INC1			;keine Taste gedrueckt
     851/    F215 : 00                  	NOP
     852/    F216 : 00                  	NOP
     853/    F217 : 00                  	NOP
     854/    F218 : C9                  	RET
     855/    F219 :                     
     856/    F219 : =>FALSE             	ELSEIF MONTYP == "Z1013_A2"
     857/    F219 :                     
     858/    F219 :                     INCH:	push	ix
     859/    F219 :                     	push	bc
     860/    F219 :                     	push	de
     861/    F219 :                     	push	hl
     862/    F219 :                     	ld	bc, 1000h
     863/    F219 :                     inc1:	push	bc
     864/    F219 :                     	call	inkey
     865/    F219 :                     	pop	bc
     866/    F219 :                     	ld	ix, 4
     867/    F219 :                     	cp	(ix+0)
     868/    F219 :                     	jr	nz, inc6
     869/    F219 :                     	or	a
     870/    F219 :                     	jr	z, inc5
     871/    F219 :                     inc2:	dec	c
     872/    F219 :                     	jr	nz, inc2
     873/    F219 :                     	bit	4, (hl)
     874/    F219 :                     	jr	nz, inc4
     875/    F219 :                     	ld	de, 800h
     876/    F219 :                     inc3:	dec	de
     877/    F219 :                     	ld	a, e
     878/    F219 :                     	or	d
     879/    F219 :                     	jr	nz, inc3
     880/    F219 :                     inc4:	djnz	inc1
     881/    F219 :                     	set	4, (hl)
     882/    F219 :                     	xor	a
     883/    F219 :                     	jr	inc6
     884/    F219 :                     inc5:	res	4, (hl)
     885/    F219 :                     inc6:	ld	(ix+0),	a
     886/    F219 :                     	or	a
     887/    F219 :                     	jr	z, inc1
     888/    F219 :                     	pop	hl
     889/    F219 :                     	pop	de
     890/    F219 :                     	pop	bc
     891/    F219 :                     	pop	ix
     892/    F219 :                     	ret
     893/    F219 :                     
     894/    F219 :                     	ENDIF
     895/    F219 :                     ;
     896/    F219 :                     ;Ausgabe Zeichen auf Bildschirm
     897/    F219 :                     ;
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 16 - 18.7.2004 19:30:37


     898/    F219 : E6 7F               OUT0:	AND	A, 7FH
     899/    F21B :                     ;
     900/    F21B :                     OUTCH:
     901/    F21B : =>FALSE             	IF (MONTYP == "Z1013_202") || (MONTYP == "Z1013_A2")
     902/    F21B :                     	push	af
     903/    F21B :                     	push	bc
     904/    F21B :                     	push	de
     905/    F21B : =>TRUE              	ELSEIF BROSIGERW = 1
     906/    F21B : C3 CF F1            	JP	COPY			;einschleifen Hardcopy
     907/    F21E :                     	ENDIF
     908/    F21E :                     ;
     909/    F21E : E5                  OUT1:	PUSH	HL
     910/    F21F : 2A 2B 00            	LD	HL,(CUPOS)
     911/    F222 : F5                  	PUSH	AF
     912/    F223 : 3A 1F 00            	LD	A,(BUFFA)		;Zeichen unter Cursor
     913/    F226 : 77                  	LD	(HL),A			;zurueckschreiben
     914/    F227 : F1                  	POP	AF
     915/    F228 : FE 0D               	CP	A, CR			;neue Zeile?
     916/    F22A : 28 53               	JR	Z, OUT8
     917/    F22C : FE 0C               	CP	A, CLS			;Bildschirm loeschen?
     918/    F22E : 28 5E               	JR	Z, OUT10
     919/    F230 : FE 08               	CP	A, 8			;Cursor links?
     920/    F232 : 28 48               	JR	Z, OUT7
     921/    F234 : FE 09               	CP	A, 9			;Cursor rechts?
     922/    F236 : 28 01               	JR	Z, OUT2
     923/    F238 : 77                  	LD	(HL),A			;sonst Zeichen in BWS
     924/    F239 : 23                  OUT2:	INC	HL
     925/    F23A :                     ;
     926/    F23A : EB                  OUT3:	EX	DE,HL
     927/    F23B : 2A 4B 00            	LD	HL,(WINDE)
     928/    F23E : AF                  	XOR	A			;Test, ob neue Cursor-
     929/    F23F : ED 52               	SBC	HL,DE			;position schon
     930/    F241 : EB                  	EX	DE,HL			;ausserhalb Window
     931/    F242 : 20 2A               	JR	NZ, OUT6			;nein
     932/    F244 :                     ;
     933/    F244 : ED 5B 49 00         	LD	DE,(WINDA)		;scrollen um
     934/    F248 : 21 20 00            	LD	HL,0020H		;eine Zeile im Window
     935/    F24B : 19                  	ADD	HL,DE
     936/    F24C : ED 4B 47 00         	LD	BC,(WINDL)		;Windowlaenge
     937/    F250 : 78                  	LD	A,B
     938/    F251 : B1                  	OR	C			;=0?
     939/    F252 : 28 02               	JR	Z, OUT5			;ja --> kein Scrollen
     940/    F254 : ED B0               	LDIR
     941/    F256 : D5                  OUT5:	PUSH	DE			;letzte Zeile loeschen
     942/    F257 : E1                  	POP	HL
     943/    F258 : E5                  	PUSH	HL
     944/    F259 : 13                  	INC	DE
     945/    F25A : 36 20               	LD	(HL),' '
     946/    F25C : 01 1F 00            	LD	BC,001FH
     947/    F25F : ED B0               	LDIR
     948/    F261 :                     ;
     949/    F261 : 2A 16 00            	LD	HL,(SOIL)		;SOIL um eine Zeile
     950/    F264 : 11 20 00            	LD	DE,0020H		;erhoehen
     951/    F267 : AF                  	XOR	A
     952/    F268 : ED 52               	SBC	HL,DE
     953/    F26A : 22 16 00            	LD	(SOIL),HL
     954/    F26D : E1                  	POP	HL
     955/    F26E :                     ;
     956/    F26E : 7E                  OUT6:	LD	A,(HL)			;Zeichen unter Cursor
     957/    F26F : 32 1F 00            	LD	(BUFFA),A		;sichern
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 17 - 18.7.2004 19:30:37


     958/    F272 : 36 FF               	LD	(HL),0FFH		;Cursor setzen
     959/    F274 : 22 2B 00            	LD	(CUPOS),HL
     960/    F277 : E1                  	POP	HL
     961/    F278 : D1                  	POP	DE
     962/    F279 : C1                  	POP	BC
     963/    F27A : F1                  	POP	AF
     964/    F27B : C9                  	RET
     965/    F27C :                     ;
     966/    F27C : 2B                  OUT7:	DEC	HL			;Cursor links
     967/    F27D : 18 BB               	JR	OUT3
     968/    F27F :                     ;
     969/    F27F : 3E E0               OUT8:	LD	A,0E0H			;neue Zeile
     970/    F281 : A5                  	AND	A, L
     971/    F282 : C6 20               	ADD	A, 20H			;A=NWB der Position
     972/    F284 : 4F                  	LD	C,A			;eine Zeile tiefer
     973/    F285 : 36 20               OUT9:	LD	(HL),' '		;Rest der Zeile ab
     974/    F287 : 23                  	INC	HL			;ENTER loeschen
     975/    F288 : 7D                  	LD	A,L
     976/    F289 : B9                  	CP	A, C
     977/    F28A : 20 F9               	JR	NZ, OUT9
     978/    F28C : 18 AC               	JR	OUT3
     979/    F28E :                     ;
     980/    F28E : 2A 47 00            OUT10:	LD	HL,(WINDL)		;Window loeschen
     981/    F291 : 01 1F 00            	LD	BC,001FH
     982/    F294 : 09                  	ADD	HL,BC
     983/    F295 : E5                  	PUSH	HL
     984/    F296 : C1                  	POP	BC
     985/    F297 : 2A 49 00            	LD	HL,(WINDA)
     986/    F29A : E5                  	PUSH	HL
     987/    F29B : 36 20               	LD	(HL),' '
     988/    F29D : E5                  	PUSH	HL
     989/    F29E : D1                  	POP	DE
     990/    F29F : 13                  	INC	DE
     991/    F2A0 : ED B0               	LDIR
     992/    F2A2 : E1                  	POP	HL
     993/    F2A3 : 18 C9               	JR	OUT6
     994/    F2A5 :                     ;
     995/    F2A5 :                     ;Ausgabe String, bis Bit7=1
     996/    F2A5 :                     ;
     997/    F2A5 : E3                  PRST7:	EX	(SP),HL			;Adresse hinter CALL
     998/    F2A6 : 7E                  PRS1:	LD	A,(HL)
     999/    F2A7 : 23                  	INC	HL
    1000/    F2A8 : F5                  	PUSH	AF
    1001/    F2A9 : CD 19 F2            	CALL	OUT0
    1002/    F2AC : F1                  	POP	AF
    1003/    F2AD : CB 7F               	BIT	7,A			;Bit7 gesetzt?
    1004/    F2AF : 28 F5               	JR	Z, PRS1			;nein
    1005/    F2B1 : E3                  	EX	(SP),HL			;neue Returnadresse
    1006/    F2B2 : C9                  	RET
    1007/    F2B3 :                     ;
    1008/    F2B3 :                     ;Eingabe einer Zeile mit Promtsymbol
    1009/    F2B3 :                     ;
    1010/    F2B3 : CD A5 F2            INLIN:	CALL	PRST7
    1011/    F2B6 : 20 23               	DB	" #"
    1012/    F2B8 : A0                  	DB	0A0H			;" "
    1013/    F2B9 :                     ;
    1014/    F2B9 :                     ;Eingabe einer Zeichenkette
    1015/    F2B9 :                     ;
    1016/    F2B9 : E5                  INSTR:	PUSH	HL
    1017/    F2BA : 2A 2B 00            	LD	HL,(CUPOS)
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 18 - 18.7.2004 19:30:37


    1018/    F2BD : 22 16 00            	LD	(SOIL),HL		;SOIL=1.Position
    1019/    F2C0 : E7 01               INS1:	DW	RINCH			;Zeichen von Tastatur
    1020/    F2C2 : E7 00               	DW	ROUTC			;anzeigen
    1021/    F2C4 : FE 0D               	CP	A, CR			;>ENTER<?
    1022/    F2C6 : 20 F8               	JR	NZ, INS1		;nein --> weiter eingeben
    1023/    F2C8 : E1                  	POP	HL
    1024/    F2C9 : C9                  	RET
    1025/    F2CA :                     ;
    1026/    F2CA :                     ;fuehrende Leerzeichen ueberlesen
    1027/    F2CA :                     ;
    1028/    F2CA : 1A                  SPACE:	LD	A,(DE)
    1029/    F2CB : FE 20               	CP	A, ' '
    1030/    F2CD : C0                  	RET	NZ
    1031/    F2CE : 13                  	INC	DE
    1032/    F2CF : 18 F9               	JR	SPACE
    1033/    F2D1 :                     ;
    1034/    F2D1 :                     ;letzen vier Zeichen als Hexzahl konvertieren
    1035/    F2D1 :                     ;und in DATA ablegen
    1036/    F2D1 :                     ;
    1037/    F2D1 : CD CA F2            KONVX:	CALL	SPACE
    1038/    F2D4 : AF                  	XOR	A
    1039/    F2D5 : 21 13 00            	LD	HL,DATA
    1040/    F2D8 : 77                  	LD	(HL),A			;DATA=0
    1041/    F2D9 : 23                  	INC	HL
    1042/    F2DA : 77                  	LD	(HL),A
    1043/    F2DB : 1A                  KON1:	LD	A,(DE)
    1044/    F2DC : 2B                  	DEC	HL
    1045/    F2DD : D6 30               	SUB	30H			;Zeichen<"0"?
    1046/    F2DF : F8                  	RET	M
    1047/    F2E0 : FE 0A               	CP	A, 0AH			;Zeichen<="9"?
    1048/    F2E2 : 38 08               	JR	C, KON2
    1049/    F2E4 : D6 07               	SUB	7
    1050/    F2E6 : FE 0A               	CP	A, 0AH			;Zeichen<"A"?
    1051/    F2E8 : F8                  	RET	M
    1052/    F2E9 : FE 10               	CP	A, 10H			;Zeichen>"F"?
    1053/    F2EB : F0                  	RET	P
    1054/    F2EC : 13                  KON2:	INC	DE			;Hexziffer eintragen
    1055/    F2ED : ED 6F               	RLD
    1056/    F2EF : 23                  	INC	HL
    1057/    F2F0 : ED 6F               	RLD
    1058/    F2F2 : 18 E7               	JR	KON1			;naechste Ziffer
    1059/    F2F4 :                     ;
    1060/    F2F4 :                     ;Konvertierung ASCII-Hex ab (DE) --> (HL)
    1061/    F2F4 :                     ;
    1062/    F2F4 : C5                  INHEX:	PUSH	BC
    1063/    F2F5 : CD D1 F2            	CALL	KONVX			;Konvertierung
    1064/    F2F8 : 44                  	LD	B,H			;BC=HL=DATA+1
    1065/    F2F9 : 4D                  	LD	C,L
    1066/    F2FA : 6E                  	LD	L,(HL)			;unteres Byte
    1067/    F2FB : 03                  	INC	BC
    1068/    F2FC : 0A                  	LD	A,(BC)
    1069/    F2FD : 67                  	LD	H,A			;oberes Byte
    1070/    F2FE : B5                  	OR	L			;Z-Flag setzen
    1071/    F2FF : C1                  	POP	BC
    1072/    F300 : C9                  	RET
    1073/    F301 :                     ;
    1074/    F301 :                     ;Ausgabe (A) hexadezimal
    1075/    F301 :                     ;
    1076/    F301 : F5                  OUTHX:	PUSH	AF
    1077/    F302 : 1F                  	RRA
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 19 - 18.7.2004 19:30:37


    1078/    F303 : 1F                  	RRA
    1079/    F304 : 1F                  	RRA
    1080/    F305 : 1F                  	RRA
    1081/    F306 : CD 0A F3            	CALL	OUX1			;obere Tetrade ausgeben
    1082/    F309 : F1                  	POP	AF			;und die untere
    1083/    F30A : F5                  OUX1:	PUSH	AF
    1084/    F30B : E6 0F               	AND	A, 0FH
    1085/    F30D : C6 30               	ADD	A, 30H			;Konvertierung --> ASCII
    1086/    F30F : FE 3A               	CP	A, ':'			;Ziffer "A" ... "F"?
    1087/    F311 : 38 02               	JR	C, OUX2			;nein
    1088/    F313 : C6 07               	ADD	A, 7			;sonst Korrektur
    1089/    F315 : CD 1B F2            OUX2:	CALL	OUTCH			;und Ausgabe
    1090/    F318 : F1                  	POP	AF
    1091/    F319 : C9                  	RET
    1092/    F31A :                     ;
    1093/    F31A :                     ;Ausgabe HL hexadezimal
    1094/    F31A :                     ;
    1095/    F31A : F5                  OUTHL:	PUSH	AF
    1096/    F31B : 7C                  	LD	A,H
    1097/    F31C : CD 01 F3            	CALL	OUTHX
    1098/    F31F : 7D                  	LD	A,L
    1099/    F320 : CD 01 F3            	CALL	OUTHX
    1100/    F323 : F1                  	POP	AF
    1101/    F324 : C9                  	RET
    1102/    F325 :                     ;
    1103/    F325 :                     ;Speicherinhalt modifizieren
    1104/    F325 :                     ;
    1105/    F325 : 2A 1B 00            MEM:	LD	HL,(ARG1)
    1106/    F328 : E7 07               MEM1:	DW	ROTHL			;Ausgabe Adresse
    1107/    F32A : E5                  	PUSH	HL
    1108/    F32B : E7 0E               	DW	ROTSP			;Leerzeichen
    1109/    F32D : 7E                  	LD	A,(HL)
    1110/    F32E : E7 06               	DW	ROTHX			;Ausgabe Byte
    1111/    F330 : CD B3 F2            	CALL	INLIN
    1112/    F333 : ED 5B 16 00         	LD	DE,(SOIL)
    1113/    F337 : 1A                  	LD	A,(DE)
    1114/    F338 : 08                  	EX	AF, AF'
    1115/    F339 : E1                  	POP	HL
    1116/    F33A : 2B                  	DEC	HL
    1117/    F33B : 23                  MEM2:	INC	HL
    1118/    F33C : E5                  	PUSH	HL
    1119/    F33D : CD F4 F2            	CALL	INHEX
    1120/    F340 : 28 0D               	JR	Z, MEM4			;Trennzeichen
    1121/    F342 : 7D                  MEM3:	LD	A,L
    1122/    F343 : E1                  	POP	HL
    1123/    F344 : 77                  	LD	(HL),A
    1124/    F345 : BE                  	CP	A, (HL)			;RAM-Test
    1125/    F346 : 28 F3               	JR	Z, MEM2			;i.O.
    1126/    F348 : E7 02               	DW	RPRST
    1127/    F34A : 45 52               	DB	"ER"
    1128/    F34C : A0                  	DB	0A0H			;" "
    1129/    F34D : 18 D9               	JR	MEM1
    1130/    F34F :                     ;
    1131/    F34F : 1A                  MEM4:	LD	A,(DE)			;Test Datenbyte=0
    1132/    F350 : FE 20               	CP	A, ' '			;wenn ja --> Z=1
    1133/    F352 : 28 EE               	JR	Z, MEM3
    1134/    F354 : E1                  	POP	HL
    1135/    F355 : 23                  	INC	HL
    1136/    F356 : 22 1D 00            	LD	(ARG2),HL		;1. nichtbearb. Adr.
    1137/    F359 : FE 3B               	CP	A, ';'
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 20 - 18.7.2004 19:30:37


    1138/    F35B : C8                  	RET	Z			;Return, wenn ";" gegeben
    1139/    F35C : 08                  	EX	AF, AF'
    1140/    F35D : FE 20               	CP	A, ' '
    1141/    F35F : 28 C7               	JR	Z, MEM1			;Z=1 keine Eingabe
    1142/    F361 : 2B                  	DEC	HL
    1143/    F362 : FE 52               	CP	A, 'R'			;"R" gegeben?
    1144/    F364 : 20 C2               	JR	NZ, MEM1		;nein
    1145/    F366 : 2B                  	DEC	HL			;sonst eine Adresse
    1146/    F367 : 18 BF               	JR	MEM1			;zurueck
    1147/    F369 :                     ;
    1148/    F369 :                     ;Abspeichern auf Kassette
    1149/    F369 :                     ;
    1150/    F369 : 2A 1B 00            CSAVE:	LD	HL,(ARG1)
    1151/    F36C : CD 7D F3            	CALL	SAV2			;Ausgabe 20H Bytes
    1152/    F36F : EB                  SAV1:	EX	DE,HL
    1153/    F370 : 2A 1D 00            	LD	HL,(ARG2)
    1154/    F373 : A7                  	AND	A, A
    1155/    F374 : ED 52               	SBC	HL,DE
    1156/    F376 : EB                  	EX	DE,HL
    1157/    F377 : D8                  	RET	C			;wenn File zu Ende
    1158/    F378 : CD 83 F3            	CALL	SAV3			;Ausgabe 20H Byte
    1159/    F37B : 18 F2               	JR	SAV1
    1160/    F37D :                     ;
    1161/    F37D : ED 5B 33 00         SAV2:	LD	DE,(LSYNC)		;langer Vorton
    1162/    F381 : 18 03               	JR	SAV4
    1163/    F383 :                     ;Ausgabe ein Block = 20H Bytes
    1164/    F383 : 11 0E 00            SAV3:	LD	DE,000EH		;kurzer Vorton
    1165/    F386 :                     
    1166/    F386 : =>FALSE             	IF (MONTYP == "Z1013_202") || (MONTYP == "Z1013_A2")
    1167/    F386 :                     sav4:	ld	b,70h			;Ausg. Vorton
    1168/    F386 :                     sav5:	djnz	sav5
    1169/    F386 :                     	call	sav21			;Umschalter
    1170/    F386 :                     	dec	de
    1171/    F386 :                     	ld	a,e
    1172/    F386 :                     	or	d
    1173/    F386 :                     	jr	nz,sav4
    1174/    F386 :                     	ld	c,02h			;Ausgabe Synchron-
    1175/    F386 :                     sav6:	ld	b,35h			;impulse
    1176/    F386 :                     sav7:	djnz	sav7
    1177/    F386 :                     	call	sav21			;Umschalter
    1178/    F386 :                     	dec	c
    1179/    F386 :                     	ld	de,0
    1180/    F386 :                     	jr	nz,sav6
    1181/    F386 :                     	push	de			;DE=IX=0000
    1182/    F386 :                     	pop	ix
    1183/    F386 :                     
    1184/    F386 : =>TRUE              	ELSEIF BROSIGERW = 1
    1185/    F386 :                     
    1186/    F386 : E5                  SAV4:	PUSH	HL
    1187/    F387 : DD E1               	POP	IX
    1188/    F389 :                     ;HL=Adresse, IX=Kopfinhalt, DE=Laenge Vorton
    1189/    F389 : 06 70               BSMK:	LD	B,70H			;Vorton ausgeben
    1190/    F38B : 10 FE               SAV5:	DJNZ	SAV5
    1191/    F38D : CD F1 F3            	CALL	SAV21			;Flanke ausgeben
    1192/    F390 : 1B                  	DEC	DE
    1193/    F391 : 7B                  	LD	A,E
    1194/    F392 : B2                  	OR	D
    1195/    F393 : 20 F4               	JR	NZ, BSMK
    1196/    F395 :                     ;
    1197/    F395 : 0E 02               	LD	C,2			;Trennzeichen schreiben
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 21 - 18.7.2004 19:30:37


    1198/    F397 : 06 36               SAV6:	LD	B,36H
    1199/    F399 : 10 FE               SAV7:	DJNZ	SAV7
    1200/    F39B : CD F1 F3            	CALL	SAV21			;Flanke ausgeben
    1201/    F39E : 0D                  	DEC	C
    1202/    F39F : 20 F6               	JR	NZ, SAV6
    1203/    F3A1 : DD E5               	PUSH	IX
    1204/    F3A3 : D1                  	POP	DE
    1205/    F3A4 :                     
    1206/    F3A4 :                     	ENDIF
    1207/    F3A4 :                     ;
    1208/    F3A4 : 06 12               	LD	B,12H			;Kopfinhalt ausgeben
    1209/    F3A6 : 10 FE               SAV8:	DJNZ	SAV8
    1210/    F3A8 : CD D0 F3            	CALL	SAV14			;Ausgabe DE
    1211/    F3AB : 06 0F               	LD	B,0FH
    1212/    F3AD : 10 FE               SAV9:	DJNZ	SAV9
    1213/    F3AF :                     ;
    1214/    F3AF : 0E 10               	LD	C,10H			;10H*2 Bytes
    1215/    F3B1 : 5E                  SAV10:	LD	E,(HL)
    1216/    F3B2 : 23                  	INC	HL
    1217/    F3B3 : 56                  	LD	D,(HL)
    1218/    F3B4 : DD 19               	ADD	IX,DE			;Pruefsumme bilden
    1219/    F3B6 : 23                  	INC	HL
    1220/    F3B7 : C5                  	PUSH	BC
    1221/    F3B8 : CD D0 F3            	CALL	SAV14			;Ausgabe DE
    1222/    F3BB : C1                  	POP	BC
    1223/    F3BC : 0D                  	DEC	C
    1224/    F3BD : 28 06               	JR	Z, SAV12		;Block fertig geschrieben
    1225/    F3BF : 06 0E               	LD	B,0EH
    1226/    F3C1 : 10 FE               SAV11:	DJNZ	SAV11
    1227/    F3C3 : 18 EC               	JR	SAV10
    1228/    F3C5 :                     ;
    1229/    F3C5 : DD E5               SAV12:	PUSH	IX
    1230/    F3C7 : D1                  	POP	DE			;Pruefsumme
    1231/    F3C8 : 06 10               	LD	B,10H
    1232/    F3CA : 10 FE               SAV13:	DJNZ	SAV13
    1233/    F3CC : CD D0 F3            	CALL	SAV14			;ausgeben
    1234/    F3CF : C9                  	RET
    1235/    F3D0 :                     ;
    1236/    F3D0 : 0E 10               SAV14:	LD	C,10H			;Ausgabe DE
    1237/    F3D2 : CB 3A               SAV15:	SRL	D
    1238/    F3D4 : CB 1B               	RR	E
    1239/    F3D6 : 30 07               	JR	NC, SAV17		;C=1 Bit=1
    1240/    F3D8 : 06 03               	LD	B,3
    1241/    F3DA : 10 FE               SAV16:	DJNZ	SAV16
    1242/    F3DC : 00                  	NOP
    1243/    F3DD : 18 03               	JR	SAV18
    1244/    F3DF : CD F1 F3            SAV17:	CALL	SAV21			;Flanke ausgeben
    1245/    F3E2 : 06 19               SAV18:	LD	B,19H
    1246/    F3E4 : 10 FE               SAV19:	DJNZ	SAV19
    1247/    F3E6 : CD F1 F3            	CALL	SAV21			;Flanke ausgeben
    1248/    F3E9 : 0D                  	DEC	C
    1249/    F3EA : C8                  	RET	Z			;wenn fertig
    1250/    F3EB : 06 15               	LD	B,15H
    1251/    F3ED : 10 FE               SAV20:	DJNZ	SAV20
    1252/    F3EF : 18 E1               	JR	SAV15
    1253/    F3F1 :                     ;
    1254/    F3F1 : DB 02               SAV21:	IN	A, 2			;Flanke ausgeben
    1255/    F3F3 : EE 80               	XOR	80H			;durch Bit-Negierung
    1256/    F3F5 : D3 02               	OUT	2, A
    1257/    F3F7 : C9                  	RET
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 22 - 18.7.2004 19:30:37


    1258/    F3F8 :                     ;
    1259/    F3F8 :                     ;Laden von Kassette
    1260/    F3F8 :                     ;
    1261/    F3F8 : 2A 1B 00            CLOAD:	LD	HL,(ARG1)
    1262/    F3FB : CD 17 F4            LOA1:	CALL	LOA3			;laden 20H Bytes
    1263/    F3FE : 28 0C               	JR	Z, LOA2			;wenn kein Ladefehler
    1264/    F400 : CD A5 F2            	CALL	PRST7
    1265/    F403 : 43 53               	DB	"CS"
    1266/    F405 : BC                  	DB	0BCH			;"<"
    1267/    F406 : CD 1A F3            	CALL	OUTHL			;Adresse ausgeben
    1268/    F409 : CD CF F5            	CALL	OUTSP
    1269/    F40C : EB                  LOA2:	EX	DE,HL
    1270/    F40D : 2A 1D 00            	LD	HL,(ARG2)
    1271/    F410 : A7                  	AND	A, A
    1272/    F411 : ED 52               	SBC	HL,DE			;Endadresse erreicht?
    1273/    F413 : EB                  	EX	DE,HL
    1274/    F414 : D8                  	RET	C			;ja --> fertig
    1275/    F415 : 18 E4               	JR	LOA1			;sonst weiterlesen
    1276/    F417 :                     ;20H Bytes laden nach (HL)
    1277/    F417 : CD BC F4            LOA3:	CALL	LOA24			;synchronisieren
    1278/    F41A : CD C6 F4            	CALL	LOA25			;Flanke abwarten
    1279/    F41D : 0E 07               	LD	C,7
    1280/    F41F : 11 10 09            LOA5:	LD	DE,0910H
    1281/    F422 : 3E 07               	LD	A,7
    1282/    F424 : 3D                  LOA6:	DEC	A
    1283/    F425 : 20 FD               	JR	NZ, LOA6
    1284/    F427 : CD BC F4            	CALL	LOA24			;synchronisieren
    1285/    F42A : CD BC F4            LOA7:	CALL	LOA24			;Flanke ?
    1286/    F42D : 20 E8               	JR	NZ, LOA3		;wenn nicht Vorton
    1287/    F42F : 15                  	DEC	D
    1288/    F430 : 20 F8               	JR	NZ, LOA7
    1289/    F432 : 0D                  	DEC	C
    1290/    F433 : 28 0C               	JR	Z, LOA9
    1291/    F435 : DB 02               LOA8:	IN	A, 2
    1292/    F437 : A8                  	XOR	B
    1293/    F438 : CB 77               	BIT	6,A
    1294/    F43A : 20 E3               	JR	NZ, LOA5
    1295/    F43C : 1D                  	DEC	E
    1296/    F43D : 20 F6               	JR	NZ, LOA8
    1297/    F43F : 18 D6               	JR	LOA3
    1298/    F441 :                     ;Synchronisierimpulse lesen
    1299/    F441 : CD C6 F4            LOA9:	CALL	LOA25			;Flanke abwarten
    1300/    F444 : 3E 44               	LD	A,44H
    1301/    F446 : 3D                  LOA10:	DEC	A
    1302/    F447 : 20 FD               	JR	NZ, LOA10
    1303/    F449 : CD BC F4            	CALL	LOA24			;Flanke ?
    1304/    F44C : 20 F3               	JR	NZ, LOA9		;wenn nicht
    1305/    F44E : CD C6 F4            	CALL	LOA25			;Flanke abwarten
    1306/    F451 : 3E 1E               	LD	A,1EH
    1307/    F453 : 3D                  LOA11:	DEC	A
    1308/    F454 : 20 FD               	JR	NZ, LOA11
    1309/    F456 :                     ;2 Bytes Kopf lesen
    1310/    F456 : CD 9D F4            	CALL	LOA19			;lesen DE
    1311/    F459 :                     ;20H Byte Daten lesen
    1312/    F459 : 0E 10               	LD	C,10H			;10H x 2 Bytes
    1313/    F45B : D5                  	PUSH	DE
    1314/    F45C : DD E1               	POP	IX			;IX-Pruefsummenzaehler=
    1315/    F45E : 3E 1A               	LD	A,1AH
    1316/    F460 : 3D                  LOA12:	DEC	A
    1317/    F461 : 20 FD               	JR	NZ, LOA12
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 23 - 18.7.2004 19:30:37


    1318/    F463 : CD 9D F4            LOA13:	CALL	LOA19			;laden DE
    1319/    F466 : DD 19               	ADD	IX,DE			;Pruefsumme bilden
    1320/    F468 : C5                  	PUSH	BC
    1321/    F469 : 4D                  	LD	C,L
    1322/    F46A : 44                  	LD	B,H
    1323/    F46B : 2A 1D 00            	LD	HL,(ARG2)
    1324/    F46E : AF                  	XOR	A
    1325/    F46F : ED 42               	SBC	HL,BC			;Endadresse erreicht?
    1326/    F471 : 69                  	LD	L,C
    1327/    F472 : 60                  	LD	H,B
    1328/    F473 : C1                  	POP	BC
    1329/    F474 : 38 05               	JR	C, LOA14		;ja --> Leseende
    1330/    F476 : 73                  	LD	(HL),E
    1331/    F477 : 23                  	INC	HL
    1332/    F478 : 72                  	LD	(HL),D
    1333/    F479 : 18 06               	JR	LOA16
    1334/    F47B : 3E 01               LOA14:	LD	A,1
    1335/    F47D : 3D                  LOA15:	DEC	A
    1336/    F47E : 20 FD               	JR	NZ, LOA15
    1337/    F480 : 23                  	INC	HL
    1338/    F481 : 23                  LOA16:	INC	HL
    1339/    F482 : 0D                  	DEC	C
    1340/    F483 : 28 07               	JR	Z, LOA18		;wenn Blockende
    1341/    F485 : 3E 12               	LD	A,12H
    1342/    F487 : 3D                  LOA17:	DEC	A
    1343/    F488 : 20 FD               	JR	NZ, LOA17
    1344/    F48A : 18 D7               	JR	LOA13			;naechte 2 Byte
    1345/    F48C : 3E 12               LOA18:	LD	A,12H
    1346/    F48E : 3D                  LOA27:	DEC	A
    1347/    F48F : 20 FD               	JR	NZ, LOA27
    1348/    F491 : CD 9D F4            	CALL	LOA19			;Pruefsumme lesen
    1349/    F494 : EB                  	EX	DE,HL
    1350/    F495 : DD E5               	PUSH	IX
    1351/    F497 : C1                  	POP	BC
    1352/    F498 : AF                  	XOR	A
    1353/    F499 : ED 42               	SBC	HL,BC
    1354/    F49B : EB                  	EX	DE,HL			;Z=0 Ladefehler
    1355/    F49C : C9                  	RET
    1356/    F49D :                     ;Laden 2 Byte nach DE
    1357/    F49D : E5                  LOA19:	PUSH	HL
    1358/    F49E : 2E 10               	LD	L,10H			;2 Trenn- und 8 Datenbits
    1359/    F4A0 : CD BC F4            LOA20:	CALL	LOA24			;Flanke ?
    1360/    F4A3 : 20 03               	JR	NZ, LOA21
    1361/    F4A5 : AF                  	XOR	A			;Cy=0
    1362/    F4A6 : 18 01               	JR	LOA22
    1363/    F4A8 : 37                  LOA21:	SCF
    1364/    F4A9 : CB 1A               LOA22:	RR	D
    1365/    F4AB : CB 1B               	RR	E
    1366/    F4AD : CD C6 F4            	CALL	LOA25			;Flanke abwarten
    1367/    F4B0 : 2D                  	DEC	L
    1368/    F4B1 : 28 07               	JR	Z, LOA23		;wenn fertig
    1369/    F4B3 : 3E 1E               	LD	A,1EH
    1370/    F4B5 : 3D                  LOA26:	DEC	A
    1371/    F4B6 : 20 FD               	JR	NZ, LOA26
    1372/    F4B8 : 18 E6               	JR	LOA20
    1373/    F4BA : E1                  LOA23:	POP	HL
    1374/    F4BB : C9                  	RET
    1375/    F4BC :                     ;Portabfrage
    1376/    F4BC : DB 02               LOA24:	IN	A, 2
    1377/    F4BE : A8                  	XOR	B
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 24 - 18.7.2004 19:30:37


    1378/    F4BF : CB 77               	BIT	6,A
    1379/    F4C1 : F5                  	PUSH	AF
    1380/    F4C2 : A8                  	XOR	B
    1381/    F4C3 : 47                  	LD	B,A
    1382/    F4C4 : F1                  	POP	AF			;Z=0 --> Flanke
    1383/    F4C5 : C9                  	RET
    1384/    F4C6 :                     ;Warten auf Flankenwechsel
    1385/    F4C6 : DB 02               LOA25:	IN	A, 2
    1386/    F4C8 : A8                  	XOR	B
    1387/    F4C9 : CB 77               	BIT	6,A
    1388/    F4CB : 28 F9               	JR	Z, LOA25
    1389/    F4CD : C9                  	RET
    1390/    F4CE :                     ;
    1391/    F4CE :                     ;Speicherinhalt mit Checksumme anzeigen
    1392/    F4CE :                     ;
    1393/    F4CE : 2A 1B 00            D_KDO:	LD	HL,(ARG1)
    1394/    F4D1 : ED 5B 1D 00         DKO1:	LD	DE,(ARG2)
    1395/    F4D5 : 37                  	SCF
    1396/    F4D6 : E5                  	PUSH	HL
    1397/    F4D7 : ED 52               	SBC	HL,DE
    1398/    F4D9 : E1                  	POP	HL
    1399/    F4DA : D0                  	RET	NC	;wenn EADR<AADR
    1400/    F4DB : E7 07               	DW	ROTHL
    1401/    F4DD : 01 00 08            	LD	BC,0800H		;B=8
    1402/    F4E0 : 1E 00               	LD	E,0			;EC=0 - Checksumme
    1403/    F4E2 : E7 02               DKO2:	DW	RPRST
    1404/    F4E4 : A0                  	DB	0A0H			;" "
    1405/    F4E5 : 7E                  	LD	A,(HL)
    1406/    F4E6 : E7 06               	DW	ROTHX
    1407/    F4E8 : 81                  	ADD	A, C			;Checksumme bilden
    1408/    F4E9 : 4F                  	LD	C,A
    1409/    F4EA : 30 04               	JR	NC, DKO3
    1410/    F4EC : 3E 00               	LD	A,0
    1411/    F4EE : 8B                  	ADC	A, E
    1412/    F4EF : 5F                  	LD	E,A
    1413/    F4F0 : 23                  DKO3:	INC	HL
    1414/    F4F1 : 10 EF               	DJNZ	DKO2
    1415/    F4F3 : E7 02               	DW	RPRST
    1416/    F4F5 : A0                  	DB	0A0H			;" "
    1417/    F4F6 : 7B                  	LD	A,E
    1418/    F4F7 : CD 0A F3            	CALL	OUX1			;Checksumme ausgeben
    1419/    F4FA : 79                  	LD	A,C
    1420/    F4FB : E7 06               	DW	ROTHX
    1421/    F4FD : 18 D2               	JR	DKO1
    1422/    F4FF :                     ;
    1423/    F4FF :                     ;Argumente uebergeben
    1424/    F4FF :                     ;
    1425/    F4FF : 2A 1B 00            PARA:	LD	HL,(ARG1)
    1426/    F502 : ED 5B 1D 00         	LD	DE,(ARG2)
    1427/    F506 : ED 4B 23 00         	LD	BC,(ARG3)
    1428/    F50A : C9                  	RET
    1429/    F50B :                     ;
    1430/    F50B :                     ;Speicherbereich mit Byte beschreiben
    1431/    F50B :                     ;
    1432/    F50B : CD FF F4            K_KDO:	CALL	PARA
    1433/    F50E : 71                  	LD	(HL),C			;C=Fuellbyte
    1434/    F50F : E5                  	PUSH	HL
    1435/    F510 : AF                  	XOR	A
    1436/    F511 : EB                  	EX	DE,HL
    1437/    F512 : ED 52               	SBC	HL,DE
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 25 - 18.7.2004 19:30:37


    1438/    F514 : 44                  	LD	B,H
    1439/    F515 : 4D                  	LD	C,L			;BC=Laenge
    1440/    F516 : E1                  	POP	HL
    1441/    F517 : 54                  	LD	D,H
    1442/    F518 : 5D                  	LD	E,L
    1443/    F519 : 13                  	INC	DE
    1444/    F51A : ED B0               	LDIR
    1445/    F51C : C9                  	RET
    1446/    F51D :                     ;
    1447/    F51D :                     ;Speicherbereich verschieben
    1448/    F51D :                     ;
    1449/    F51D : CD FF F4            T_KDO:	CALL	PARA
    1450/    F520 : AF                  	XOR	A
    1451/    F521 : E5                  	PUSH	HL
    1452/    F522 : ED 52               	SBC	HL,DE
    1453/    F524 : E1                  	POP	HL
    1454/    F525 : 38 03               	JR	C, TKO1			;wenn Zieladr. groesser
    1455/    F527 : ED B0               	LDIR				;Vorwaertstransfer
    1456/    F529 : C9                  	RET
    1457/    F52A : 09                  TKO1:	ADD	HL,BC
    1458/    F52B : EB                  	EX	DE,HL
    1459/    F52C : 09                  	ADD	HL,BC
    1460/    F52D : EB                  	EX	DE,HL
    1461/    F52E : 2B                  	DEC	HL
    1462/    F52F : 1B                  	DEC	DE
    1463/    F530 : ED B8               	LDDR				;Rueckwaertstransfer
    1464/    F532 : C9                  	RET
    1465/    F533 :                     ;
    1466/    F533 :                     ;Register im Registerrettebereich ablegen
    1467/    F533 :                     ;
    1468/    F533 : ED 73 13 00         REGA:	LD	(DATA),SP
    1469/    F537 : 31 61 00            	LD	SP,REGPC
    1470/    F53A : DD E5               	PUSH	IX
    1471/    F53C : FD E5               	PUSH	IY
    1472/    F53E : F5                  	PUSH	AF
    1473/    F53F : C5                  	PUSH	BC
    1474/    F540 : D5                  	PUSH	DE
    1475/    F541 : E5                  	PUSH	HL
    1476/    F542 : D9                  	EXX
    1477/    F543 : 08                  	EX	AF, AF'
    1478/    F544 : F5                  	PUSH	AF
    1479/    F545 : C5                  	PUSH	BC
    1480/    F546 : D5                  	PUSH	DE
    1481/    F547 : E5                  	PUSH	HL
    1482/    F548 : 18 15               	JR	REG1
    1483/    F54A :                     ;Register aus Registerrettebereich holen
    1484/    F54A : ED 73 13 00         REGH:	LD	(DATA),SP
    1485/    F54E : 31 4D 00            	LD	SP,REGBR
    1486/    F551 : E1                  	POP	HL
    1487/    F552 : D1                  	POP	DE
    1488/    F553 : C1                  	POP	BC
    1489/    F554 : F1                  	POP	AF
    1490/    F555 : D9                  	EXX
    1491/    F556 : 08                  	EX	AF, AF'
    1492/    F557 : E1                  	POP	HL
    1493/    F558 : D1                  	POP	DE
    1494/    F559 : C1                  	POP	BC
    1495/    F55A : F1                  	POP	AF
    1496/    F55B : FD E1               	POP	IY
    1497/    F55D : DD E1               	POP	IX
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 26 - 18.7.2004 19:30:37


    1498/    F55F : ED 7B 13 00         REG1:	LD	SP,(DATA)
    1499/    F563 : C9                  	RET
    1500/    F564 :                     ;
    1501/    F564 :                     ;Einsprung bei Breakpoint
    1502/    F564 :                     ;
    1503/    F564 : CD 33 F5            BREAK:	CALL	REGA			;Register ablegen
    1504/    F567 : E1                  	POP	HL			;HL=Breakadr.+3
    1505/    F568 : ED 73 63 00         	LD	(REGSP),SP		;SP sichern
    1506/    F56C : 31 B0 00            	LD	SP,SYSSK		;Systemstack nutzen
    1507/    F56F : 2B                  	DEC	HL
    1508/    F570 : 2B                  	DEC	HL
    1509/    F571 : 2B                  	DEC	HL
    1510/    F572 : 22 61 00            	LD	(REGPC),HL		;Breakadresse
    1511/    F575 : ED 5B 0B 00         	LD	DE,(BPADR)		;die originalen 3 Byte
    1512/    F579 : 21 0D 00            	LD	HL,BPOPC		;Operanden zurueckbringen
    1513/    F57C : 01 03 00            	LD	BC,3
    1514/    F57F : ED B0               	LDIR
    1515/    F581 : CD E4 F5            	CALL	REGDA
    1516/    F584 : C3 5F F0            	JP	KDO2
    1517/    F587 :                     ;
    1518/    F587 :                     ;Breakpoint-Adresse setzen
    1519/    F587 :                     ;
    1520/    F587 : 2A 1B 00            B_KDO:	LD	HL,(ARG1)
    1521/    F58A : 22 0B 00            	LD	(BPADR),HL
    1522/    F58D : 11 0D 00            	LD	DE,BPOPC		;3 Byte Operanden
    1523/    F590 : 01 03 00            	LD	BC,3			;retten
    1524/    F593 : ED B0               	LDIR
    1525/    F595 : CD E4 F5            	CALL	REGDA			;Register anzeigen
    1526/    F598 : C9                  	RET
    1527/    F599 :                     ;
    1528/    F599 :                     ;Programm starten mit Breakpoint
    1529/    F599 :                     ;
    1530/    F599 : 2A 0B 00            E_KDO:	LD	HL,(BPADR)
    1531/    F59C : 36 CD               	LD	(HL),0CDH		;CALL ...
    1532/    F59E : 23                  	INC	HL
    1533/    F59F : 11 64 F5            	LD	DE,BREAK		;an Breakpoint Unter-
    1534/    F5A2 : 73                  	LD	(HL),E			;Brechung zu BREAK eintragen
    1535/    F5A3 : 23                  	INC	HL
    1536/    F5A4 : 72                  	LD	(HL),D
    1537/    F5A5 :                     ;
    1538/    F5A5 :                     ;Programm starten
    1539/    F5A5 :                     ;
    1540/    F5A5 : 2A 1B 00            J_KDO:	LD	HL,(ARG1)		;Startadresse
    1541/    F5A8 : 22 61 00            	LD	(REGPC),HL		;zwischenspeichern
    1542/    F5AB : ED 7B 63 00         	LD	SP,(REGSP)		;Stack generieren
    1543/    F5AF : E5                  	PUSH	HL			;Startadresse in Stack
    1544/    F5B0 : C3 4A F5            	JP	REGH			;Register holen
    1545/    F5B3 :                     					;und Pgm. durch RET starten
    1546/    F5B3 :                     ;
    1547/    F5B3 :                     ;Programm nach Break fortsetzen
    1548/    F5B3 :                     ;
    1549/    F5B3 : 2A 61 00            G_KDO:	LD	HL,(REGPC)
    1550/    F5B6 : 22 1B 00            	LD	(ARG1),HL
    1551/    F5B9 : ED 5B 0B 00         	LD	DE,(BPADR)
    1552/    F5BD : AF                  	XOR	A			;Cy=0
    1553/    F5BE : ED 52               	SBC	HL,DE
    1554/    F5C0 : 20 D7               	JR	NZ, E_KDO		;wenn nicht Breakpoint
    1555/    F5C2 : 18 E1               	JR	J_KDO			;starten
    1556/    F5C4 :                     ;
    1557/    F5C4 :                     ;Ausgabe eines Doppelpunktes
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 27 - 18.7.2004 19:30:37


    1558/    F5C4 :                     ;
    1559/    F5C4 : E7 02               OUTDP:	DW	RPRST
    1560/    F5C6 : BA                  	DB	0BAH			;":"
    1561/    F5C7 :                     ;
    1562/    F5C7 :                     ;Ausgabe hex 2 Byte Speicher (HL) und (HL-1)
    1563/    F5C7 :                     ;und ein Leerzeichen
    1564/    F5C7 :                     ;
    1565/    F5C7 : 7E                  OTHLS:	LD	A,(HL)			;hoeherwertiges Byte
    1566/    F5C8 : E7 06               	DW	ROTHX			;ausgeben
    1567/    F5CA : 2B                  	DEC	HL
    1568/    F5CB : 7E                  	LD	A,(HL)			;niederwertiges Byte
    1569/    F5CC : E7 06               	DW	ROTHX			;ausgeben
    1570/    F5CE : 2B                  	DEC	HL			;naechsten Aufruf vorbereiten
    1571/    F5CF :                     ;
    1572/    F5CF :                     ;Ausgabe ein Leerzeichen
    1573/    F5CF :                     ;
    1574/    F5CF : E7 02               OUTSP:	DW	RPRST
    1575/    F5D1 : A0                  	DB	0A0H			;":"
    1576/    F5D2 : C9                  	RET
    1577/    F5D3 :                     ;
    1578/    F5D3 :                     ;Z-Flag-Anzeige
    1579/    F5D3 :                     ;
    1580/    F5D3 : E7 02               AUS1:	DW	RPRST			;Ausg. "1 "
    1581/    F5D5 : 31                  	DB	"1"
    1582/    F5D6 : A0                  	DB	0A0H
    1583/    F5D7 : C9                  	RET
    1584/    F5D8 : 20 F9               AUSX:	JR	NZ, AUS1
    1585/    F5DA : E7 02               	DW	RPRST			;Ausg. "0 "
    1586/    F5DC : 30                  	DB	"0"
    1587/    F5DD : A0                  	DB	0A0H
    1588/    F5DE : C9                  	RET
    1589/    F5DF :                     ;
    1590/    F5DF :                     ;Registermodifizerung und -anzeige
    1591/    F5DF :                     ;
    1592/    F5DF : FE 3A               R_KDO:	CP	A, ':'
    1593/    F5E1 : C2 5A F6            	JP	NZ, RKO3		;wenn Modifizierung
    1594/    F5E4 :                     ;
    1595/    F5E4 : E7 02               REGDA:	DW	RPRST			;Anzeige Breakpointadresse
    1596/    F5E6 : 0D                  	DB	CR
    1597/    F5E7 : 42                  	DB	"B"
    1598/    F5E8 : D0                  	DB	0D0H			;"BP "
    1599/    F5E9 : 21 0C 00            	LD	HL,BPADR+1
    1600/    F5EC : E7 0D               	DW	ROTDP
    1601/    F5EE : E7 02               	DW	RPRST			;Ausgabe Operandenfolge
    1602/    F5F0 : 42 53               	DB	"BS"			;am Breakpoint
    1603/    F5F2 : BA                  	DB	0BAH			;"BS:"
    1604/    F5F3 : 06 03               	LD	B,3			;3 Byte
    1605/    F5F5 : 21 0D 00            	LD	HL,BPOPC
    1606/    F5F8 : 7E                  RKO1:	LD	A,(HL)
    1607/    F5F9 : E7 06               	DW	ROTHX
    1608/    F5FB : 23                  	INC	HL
    1609/    F5FC : 10 FA               	DJNZ	RKO1
    1610/    F5FE :                     ;
    1611/    F5FE : E7 02               	DW	RPRST			;Flaganzeige
    1612/    F600 : 20 20 20 53 20 5A   	DB	"   S Z C"
                    20 43 
    1613/    F608 : A0                  	DB	0A0H
    1614/    F609 : 3A 5B 00            	LD	A,(REGAF)		;A-Flagregister
    1615/    F60C : 6F                  	LD	L,A
    1616/    F60D : CB 7D               	BIT	7,L			;S-Flag
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 28 - 18.7.2004 19:30:37


    1617/    F60F : CD D8 F5            	CALL	AUSX
    1618/    F612 : CB 75               	BIT	6,L			;Z-Flag
    1619/    F614 : CD D8 F5            	CALL	AUSX
    1620/    F617 : CB 45               	BIT	0,L			;Cy-Flag
    1621/    F619 : CD D8 F5            	CALL	AUSX
    1622/    F61C :                     ;
    1623/    F61C : 21 64 00            	LD	HL,REGSP+1		;Sonderregister-anzeige
    1624/    F61F : 06 02               	LD	B,2			;2 Registersaetze
    1625/    F621 : E7 02               	DW	RPRST
    1626/    F623 : 53                  RKO2:	DB	"S"
    1627/    F624 : D0                  	DB	0D0H			;"SP"
    1628/    F625 : E7 0D               	DW	ROTDP
    1629/    F627 : E7 02               	DW	RPRST
    1630/    F629 : 50                  	DB	"P"
    1631/    F62A : C3                  	DB	0C3H			;"PC"
    1632/    F62B : E7 0D               	DW	ROTDP
    1633/    F62D : E7 02               	DW	RPRST
    1634/    F62F : 49                  	DB	"I"
    1635/    F630 : D8                  	DB	0D8H			;"IX"
    1636/    F631 : E7 0D               	DW	ROTDP
    1637/    F633 : E7 02               	DW	RPRST
    1638/    F635 : 49                  	DB	"I"
    1639/    F636 : D9                  	DB	0D9H			;"IY"
    1640/    F637 : E7 0D               	DW	ROTDP
    1641/    F639 :                     ;
    1642/    F639 : E7 02               RKO4:	DW	RPRST			;Registersatz anzeigen
    1643/    F63B : 41                  	DB	"A"
    1644/    F63C : C6                  	DB	0C6H			;"AF"
    1645/    F63D : E7 0D               	DW	ROTDP
    1646/    F63F : E7 02               	DW	RPRST
    1647/    F641 : 42                  	DB	"B"
    1648/    F642 : C3                  	DB	0C3H			;"BC"
    1649/    F643 : E7 0D               	DW	ROTDP
    1650/    F645 : E7 02               	DW	RPRST
    1651/    F647 : 44                  	DB	"D"
    1652/    F648 : C5                  	DB	0C5H			;"DE"
    1653/    F649 : E7 0D               	DW	ROTDP
    1654/    F64B : E7 02               	DW	RPRST
    1655/    F64D : 48                  	DB	"H"
    1656/    F64E : CC                  	DB	0CCH			;"HL"
    1657/    F64F : E7 0D               	DW	ROTDP
    1658/    F651 : 10 E6               	DJNZ	RKO4
    1659/    F653 :                     ;
    1660/    F653 : 2A 2B 00            	LD	HL,(CUPOS)		;2. Satz als Schatten-
    1661/    F656 : 2B                  	DEC	HL			;register markieren:
    1662/    F657 : 36 27               	LD	(HL),27H		;"'"
    1663/    F659 : C9                  	RET
    1664/    F65A :                     ;
    1665/    F65A : 01 00 04            RKO3:	LD	BC,0400H		;B=4, C-Registernummer
    1666/    F65D : 2A 16 00            	LD	HL,(SOIL)
    1667/    F660 : 23                  	INC	HL
    1668/    F661 : 23                  	INC	HL
    1669/    F662 : 11 23 F6            	LD	DE,RKO2
    1670/    F665 : 1A                  RKO5:	LD	A,(DE)			;Vergleich Registereingabe
    1671/    F666 : BE                  	CP	A, (HL)			;mit allen Registern
    1672/    F667 : 28 17               	JR	Z, RKO8			;wenn gefunden
    1673/    F669 : 13                  	INC	DE
    1674/    F66A : E5                  RKO6:	PUSH	HL
    1675/    F66B : 21 05 00            	LD	HL,5
    1676/    F66E : 19                  	ADD	HL,DE
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 29 - 18.7.2004 19:30:37


    1677/    F66F : EB                  	EX	DE,HL			;naechster Reg.name
    1678/    F670 : E1                  	POP	HL
    1679/    F671 : 0C                  	INC	C			;C-Registernummer
    1680/    F672 : 10 F1               	DJNZ	RKO5
    1681/    F674 : 06 04               	LD	B,4
    1682/    F676 : 79                  	LD	A,C
    1683/    F677 : FE 08               	CP	A, 8
    1684/    F679 : 20 EA               	JR	NZ, RKO5		;weitersuchen
    1685/    F67B : F1                  	POP	AF			;sonst falsche Eingabe
    1686/    F67C : FF                  	RST	38H			;--> zum KDO-Monitor
    1687/    F67D :                     ;
    1688/    F67D : 2B                  RKO7:	DEC	HL			;weitersuchen
    1689/    F67E : 18 EA               	JR	RKO6
    1690/    F680 :                     ;
    1691/    F680 : 13                  RKO8:	INC	DE			;Ueberpruefen zweiter
    1692/    F681 : 23                  	INC	HL			;Buchstabe
    1693/    F682 : 1A                  	LD	A,(DE)
    1694/    F683 : E6 7F               	AND	A, 7FH
    1695/    F685 : BE                  	CP	A, (HL)
    1696/    F686 : 20 F5               	JR	NZ, RKO7		;wenn ungleich
    1697/    F688 : 23                  	INC	HL
    1698/    F689 : 7E                  	LD	A,(HL)			;Schattenregister ?
    1699/    F68A : FE 27               	CP	A, 27H			;"'"
    1700/    F68C : 79                  	LD	A,C
    1701/    F68D : 20 02               	JR	NZ, RKO9		;wenn nicht
    1702/    F68F : C6 04               	ADD	A, 4
    1703/    F691 : CB 27               RKO9:	SLA	A
    1704/    F693 : 4F                  	LD	C,A
    1705/    F694 : 06 00               	LD	B,0
    1706/    F696 : 21 64 00            	LD	HL,REGSP+1
    1707/    F699 : ED 42               	SBC	HL,BC
    1708/    F69B : 44                  	LD	B,H			;HL=Adresse im
    1709/    F69C : 4D                  	LD	C,L			;Registerrettebereich
    1710/    F69D : E7 0C               	DW	ROTHS			;Ausgabe Wert
    1711/    F69F : CD B3 F2            	CALL	INLIN			;Eingabe neuer Wert
    1712/    F6A2 : ED 5B 16 00         	LD	DE,(SOIL)
    1713/    F6A6 : CD F4 F2            	CALL	INHEX			;HL=neuer Wert
    1714/    F6A9 : 20 04               	JR	NZ, RKO10		;wenn alles ok
    1715/    F6AB : 1A                  	LD	A,(DE)			;keine Zahl, vielleicht
    1716/    F6AC : FE 3B               	CP	A, ';'			;Abbruch ?
    1717/    F6AE : C8                  	RET	Z
    1718/    F6AF :                     ;
    1719/    F6AF : EB                  RKO10:	EX	DE,HL
    1720/    F6B0 : C5                  	PUSH	BC
    1721/    F6B1 : E1                  	POP	HL			;Adr. im Reg.rettebereich
    1722/    F6B2 : 72                  	LD	(HL),D			;neuen Wert eintragen
    1723/    F6B3 : 2B                  	DEC	HL
    1724/    F6B4 : 73                  	LD	(HL),E
    1725/    F6B5 : C3 E4 F5            	JP	REGDA			;Registeranzeige
    1726/    F6B8 :                     
    1727/    F6B8 : =>FALSE             	IF MONTYP == "Z1013_202"
    1728/    F6B8 :                     ;
    1729/    F6B8 :                     ;Hex-Umschaltung
    1730/    F6B8 :                     ;
    1731/    F6B8 :                     H_KDO:	ld	hl,5048h	;Aenderung der
    1732/    F6B8 :                     	ld	(PTKEY+7),hl	;Tastaturcodetab.
    1733/    F6B8 :                     	ld	hl,3830h
    1734/    F6B8 :                     	ld	(PTKEY+10),hl
    1735/    F6B8 :                     	RET
    1736/    F6B8 :                     ;
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 30 - 18.7.2004 19:30:37


    1737/    F6B8 :                     ;ASCII-Umschaltung
    1738/    F6B8 :                     ;
    1739/    F6B8 :                     A_KDO:	ld	hl,MONTB+2	;Laden der alten
    1740/    F6B8 :                     	ld	de,DRZSP	;Tastaturcodetab.
    1741/    F6B8 :                     	ld	bc,12h
    1742/    F6B8 :                     	ldir
    1743/    F6B8 :                     	RET
    1744/    F6B8 :                     
    1745/    F6B8 : =>TRUE              	ELSEIF BROSIGERW = 1
    1746/    F6B8 :                     ;
    1747/    F6B8 :                     ;Hex-Umschaltung (nicht implementiert)
    1748/    F6B8 :                     ;
    1749/    F6B8 : C9                  H_KDO:	RET
    1750/    F6B9 : 00                  	NOP
    1751/    F6BA : 00                  	NOP
    1752/    F6BB : 00                  	NOP
    1753/    F6BC : 00                  	NOP
    1754/    F6BD : 00                  	NOP
    1755/    F6BE : 00                  	NOP
    1756/    F6BF : 00                  	NOP
    1757/    F6C0 : 00                  	NOP
    1758/    F6C1 : 00                  	NOP
    1759/    F6C2 : 00                  	NOP
    1760/    F6C3 : 00                  	NOP
    1761/    F6C4 : C9                  	RET
    1762/    F6C5 :                     ;
    1763/    F6C5 :                     ;ASCII-Umschaltung (nicht implementiert)
    1764/    F6C5 :                     ;
    1765/    F6C5 : C9                  A_KDO:	RET
    1766/    F6C6 : 00                  	NOP
    1767/    F6C7 : 00                  	NOP
    1768/    F6C8 : 00                  	NOP
    1769/    F6C9 : 00                  	NOP
    1770/    F6CA : 00                  	NOP
    1771/    F6CB : 00                  	NOP
    1772/    F6CC : 00                  	NOP
    1773/    F6CD : 00                  	NOP
    1774/    F6CE : 00                  	NOP
    1775/    F6CF : 00                  	NOP
    1776/    F6D0 : C9                  	RET
    1777/    F6D1 :                     
    1778/    F6D1 :                     	ENDIF
    1779/    F6D1 :                     
    1780/    F6D1 :                     
    1781/    F6D1 :                     ;
    1782/    F6D1 :                     ;Window definieren
    1783/    F6D1 :                     ;
    1784/    F6D1 : CD ED F6            W_KDO:	CALL	WKO1			;Kontrolle Parameter
    1785/    F6D4 : 38 4C               	JR	C, WKO3			;wenn Fehleingabe
    1786/    F6D6 : 22 47 00            	LD	(WINDL),HL		;neue Werte eintragen
    1787/    F6D9 : ED 43 49 00         	LD	(WINDA),BC
    1788/    F6DD : 2A 1D 00            	LD	HL,(ARG2)
    1789/    F6E0 : 22 4B 00            	LD	(WINDE),HL
    1790/    F6E3 : 2A 2B 00            	LD	HL,(CUPOS)		;Cursor loeschen
    1791/    F6E6 : 36 20               	LD	(HL),' '
    1792/    F6E8 : ED 43 2B 00         	LD	(CUPOS),BC		;Cursor home
    1793/    F6EC : C9                  	RET
    1794/    F6ED :                     ;
    1795/    F6ED : 3A 1C 00            WKO1:	LD	A,(ARG1+1)
    1796/    F6F0 : FE EC               	CP	A, 0ECH			;innerhalb BWS ?
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 31 - 18.7.2004 19:30:37


    1797/    F6F2 : D8                  	RET	C	;nein
    1798/    F6F3 : 3A 1B 00            	LD	A,(ARG1)		;WINDOW-Anfang
    1799/    F6F6 : E6 E0               	AND	A, 0E0H			;auf Zeilenanfang stellen
    1800/    F6F8 : 32 1B 00            	LD	(ARG1),A
    1801/    F6FB : 3A 1D 00            	LD	A,(ARG2)		;ebenso WINDOW-Ende
    1802/    F6FE : E6 E0               	AND	A, 0E0H
    1803/    F700 : 32 1D 00            	LD	(ARG2),A
    1804/    F703 : 2A 1D 00            	LD	HL,(ARG2)
    1805/    F706 : ED 4B 1B 00         	LD	BC,(ARG1)
    1806/    F70A : ED 42               	SBC	HL,BC
    1807/    F70C : D8                  	RET	C			;Endadresse zu klein
    1808/    F70D : 28 11               	JR	Z, WKO2			;kein Window --> Fehler
    1809/    F70F : 2B                  	DEC	HL
    1810/    F710 : 3E 03               	LD	A,3			;WINDOW zu gross ?
    1811/    F712 : BC                  	CP	A, H
    1812/    F713 : D8                  	RET	C	;ja
    1813/    F714 : 23                  	INC	HL
    1814/    F715 : 11 40 00            	LD	DE,0040H
    1815/    F718 : ED 52               	SBC	HL,DE
    1816/    F71A : D8                  	RET	C			;wenn WINDOW zu klein
    1817/    F71B : 11 20 00            	LD	DE,0020H
    1818/    F71E : 19                  	ADD	HL,DE
    1819/    F71F : C9                  	RET
    1820/    F720 :                     ;
    1821/    F720 : 37                  WKO2:	SCF
    1822/    F721 : C9                  	RET
    1823/    F722 :                     ;
    1824/    F722 : F1                  WKO3:	POP	AF
    1825/    F723 : FF                  	RST	38H
    1826/    F724 :                     ;
    1827/    F724 :                     ;Initialisierungstabelle fuer PIO bei NEXT
    1828/    F724 :                     ;
    1829/    F724 : FE                  NKTA:	DB	0FEH			;L(NINTA)
    1830/    F725 : 97                  	DB	97H
    1831/    F726 : DF                  	DB	0DFH
    1832/    F727 :                     ;
    1833/    F727 :                     ;NEXT-Kommando, Step-Betrieb
    1834/    F727 :                     ;
    1835/    F727 : 3E F7               N_KDO:	LD	A,0F7H			;H(NINTA)
    1836/    F729 : ED 47               	LD	I,A			;Interruptvektor
    1837/    F72B : F3                  	DI
    1838/    F72C : 21 24 F7            	LD	HL,NKTA 		;Initialisieren PIO Port B
    1839/    F72F : 01 03 03            	LD	BC,0303H		;3 Bytes
    1840/    F732 : ED B3               	OTIR				;loest selbstaendig INT aus
    1841/    F734 : 2A 0B 00            	LD	HL,(BPADR)		;erstes Byte von Breakadr.
    1842/    F737 : 2B                  	DEC	HL			;wird EI
    1843/    F738 : 7E                  	LD	A,(HL)
    1844/    F739 : 32 69 00            	LD	(NBYTE),A		;Byte retten
    1845/    F73C : 36 FB               	LD	(HL),0FBH		;EI einschreiben
    1846/    F73E : ED 73 6A 00         	LD	(SPADR),SP
    1847/    F742 : ED 7B 63 00         	LD	SP,(REGSP)
    1848/    F746 : E5                  	PUSH	HL
    1849/    F747 : C3 4A F5            	JP	REGH			;Register holen und Start
    1850/    F74A :                     ;Eingang bei Interrupt
    1851/    F74A : F3                  NINTR:	DI
    1852/    F74B : CD 33 F5            	CALL	REGA			;Register retten
    1853/    F74E : 3E 07               	LD	A,7			;Interrupt von PIO
    1854/    F750 : D3 03               	OUT	3, A			;verbieten
    1855/    F752 : 2A 0B 00            	LD	HL,(BPADR)		;EI-Befehl durch Original-
    1856/    F755 : 2B                  	DEC	HL			;Byte ersetzen
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 32 - 18.7.2004 19:30:37


    1857/    F756 : 3A 69 00            	LD	A,(NBYTE)
    1858/    F759 : 77                  	LD	(HL),A
    1859/    F75A : E1                  	POP	HL
    1860/    F75B : 22 0B 00            	LD	(BPADR),HL		;neue Breakadresse
    1861/    F75E : 22 61 00            	LD	(REGPC),HL
    1862/    F761 : ED 73 63 00         	LD	(REGSP),SP
    1863/    F765 : ED 7B 6A 00         	LD	SP,(SPADR)		;neue Operandenfolge
    1864/    F769 : 11 0D 00            	LD	DE,BPOPC		;umladen
    1865/    F76C : 01 03 00            	LD	BC,3
    1866/    F76F : ED B0               	LDIR
    1867/    F771 : 21 E4 F5            	LD	HL,REGDA
    1868/    F774 : E5                  	PUSH	HL
    1869/    F775 : ED 4D               	RETI				;Sprung zur Registeranzeige
    1870/    F777 :                     ;
    1871/    F777 :                     ;Speicherbereiche vergleichen
    1872/    F777 :                     ;
    1873/    F777 : CD FF F4            C_KDO:	CALL	PARA			;Parameter holen
    1874/    F77A : 1A                  CKO1:	LD	A,(DE)
    1875/    F77B : BE                  	CP	A, (HL)			;Vergleich
    1876/    F77C : 20 08               	JR	NZ, CKO3		;wenn ungleich
    1877/    F77E : 0B                  CKO2:	DEC	BC
    1878/    F77F : 23                  	INC	HL
    1879/    F780 : 13                  	INC	DE
    1880/    F781 : 78                  	LD	A,B
    1881/    F782 : B1                  	OR	C
    1882/    F783 : C8                  	RET	Z			;wenn alles geprueft
    1883/    F784 : 18 F4               	JR	CKO1			;sonst weitertesten
    1884/    F786 :                     ;
    1885/    F786 : E7 07               CKO3:	DW	ROTHL			;1. Adresse
    1886/    F788 : E7 0E               	DW	ROTSP
    1887/    F78A : 7E                  	LD	A,(HL)
    1888/    F78B : E7 06               	DW	ROTHX			;1. Byte
    1889/    F78D : E7 0E               	DW	ROTSP
    1890/    F78F : EB                  	EX	DE,HL
    1891/    F790 : E7 07               	DW	ROTHL			;2. Adresse
    1892/    F792 : E7 0E               	DW	ROTSP
    1893/    F794 : EB                  	EX	DE,HL
    1894/    F795 : 1A                  	LD	A,(DE)
    1895/    F796 : E7 06               	DW	ROTHX			;2. Byte
    1896/    F798 : E7 02               	DW	RPRST
    1897/    F79A : 8D                  	DB	CR+80H
    1898/    F79B : E7 01               	DW	RINCH			;warten auf Tastendruck
    1899/    F79D : FE 0D               	CP	A, CR
    1900/    F79F : C0                  	RET	NZ			;Abbruch wenn <> >ENTER<
    1901/    F7A0 : 18 DC               	JR	CKO2			;sonst weitertesten
    1902/    F7A2 :                     
    1903/    F7A2 : =>TRUE              	IF	MONTYP <> "Z1013_A2"
    1904/    F7A2 :                     ;
    1905/    F7A2 :                     ;Bytefolge suchen
    1906/    F7A2 :                     ;
    1907/    F7A2 : ED 5B 25 00         F_KDO:	LD	DE,(SOIL2)
    1908/    F7A6 : 1B                  	DEC	DE
    1909/    F7A7 : 1B                  	DEC	DE
    1910/    F7A8 : ED 53 23 00         	LD	(ARG3),DE		;DE = Beginn Bytefolge
    1911/    F7AC : ED 4B 1B 00         	LD	BC,(ARG1)		;Suchadresse
    1912/    F7B0 : ED 5B 23 00         FKO1:	LD	DE,(ARG3)
    1913/    F7B4 : E7 03               	DW	RINHX			;L = 1. Suchbyte
    1914/    F7B6 : 0A                  FKO2:	LD	A,(BC)
    1915/    F7B7 : BD                  	CP	A, L			;L = Suchbyte
    1916/    F7B8 : 28 07               	JR	Z, FKO3			;wenn Bytes gleich
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 33 - 18.7.2004 19:30:37


    1917/    F7BA : 03                  	INC	BC			;sonst naechste Suchadresse
    1918/    F7BB : 78                  	LD	A,B
    1919/    F7BC : B1                  	OR	C
    1920/    F7BD : 28 32               	JR	Z, FKO7			;wenn Speicherende erreicht
    1921/    F7BF : 18 F5               	JR	FKO2			;weitersuchen
    1922/    F7C1 :                     ;
    1923/    F7C1 : C5                  FKO3:	PUSH	BC
    1924/    F7C2 : D5                  	PUSH	DE
    1925/    F7C3 : ED 5B 1D 00         	LD	DE,(ARG2)		;Suchbyteanzahl
    1926/    F7C7 : 1B                  	DEC	DE
    1927/    F7C8 : ED 53 6C 00         	LD	(FBANZ),DE		;Zwischenspeicher fuer Anzahl
    1928/    F7CC : 03                  	INC	BC
    1929/    F7CD : 7A                  FKO4:	LD	A,D
    1930/    F7CE : B3                  	OR	E			;alle Suchbytes verglichen?
    1931/    F7CF : D1                  	POP	DE
    1932/    F7D0 : 28 13               	JR	Z, FKO5			;wenn Bytefolge gefunden
    1933/    F7D2 : E7 03               	DW	RINHX			;naechstes Suchbyte holen
    1934/    F7D4 : 0A                  	LD	A,(BC)
    1935/    F7D5 : BD                  	CP	A, L
    1936/    F7D6 : 20 15               	JR	NZ, FKO6		;wenn Folge nicht gefunden
    1937/    F7D8 : D5                  	PUSH	DE
    1938/    F7D9 : ED 5B 6C 00         	LD	DE,(FBANZ)		;1 Byte weniger zu vergleichen
    1939/    F7DD : 1B                  	DEC	DE
    1940/    F7DE : ED 53 6C 00         	LD	(FBANZ),DE
    1941/    F7E2 : 03                  	INC	BC
    1942/    F7E3 : 18 E8               	JR	FKO4			;weitervergleichen
    1943/    F7E5 :                     ;Bytefolge gefunden
    1944/    F7E5 : C1                  FKO5:	POP	BC
    1945/    F7E6 : ED 43 1B 00         	LD	(ARG1),BC
    1946/    F7EA : C3 25 F3            	JP	MEM			;Speicher modifizieren
    1947/    F7ED :                     ;
    1948/    F7ED : C1                  FKO6:	POP	BC
    1949/    F7EE : 03                  	INC	BC
    1950/    F7EF : 18 BF               	JR	FKO1
    1951/    F7F1 :                     ;Bytefolge nirgends gefunden
    1952/    F7F1 : E7 02               FKO7:	DW	RPRST
    1953/    F7F3 : 4E 4F 54 20 46 4F   	DB	"NOT FOUND"
                    55 4E 44 
    1954/    F7FC : 8D                  	DB	CR+80H
    1955/    F7FD : C9                  	RET
    1956/    F7FE :                     ;
    1957/    F7FE :                     ;Interrupttabelle fuer Break
    1958/    F7FE :                     ;
    1959/    F7FE : 4A F7               NINTA:	DW	NINTR
    1960/    F800 :                     
    1961/    F800 :                     	ENDIF
    1962/    F800 :                     
    1963/    F800 : =>FALSE             	IF MONTYP == "Z1013_A2"
    1964/    F800 :                     keytab:	db  31h ; 1
    1965/    F800 :                     	db  51h ; Q
    1966/    F800 :                     	db  41h ; A
    1967/    F800 :                     	db  59h ; Y
    1968/    F800 :                     	db  32h ; 2
    1969/    F800 :                     	db  57h ; W
    1970/    F800 :                     	db  53h ; S
    1971/    F800 :                     	db  58h ; X
    1972/    F800 :                     	db  33h ; 3
    1973/    F800 :                     	db  45h ; E
    1974/    F800 :                     	db  44h ; D
    1975/    F800 :                     	db  43h ; C
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 34 - 18.7.2004 19:30:37


    1976/    F800 :                     	db  34h ; 4
    1977/    F800 :                     	db  52h ; R
    1978/    F800 :                     	db  46h ; F
    1979/    F800 :                     	db  56h ; V
    1980/    F800 :                     	db  35h ; 5
    1981/    F800 :                     	db  54h ; T
    1982/    F800 :                     	db  47h ; G
    1983/    F800 :                     	db  42h ; B
    1984/    F800 :                     	db  36h ; 6
    1985/    F800 :                     	db  5Ah ; Z
    1986/    F800 :                     	db  48h ; H
    1987/    F800 :                     	db  4Eh ; N
    1988/    F800 :                     	db  37h ; 7
    1989/    F800 :                     	db  55h ; U
    1990/    F800 :                     	db  4Ah ; J
    1991/    F800 :                     	db  4Dh ; M
    1992/    F800 :                     	db  38h ; 8
    1993/    F800 :                     	db  49h ; I
    1994/    F800 :                     	db  4Bh ; K
    1995/    F800 :                     	db  2Ch ; ,
    1996/    F800 :                     	db  39h ; 9
    1997/    F800 :                     	db  4Fh ; O
    1998/    F800 :                     	db  4Ch ; L
    1999/    F800 :                     	db  2Eh ; .
    2000/    F800 :                     	db  30h ; 0
    2001/    F800 :                     	db  50h ; P
    2002/    F800 :                     	db  2Bh ; +
    2003/    F800 :                     	db  2Fh ; /
    2004/    F800 :                     	db  2Dh ; -
    2005/    F800 :                     	db  40h ; @
    2006/    F800 :                     	db  2Ah ; *
    2007/    F800 :                     	db  5Eh ; ^
    2008/    F800 :                     	db  5Bh ; [
    2009/    F800 :                     	db  5Dh ; ]
    2010/    F800 :                     	db  5Ch ; \
    2011/    F800 :                     	db  5Fh ; _
    2012/    F800 :                     tab2:	db    0 ;
    2013/    F800 :                     	db  0Dh ;
    2014/    F800 :                     	db    8 ;
    2015/    F800 :                     	db    9 ;
    2016/    F800 :                     	db  20h ;
    2017/    F800 :                     	db    0 ;
    2018/    F800 :                     	db  0Bh ;
    2019/    F800 :                     	db  0Ah ;
    2020/    F800 :                     	db  6Eh ; n
    2021/    F800 :                     	db 0F7h ; ÷
    2022/    F800 :                     
    2023/    F800 :                     	ENDIF
    2024/    F800 :                     
    2025/    F800 :                     
    2026/    F800 :                     
    2027/    F800 : =>TRUE              	IF BROSIGERW = 1
    2028/    F800 :                     ;*****************************************************************************
    2029/    F800 :                     ;* Erweiterung Brosig-Monitor F800-FFFF                                      *
    2030/    F800 :                     ;*****************************************************************************
    2031/    F800 :                     ;
    2032/    F800 :                     ;neue INKEY-Routine
    2033/    F800 :                     ;
    2034/    F800 : 3E 0F               INKY:	LD	A,0FH			;Statusabfrage
    2035/    F802 : D3 08               	OUT	8, A
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 35 - 18.7.2004 19:30:37


    2036/    F804 : 21 27 00            	LD	HL,KYBTS
    2037/    F807 : CB 4E               	BIT	1,(HL)
    2038/    F809 : C2 66 F9            	JP	NZ, INY24		;wenn noch Stringausgabemodus
    2039/    F80C : 06 00               	LD	B,0
    2040/    F80E : CB 76               	BIT	6,(HL)
    2041/    F810 : 28 06               	JR	Z, INY2			;kein SLOW-Modus
    2042/    F812 :                     ;sonst SLOW-Verzoegerung
    2043/    F812 : DD E3               INY1:	EX	(SP),IX
    2044/    F814 : DD E3               	EX	(SP),IX
    2045/    F816 : 10 FA               	DJNZ	INY1
    2046/    F818 :                     ;
    2047/    F818 : DB 02               INY2:	IN	A, 2
    2048/    F81A : 2F                  	CPL
    2049/    F81B : E6 0F               	AND	A, 0FH
    2050/    F81D : 20 0A               	JR	NZ, INY3		;wenn Taste gedrueckt
    2051/    F81F : CB 86               	RES	0,(HL)			;sonst Repeatbit auf 0
    2052/    F821 : CB BE               	RES	7,(HL)			;keine Taste gedrueckt
    2053/    F823 : 32 04 00            	LD	(LAKEY),A		;A=0
    2054/    F826 : D3 08               	OUT	8, A			;Status ruecksetzen
    2055/    F828 : C9                  	RET
    2056/    F829 :                     ;
    2057/    F829 : 3A 04 00            INY3:	LD	A,(LAKEY)
    2058/    F82C : B7                  	OR	A			;vorher Taste gedrueckt ?
    2059/    F82D : 28 33               	JR	Z, INY12		;nein --> gleich weiter
    2060/    F82F : CB 46               	BIT	0,(HL)
    2061/    F831 : 28 0B               	JR	Z, INY6			;kein langes Repeat noetig
    2062/    F833 :                     ;kurze Repeatwartezeit
    2063/    F833 : 06 26               	LD	B,26H
    2064/    F835 : 0E 00               INY4:	LD	C,0
    2065/    F837 : 0D                  INY5:	DEC	C
    2066/    F838 : 20 FD               	JR	NZ, INY5
    2067/    F83A : 10 F9               	DJNZ	INY4
    2068/    F83C : 18 24               	JR	INY12
    2069/    F83E :                     ;grosses Repeat + negative Entprellung
    2070/    F83E : 06 80               INY6:	LD	B,80H
    2071/    F840 : 0E 00               INY7:	LD	C,0
    2072/    F842 : DB 02               INY8:	IN	A, 2
    2073/    F844 : 2F                  	CPL
    2074/    F845 : E6 0F               	AND	A, 0FH
    2075/    F847 : 28 09               	JR	Z, INY9
    2076/    F849 : 0D                  	DEC	C
    2077/    F84A : 20 F6               	JR	NZ, INY8
    2078/    F84C : 10 F2               	DJNZ	INY7
    2079/    F84E : CB C6               	SET	0,(HL)			;langes Repeat durchlaufen
    2080/    F850 : 18 10               	JR	INY12
    2081/    F852 :                     ;
    2082/    F852 : 06 04               INY9:	LD	B,4
    2083/    F854 : 0E 00               INY10:	LD	C,0
    2084/    F856 : DB 02               INY11:	IN	A, 2
    2085/    F858 : 2F                  	CPL
    2086/    F859 : E6 0F               	AND	A, 0FH
    2087/    F85B : 20 E1               	JR	NZ, INY6
    2088/    F85D : 0D                  	DEC	C
    2089/    F85E : 20 F6               	JR	NZ, INY11
    2090/    F860 : 10 F2               	DJNZ	INY10
    2091/    F862 :                     ;Spaltenabtastung
    2092/    F862 : CB 7E               INY12:	BIT	7,(HL)			;Entprellung?
    2093/    F864 : 20 0F               	JR	NZ, INY15		;eine Taste war betaetigt
    2094/    F866 : 06 03               	LD	B,3			;pos. Entprellung
    2095/    F868 : 0E 00               INY13:	LD	C,0
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 36 - 18.7.2004 19:30:37


    2096/    F86A : DB 02               INY14:	IN	A, 2
    2097/    F86C : 2F                  	CPL
    2098/    F86D : E6 0F               	AND	A, 0FH
    2099/    F86F : C8                  	RET	Z			;Taste gedrueckt
    2100/    F870 : 0D                  	DEC	C
    2101/    F871 : 20 F7               	JR	NZ, INY14
    2102/    F873 : 10 F3               	DJNZ	INY13
    2103/    F875 :                     ;
    2104/    F875 : AF                  INY15:	XOR	A
    2105/    F876 : FE 07               INY16:	CP	A, 7
    2106/    F878 : 20 02               	JR	NZ, INY17
    2107/    F87A : C6 01               	ADD	A, 1			;SHIFT/CTRL uebergehen
    2108/    F87C : D3 08               INY17:	OUT	8, A
    2109/    F87E : 57                  	LD	D,A
    2110/    F87F : DB 02               	IN	A, 2
    2111/    F881 : 2F                  	CPL
    2112/    F882 : E6 0F               	AND	A, 0FH
    2113/    F884 : 20 0B               	JR	NZ, INY19		;aktive Spalte
    2114/    F886 : 7A                  	LD	A,D
    2115/    F887 : C6 01               	ADD	A, 1
    2116/    F889 : FE 0C               	CP	A, 12
    2117/    F88B : 20 E9               	JR	NZ, INY16		;alle Spalten durch
    2118/    F88D : CB 86               	RES	0,(HL)			;kein langes Repeat
    2119/    F88F : AF                  INY18:	XOR	A			;keine Taste betaetigt
    2120/    F890 : C9                  	RET
    2121/    F891 :                     ;Ermittlung Tastenposition
    2122/    F891 : 01 08 07            INY19:	LD	BC,0708H		;Spalte 7 aktiv
    2123/    F894 : ED 41               	OUT	(C), B
    2124/    F896 : CB 22               	SLA	D
    2125/    F898 : CB 22               	SLA	D
    2126/    F89A : CB 22               	SLA	D			;Spalte*8
    2127/    F89C : D6 01               	SUB	1
    2128/    F89E : 82                  	ADD	A, D
    2129/    F89F : 5F                  	LD	E,A			;E=A=Controlcode
    2130/    F8A0 : 32 04 00            	LD	(LAKEY),A
    2131/    F8A3 :                     ;Auswertung SHIFT
    2132/    F8A3 : DB 02               	IN	A, 2
    2133/    F8A5 : E6 0F               	AND	A, 0FH
    2134/    F8A7 : EE 08               	XOR	8
    2135/    F8A9 : 7B                  	LD	A,E
    2136/    F8AA : 20 03               	JR	NZ, INY20
    2137/    F8AC : C6 60               	ADD	A, 60H			;sonst Korrektur fuer SHIFT
    2138/    F8AE : 5F                  	LD	E,A
    2139/    F8AF :                     ;Funktionstasten
    2140/    F8AF : 2A 43 00            INY20:	LD	HL,(PTFKY)
    2141/    F8B2 : ED 4B 41 00         	LD	BC,(PLFKY)
    2142/    F8B6 : ED B1               	CPIR
    2143/    F8B8 : 20 7B               	JR	NZ, INY21		;wenn Code keine Fkt-Taste
    2144/    F8BA :                     ;
    2145/    F8BA : 2B                  	DEC	HL
    2146/    F8BB : ED 4B 43 00         	LD	BC,(PTFKY)
    2147/    F8BF : ED 42               	SBC	HL,BC
    2148/    F8C1 : CB 25               	SLA	L
    2149/    F8C3 : ED 4B 45 00         	LD	BC,(PTFKA)
    2150/    F8C7 : 09                  	ADD	HL,BC
    2151/    F8C8 : 4E                  	LD	C,(HL)
    2152/    F8C9 : 23                  	INC	HL
    2153/    F8CA : 66                  	LD	H,(HL)
    2154/    F8CB : 69                  	LD	L,C			;HL:=Adr. aus Adressfeld
    2155/    F8CC : 01 27 00            	LD	BC,KYBTS
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 37 - 18.7.2004 19:30:37


    2156/    F8CF : 0A                  	LD	A,(BC)
    2157/    F8D0 : CB 87               	RES	0,A			;keine Taste gedrueckt
    2158/    F8D2 : CB 7F               	BIT	7,A			;war schon langes Repeat?
    2159/    F8D4 : C2 8F F8            	JP	NZ, INY18		;kein Repeat von Fkt.tasten
    2160/    F8D7 : CB FF               	SET	7,A			;sonst Repeat setzen
    2161/    F8D9 : 02                  	LD	(BC),A
    2162/    F8DA : E9                  	JP	(HL)			;Ausfuehren Funktion
    2163/    F8DB :                     ;Funktionen
    2164/    F8DB : =>FALSE             	if	MONTYP == "BROSIG_2028_K7659"
    2165/    F8DB :                     JP100:	LD	SP,SYSSK
    2166/    F8DB :                     	JP	100H
    2167/    F8DB :                     JP200:	LD	SP,SYSSK
    2168/    F8DB :                     	JP	200H
    2169/    F8DB :                     JP300:	LD	SP,SYSSK
    2170/    F8DB :                     	JP	300H
    2171/    F8DB : =>TRUE              	ELSEIF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    2172/    F8DB : 21 00 01            JP100:	LD	HL,100H
    2173/    F8DE : 18 08               	JR	JPX
    2174/    F8E0 : 21 00 02            JP200:	LD	HL,200H
    2175/    F8E3 : 18 03               	JR	JPX
    2176/    F8E5 : 21 00 03            JP300:	LD	HL,300H
    2177/    F8E8 : 31 B0 00            JPX:	LD	SP,SYSSK
    2178/    F8EB : 11 58 F0            	LD	DE,KDO1
    2179/    F8EE : D5                  	PUSH	DE
    2180/    F8EF : E9                  	JP	(HL)
    2181/    F8F0 :                     	ENDIF
    2182/    F8F0 :                     ;
    2183/    F8F0 : 2E 04               SGRAF:	LD	L,4			;Graphikschalter
    2184/    F8F2 : 18 0E               	JR	SCHLT
    2185/    F8F4 : 2E 08               SPRNT:	LD	L,8			;Druckerschalter
    2186/    F8F6 : 18 0A               	JR	SCHLT
    2187/    F8F8 : 2E 40               SSLOW:	LD	L,40H			;SLOW-Schalter
    2188/    F8FA : 18 06               	JR	SCHLT
    2189/    F8FC : 2E 20               SBEEP:	LD	L,20H			;Tastaturbeepschalter
    2190/    F8FE : 18 02               	JR	SCHLT
    2191/    F900 : 2E 10               SCAPS:	LD	L,10H			;CAPS-Schalter
    2192/    F902 : 0A                  SCHLT:	LD	A,(BC)			;setzt entsprechendes Bit
    2193/    F903 : AD                  	XOR	L
    2194/    F904 : 02                  	LD	(BC),A
    2195/    F905 : AF                  SCHL2:	XOR	A
    2196/    F906 : 5F                  	LD	E,A
    2197/    F907 : C3 D8 F9            	JP	BEEP5
    2198/    F90A : CD 4F FF            JP038:	CALL	ZMINI
    2199/    F90D : FF                  	RST	38H
    2200/    F90E :                     
    2201/    F90E : =>TRUE              	IF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    2202/    F90E : E7 01               O4SLT:	DW	RINCH			;Tastatureingabe
    2203/    F910 : D6 31               	SUB	'1'
    2204/    F912 : 38 F1               	JR	C, SCHL2
    2205/    F914 : FE 06               	CP	A, 6
    2206/    F916 : 30 ED               	JR	NC, SCHL2
    2207/    F918 : 21 2F F9            	LD	HL,O4TAB
    2208/    F91B : 16 00               	LD	D,0
    2209/    F91D : 5F                  	LD	E,A
    2210/    F91E : 19                  	ADD	HL,DE
    2211/    F91F : DB 04               	IN	A, 4
    2212/    F921 : E6 F0               	AND	A, 0F0H			;Schreibschutz an
    2213/    F923 : CB 43               	BIT	0,E			;gerade Ziffer (=Setzen)?
    2214/    F925 : 20 03               	JR	NZ, O4SL1
    2215/    F927 : A6                  	AND	A, (HL)
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 38 - 18.7.2004 19:30:37


    2216/    F928 : 18 01               	JR	O4SL2
    2217/    F92A : B6                  O4SL1:	OR	(HL)
    2218/    F92B : D3 04               O4SL2:	OUT	4, A
    2219/    F92D : 18 D6               	JR	SCHL2
    2220/    F92F :                     ;
    2221/    F92F : 70                  O4TAB:	DB	01110000B		;"1" 64x16 Zeichen
    2222/    F930 : 80                  	DB	10000000B		;"2"
    2223/    F931 : B0                  	DB	10110000B		;"3" 4 Mhz
    2224/    F932 : 40                  	DB	01000000B		;"4"
    2225/    F933 : D0                  	DB	11010000B		;"5" 2.ter Zeichensatz
    2226/    F934 : 20                  	DB	00100000B		;"6"
    2227/    F935 :                     	ENDIF
    2228/    F935 :                     
    2229/    F935 :                     ;Stringtasten
    2230/    F935 : 2A 3B 00            INY21:	LD	HL,(PTKEY)
    2231/    F938 : 16 00               	LD	D,0
    2232/    F93A : 19                  	ADD	HL,DE			;E:=Tastencode
    2233/    F93B : 7E                  	LD	A,(HL)
    2234/    F93C : 5F                  	LD	E,A
    2235/    F93D :                     ;CONTROL-Funktion
    2236/    F93D : DB 02               	IN	A, 2
    2237/    F93F : CB 5F               	BIT	3,A
    2238/    F941 : 20 0E               	JR	NZ, INY22
    2239/    F943 : 7B                  	LD	A,E
    2240/    F944 : E6 9F               	AND	A, 9FH
    2241/    F946 : 5F                  	LD	E,A
    2242/    F947 : DB 02               	IN	A, 2
    2243/    F949 : E6 0F               	AND	A, 0FH
    2244/    F94B : 20 04               	JR	NZ, INY22
    2245/    F94D : 3E 80               	LD	A,80H
    2246/    F94F : 83                  	ADD	A, E
    2247/    F950 : 5F                  	LD	E,A
    2248/    F951 :                     ;Stringfunktion
    2249/    F951 : CB 7B               INY22:	BIT	7,E
    2250/    F953 : 28 28               	JR	Z, INY26		;wenn keine Stringausgabe
    2251/    F955 : 32 04 00            	LD	(LAKEY),A
    2252/    F958 : 2A 3D 00            	LD	HL,(PTSTG)
    2253/    F95B : 7E                  INY23:	LD	A,(HL)
    2254/    F95C : B7                  	OR	A
    2255/    F95D : 28 1E               	JR	Z, INY26		;wenn Stringtabellenende
    2256/    F95F : 23                  	INC	HL
    2257/    F960 : BB                  	CP	A, E
    2258/    F961 : 20 F8               	JR	NZ, INY23
    2259/    F963 : 22 3F 00            	LD	(PTNXZ),HL
    2260/    F966 :                     ;naechstes Stringzeichen
    2261/    F966 : 2A 3F 00            INY24:	LD	HL,(PTNXZ)
    2262/    F969 : 7E                  	LD	A,(HL)
    2263/    F96A : 23                  	INC	HL
    2264/    F96B : 22 3F 00            	LD	(PTNXZ),HL
    2265/    F96E : 21 27 00            	LD	HL,KYBTS
    2266/    F971 : CB CE               	SET	1,(HL)			;Stringmode an
    2267/    F973 : CB 7F               	BIT	7,A
    2268/    F975 : 20 02               	JR	NZ, INY25		;wenn letzter Buchstabe war
    2269/    F977 : B7                  	OR	A
    2270/    F978 : C0                  	RET	NZ
    2271/    F979 : CB 8E               INY25:	RES	1,(HL)			;Stringmode aus
    2272/    F97B : AF                  	XOR	A
    2273/    F97C : C9                  	RET
    2274/    F97D :                     ;Graphik-Mode?
    2275/    F97D : 21 27 00            INY26:	LD	HL,KYBTS
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 39 - 18.7.2004 19:30:37


    2276/    F980 : 7B                  	LD	A,E
    2277/    F981 : CB 56               	BIT	2,(HL)			;Grafikmode an?
    2278/    F983 : 28 0B               	JR	Z, INY27		;nein
    2279/    F985 : FE 08               	CP	A, 8
    2280/    F987 : 28 07               	JR	Z, INY27
    2281/    F989 : FE 09               	CP	A, 9
    2282/    F98B : 28 03               	JR	Z, INY27		;wenn CULEFT o. CURIGHT
    2283/    F98D : C6 80               	ADD	A, 80H			;--> Grafikzeichen
    2284/    F98F : 5F                  	LD	E,A
    2285/    F990 :                     ;CAPS-Umschaltung
    2286/    F990 : CB 66               INY27:	BIT	4,(HL)			;CAPS an ?
    2287/    F992 : 28 19               	JR	Z, INY29		;nein
    2288/    F994 : 7B                  	LD	A,E			;sonst Gross-Klein-wandlung
    2289/    F995 : FE 41               	CP	A, 'A'
    2290/    F997 : 38 14               	JR	C, INY29
    2291/    F999 : FE 5E               	CP	A, '^'
    2292/    F99B : 30 05               	JR	NC, INY28
    2293/    F99D : C6 20               	ADD	A, 20H
    2294/    F99F : 5F                  	LD	E,A
    2295/    F9A0 : 18 0B               	JR	INY29
    2296/    F9A2 : FE 61               INY28:	CP	A, 'a'
    2297/    F9A4 : 38 07               	JR	C, INY29
    2298/    F9A6 : FE 7E               	CP	A, '~'
    2299/    F9A8 : 30 03               	JR	NC, INY29
    2300/    F9AA : D6 20               	SUB	20H
    2301/    F9AC : 5F                  	LD	E,A
    2302/    F9AD :                     ;Tastaturbeepimpuls
    2303/    F9AD : 7B                  INY29:	LD	A,E
    2304/    F9AE : 32 04 00            	LD	(LAKEY),A
    2305/    F9B1 : CB FE               	SET	7,(HL)
    2306/    F9B3 : CB 6E               	BIT	5,(HL)
    2307/    F9B5 : 28 3A               	JR	Z, BEEP7
    2308/    F9B7 :                     ;
    2309/    F9B7 :                     ;Tonausgabe
    2310/    F9B7 :                     ;  C=Tonhoehe, B=Tondauer
    2311/    F9B7 :                     ;
    2312/    F9B7 : 01 39 20            	LD	BC,2039H
    2313/    F9BA : C5                  BEEP:	PUSH	BC
    2314/    F9BB : C5                  BEEP1:	PUSH	BC
    2315/    F9BC : 79                  	LD	A,C
    2316/    F9BD : B7                  	OR	A
    2317/    F9BE : 3E 0F               	LD	A,0FH
    2318/    F9C0 : 28 02               	JR	Z, BEEP2		;C=0 --> kein Ton
    2319/    F9C2 : 3E 0E               	LD	A,0EH			;Beep an
    2320/    F9C4 : D3 08               BEEP2:	OUT	8, A
    2321/    F9C6 : C1                  	POP	BC
    2322/    F9C7 : C5                  	PUSH	BC
    2323/    F9C8 : 0D                  BEEP3:	DEC	C
    2324/    F9C9 : 20 FD               	JR	NZ, BEEP3		;Flanke abwarten
    2325/    F9CB : 3E 0F               	LD	A,0FH
    2326/    F9CD : D3 08               	OUT	8, A			;Beep aus
    2327/    F9CF : C1                  	POP	BC
    2328/    F9D0 : C5                  	PUSH	BC
    2329/    F9D1 : 0D                  BEEP4:	DEC	C
    2330/    F9D2 : 20 FD               	JR	NZ, BEEP4		;Flanke abwarten
    2331/    F9D4 : C1                  	POP	BC
    2332/    F9D5 : 10 E4               	DJNZ	BEEP1			;Tondauer
    2333/    F9D7 : C1                  	POP	BC
    2334/    F9D8 :                     ;Rekonstruktion der Flags
    2335/    F9D8 : E5                  BEEP5:	PUSH	HL
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 40 - 18.7.2004 19:30:37


    2336/    F9D9 : 21 27 00            	LD	HL,KYBTS
    2337/    F9DC : 3E 0E               	LD	A,0EH			;Flags ruecksetzen
    2338/    F9DE : D3 08               	OUT	8, A
    2339/    F9E0 : CB 5E               	BIT	3,(HL)			;Drucker parallel?
    2340/    F9E2 : 28 04               	JR	Z, BEEP6		;nein
    2341/    F9E4 : 3E 0C               	LD	A,0CH
    2342/    F9E6 : D3 08               	OUT	8, A
    2343/    F9E8 : CB 66               BEEP6:	BIT	4,(HL)			;CAPS an?
    2344/    F9EA : E1                  	POP	HL
    2345/    F9EB : 28 04               	JR	Z, BEEP7		;nein
    2346/    F9ED : 3E 0D               	LD	A,0DH
    2347/    F9EF : D3 08               	OUT	8, A
    2348/    F9F1 : 3E 07               BEEP7:	LD	A,7
    2349/    F9F3 : D3 08               	OUT	8, A
    2350/    F9F5 :                     ;
    2351/    F9F5 : 7B                  	LD	A,E			;Tastencode uebergeben
    2352/    F9F6 : B7                  	OR	A			;evtl. Z-Flag
    2353/    F9F7 : C9                  	RET
    2354/    F9F8 :                     ;
    2355/    F9F8 :                     ;Tastaturfelder
    2356/    F9F8 :                     ;
    2357/    F9F8 :                     ;Funktionstastenpositionsfeld
    2358/    F9F8 : 52                  K7FKY:	DB	82
    2359/    F9F9 : 35                  	DB	53
    2360/    F9FA : 54                  	DB	84
    2361/    F9FB : 55                  	DB	85
    2362/    F9FC : 43                  	DB	67
    2363/    F9FD : 47                  	DB	71
    2364/    F9FE : 48                  	DB	72
    2365/    F9FF : 49                  	DB	73
    2366/    FA00 : 53                  	DB	83
    2367/    FA01 : 4A                  	DB	74
    2368/    FA02 : =>TRUE              	IF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    2369/    FA02 : 45                  	DB	69			;O4LST
    2370/    FA03 :                     	ENDIF
    2371/    FA03 :                     ;Funktionstastenadressfeld
    2372/    FA03 : F0 F8               K7FKA:	DW	SGRAF
    2373/    FA05 : 00 F9               	DW	SCAPS
    2374/    FA07 : F8 F8               	DW	SSLOW
    2375/    FA09 : FC F8               	DW	SBEEP
    2376/    FA0B : 0A F9               	DW	JP038
    2377/    FA0D : DB F8               	DW	JP100
    2378/    FA0F : E0 F8               	DW	JP200
    2379/    FA11 : E5 F8               	DW	JP300
    2380/    FA13 : F4 F8               	DW	SPRNT
    2381/    FA15 : =>FALSE             	IF MONTYP <> "VP_202C_K7659"
    2382/    FA15 :                     	DW	BSDR
    2383/    FA15 : =>TRUE              	ELSEIF MONTYP == "VP_202C_K7659"
    2384/    FA15 : E5 FF               	DW	RBSDR
    2385/    FA17 :                     	ENDIF
    2386/    FA17 : =>TRUE              	IF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    2387/    FA17 : 0E F9               	DW	O4SLT
    2388/    FA19 :                     	ENDIF
    2389/    FA19 :                     ;Tastenbelegungsfeld
    2390/    FA19 : 31 51 41 59 32 57   K7KEY:	DB	"1QAY2WSX"		;Spalte 0
                    53 58 
    2391/    FA21 : 33 45 44 43 34 52   	DB	"3EDC4RFV"		;Spalte 1
                    46 56 
    2392/    FA29 : 35 54 47 42 36 5A   	DB	"5TGB6ZHN"		;Spalte 2
                    48 4E 
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 41 - 18.7.2004 19:30:37


    2393/    FA31 : 37 55 4A 4D 38 49   	DB	"7UJM8IK,"		;Spalte 3
                    4B 2C 
    2394/    FA39 : 39 4F 4C 2E 30 50   	DB	"9OL.0P\\-"		;Spalte 4	(\\ nötig wg. Assembler, bedeutet \)
                    5C 2D 
    2395/    FA41 : 7E 5D 5B 3C 2B 23   	DB	"~][<+#^@"		;Spalte 5
                    5E 40 
    2396/    FA49 : 3E                  	DB	">"			;Spalte 6
    2397/    FA4A : 0D                  	DB	CR
    2398/    FA4B : 0B                  	DB	0BH			;CUUP
    2399/    FA4C : 08                  	DB	8			;CULEFT
    2400/    FA4D : 20                  	DB	" "
    2401/    FA4E : 00                  	DB	0			;--> CAPS
    2402/    FA4F : 0A                  	DB	0AH			;CUDOWN
    2403/    FA50 : 09                  	DB	9			;CURIGHT
    2404/    FA51 :                     					;Spalte 7
    2405/    FA51 : 00                  	DB	0
    2406/    FA52 : 00                  	DB	0
    2407/    FA53 : 00                  	DB	0
    2408/    FA54 : 00                  	DB	0
    2409/    FA55 : 00                  	DB	0
    2410/    FA56 : 00                  	DB	0
    2411/    FA57 : 00                  	DB	0			;SHIFT
    2412/    FA58 : 00                  	DB	0			;CTRL
    2413/    FA59 :                     					;Spalte 8
    2414/    FA59 : 00                  	DB	0
    2415/    FA5A : 7F                  	DB	7FH			;DEL
    2416/    FA5B : 14                  	DB	14H			;^T
    2417/    FA5C : 00                  	DB	0			;--> RST38
    2418/    FA5D : 1B                  	DB	1BH			;ESC
    2419/    FA5E : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
    2420/    FA5E :                     	DB	'{'
    2421/    FA5E : =>TRUE              	ELSEIF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    2422/    FA5E : 00                  	DB	0			;O4LST
    2423/    FA5F :                     	ENDIF
    2424/    FA5F : 7D                  	DB	'}'
    2425/    FA60 : 00                  	DB	0			;--> JP100
    2426/    FA61 :                     					;Spalte 9
    2427/    FA61 : 00                  	DB	0			;--> JP200
    2428/    FA62 : 00                  	DB	0			;--> JP300
    2429/    FA63 : 00                  	DB	0			;--> HCOPY
    2430/    FA64 : 15                  	DB	15H			;^U
    2431/    FA65 : 19                  	DB	19H			;^Y
    2432/    FA66 : 12                  	DB	12H			;^R
    2433/    FA67 : 10                  	DB	10H			;^P
    2434/    FA68 : 03                  	DB	3			;^C
    2435/    FA69 :                     					;Spalte 10
    2436/    FA69 : 06                  	DB	6			;^F
    2437/    FA6A : 00                  	DB	0
    2438/    FA6B : 00                  	DB	0			;--> GRAPHIK
    2439/    FA6C : 00                  	DB	0			;--> DRUCKER
    2440/    FA6D : 00                  	DB	0			;--> SLOW
    2441/    FA6E : 00                  	DB	0			;--> BEEP
    2442/    FA6F : 00                  	DB	0
    2443/    FA70 : 1C                  	DB	1CH			;^\
    2444/    FA71 :                     					;Spalte 11
    2445/    FA71 : 1D                  	DB	1DH			;^]
    2446/    FA72 : 00                  	DB	0
    2447/    FA73 : 00                  	DB	0
    2448/    FA74 : 00                  	DB	0
    2449/    FA75 : 05                  	DB	5			;^E
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 42 - 18.7.2004 19:30:37


    2450/    FA76 : 00                  	DB	0
    2451/    FA77 : 01                  	DB	1			;^A
    2452/    FA78 : 00                  	DB	0
    2453/    FA79 :                     ;Tastenbelegung unter SHIFT
    2454/    FA79 : 21 71 61 79 22 77   	DB	"!qay",'"',"wsx"	;Spalte 0
                    73 78 
    2455/    FA81 : 40 65 64 63 24 72   	DB	"@edc$rfv"		;Spalte 1
                    66 76 
    2456/    FA89 : 25 74 67 62 26 7A   	DB	"%tgb&zhn"		;Spalte 2
                    68 6E 
    2457/    FA91 : 2F 75 6A 6D 28 69   	DB	"/ujm(ik;"		;Spalte 3
                    6B 3B 
    2458/    FA99 : 29 6F 6C 3A 3D 70   	DB	")ol:=p|_"		;Spalte 4
                    7C 5F 
    2459/    FAA1 : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
    2460/    FAA1 :                     	DB	"?}{[*"			;Spalte 5
    2461/    FAA1 : =>TRUE              	ELSEIF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    2462/    FAA1 : 3F 7D 7B 60 2A      	DB	"?}{`*"			;Spalte 5
    2463/    FAA6 :                     	ENDIF
    2464/    FAA6 : 27                  	DB	27H			;'
    2465/    FAA7 : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
    2466/    FAA7 :                     	DB	"|\\"			;		(\\ nötig wg. Assembler, bedeutet \)
    2467/    FAA7 : =>TRUE              	ELSEIF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    2468/    FAA7 : 7C 40               	DB	"|@"
    2469/    FAA9 :                     	ENDIF
    2470/    FAA9 :                     					;Spalte 6
    2471/    FAA9 : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
    2472/    FAA9 :                     	DB	"]"
    2473/    FAA9 : =>TRUE              	ELSEIF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    2474/    FAA9 : 27                  	DB	27H
    2475/    FAAA :                     	ENDIF
    2476/    FAAA : 0D                  	DB	CR
    2477/    FAAB : 0B                  	DB	0BH			;CUUP
    2478/    FAAC : 08                  	DB	8			;CULEFT
    2479/    FAAD : 20                  	DB	" "
    2480/    FAAE : 00                  	DB	0			;--> CAPS
    2481/    FAAF : 0A                  	DB	0AH			;CUDOWN
    2482/    FAB0 : 09                  	DB	9			;CURIGHT
    2483/    FAB1 :                     					;Spalte 7
    2484/    FAB1 : 00                  	DB	0
    2485/    FAB2 : 00                  	DB	0
    2486/    FAB3 : 00                  	DB	0
    2487/    FAB4 : 00                  	DB	0
    2488/    FAB5 : 00                  	DB	0
    2489/    FAB6 : 00                  	DB	0
    2490/    FAB7 : 00                  	DB	0			;SHIFT
    2491/    FAB8 : 00                  	DB	0			;CTRL
    2492/    FAB9 :                     					;Spalte 8
    2493/    FAB9 : 00                  	DB	0
    2494/    FABA : 02                  	DB	2			;^B
    2495/    FABB : 13                  	DB	13H			;^S
    2496/    FABC : 00                  	DB	0			;--> RST38
    2497/    FABD : 1B                  	DB	1BH			;^[
    2498/    FABE : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
    2499/    FABE :                     	DB	'`'
    2500/    FABE : =>TRUE              	ELSEIF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    2501/    FABE : 00                  	DB	0			;O4LST
    2502/    FABF :                     	ENDIF
    2503/    FABF : 7E                  	DB	'~'
    2504/    FAC0 : 00                  	DB	0			;--> JP100
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 43 - 18.7.2004 19:30:37


    2505/    FAC1 :                     					;Spalte 9
    2506/    FAC1 : 00                  	DB	0			;--> JP200
    2507/    FAC2 : 00                  	DB	0			;--> JP300
    2508/    FAC3 : 00                  	DB	0			;--> HCOPY
    2509/    FAC4 : 0F                  	DB	0FH			;^O
    2510/    FAC5 : 18                  	DB	18H			;^X
    2511/    FAC6 : 11                  	DB	11H			;^Q
    2512/    FAC7 : 1F                  	DB	1FH			;^_
    2513/    FAC8 : 03                  	DB	3			;^C
    2514/    FAC9 :                     					;Spalte 10
    2515/    FAC9 : 1E                  	DB	1EH			;^^
    2516/    FACA : 00                  	DB	0
    2517/    FACB : 00                  	DB	0			;--> GRAPHIK
    2518/    FACC : 00                  	DB	0			;--> DRUCKER
    2519/    FACD : 00                  	DB	0			;--> SLOW
    2520/    FACE : 00                  	DB	0			;--> BEEP
    2521/    FACF : 00                  	DB	0
    2522/    FAD0 : 1C                  	DB	1CH			;^\
    2523/    FAD1 :                     					;Spalte 11
    2524/    FAD1 : 1D                  	DB	1DH			;^]
    2525/    FAD2 : 00                  	DB	0
    2526/    FAD3 : 00                  	DB	0
    2527/    FAD4 : 00                  	DB	0
    2528/    FAD5 : 19                  	DB	19H			;^Y
    2529/    FAD6 : 00                  	DB	0
    2530/    FAD7 : 18                  	DB	18H			;^X
    2531/    FAD8 : 00                  	DB	0
    2532/    FAD9 :                     ;
    2533/    FAD9 :                     ;Tastaturstatus ermitteln
    2534/    FAD9 :                     ;
    2535/    FAD9 : 3E 0F               STAT:	LD	A,0FH			;Statusabfrage
    2536/    FADB : D3 08               	OUT	8, A
    2537/    FADD : AF                  	XOR	A
    2538/    FADE : 32 04 00            	LD	(LAKEY),A		;hinterlaesst Null, d.h.
    2539/    FAE1 : DB 02               	IN	A, 2			;keine Taste gedrueckt
    2540/    FAE3 : E6 0F               	AND	A, 0FH
    2541/    FAE5 : D6 0F               	SUB	0FH
    2542/    FAE7 : C8                  	RET	Z			;keine Taste gedrueckt
    2543/    FAE8 : 3E FF               	LD	A,0FFH			;sonst Uebergabe 0FFH
    2544/    FAEA : C9                  	RET
    2545/    FAEB :                     ;
    2546/    FAEB :                     ;HeaderSave
    2547/    FAEB :                     ;
    2548/    FAEB : FD                  SAR0:	DB	0FDH			;LD HY,0
    2549/    FAEC : 26 00               	LD	H,0			;d.h. Typabfrage
    2550/    FAEE :                     ;
    2551/    FAEE :                     SARUF:	
    2552/    FAEE : =>TRUE              	IF MONTYP == "VP_202C_K7659"
    2553/    FAEE : CD 83 FF            	CALL	HDKAS
    2554/    FAF1 : DA 03 D8            	JP	C, 0D803H		;HEADERDISK
    2555/    FAF4 :                     	ENDIF
    2556/    FAF4 :                     	
    2557/    FAF4 : FE 3A               	CP	A, ':'			;alte Parameter nutzen?
    2558/    FAF6 : C4 1D FB            	CALL	NZ, AKP0		;nein --> neue Eingabe
    2559/    FAF9 : E7 02               	DW	RPRST
    2560/    FAFB : 8D                  	DB	CR+80H
    2561/    FAFC : CD 24 FD            	CALL	HADR			;Adressen holen
    2562/    FAFF : ED B0               	LDIR				;und kopieren
    2563/    FB01 : 21 E0 00            	LD	HL,AADR
    2564/    FB04 : CD 17 FB            	CALL	HSAV1			;Ausgabe Kopfblock
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 44 - 18.7.2004 19:30:37


    2565/    FB07 : 2A E0 00            	LD	HL,(AADR)
    2566/    FB0A : CD 9D FD            	CALL	OADR1			;Anzeige der Adressen
    2567/    FB0D : CD 17 FB            	CALL	HSAV1			;Ausg. 1.Block m. langem Ton
    2568/    FB10 : CD 4B FB            	CALL	HSAV0			;Abspeichern File
    2569/    FB13 : CD 5F FB            	CALL	VERIF			;Verify-Funktion
    2570/    FB16 : C9                  	RET
    2571/    FB17 :                     ;
    2572/    FB17 :                     ;Abspeichern ein Block mit langem Vorton
    2573/    FB17 :                     ;
    2574/    FB17 : 11 00 10            HSAV1:	LD	DE,1000H
    2575/    FB1A : C3 86 F3            	JP	SAV4
    2576/    FB1D :                     ;
    2577/    FB1D :                     ;Aufbereitung Kopfpuffer
    2578/    FB1D :                     ;
    2579/    FB1D : CD 24 FD            AKP0:	CALL	HADR			;Adressen holen und
    2580/    FB20 : EB                  	EX	DE,HL			;nach ARGx transportieren
    2581/    FB21 : ED B0               	LDIR
    2582/    FB23 : 2A 23 00            	LD	HL,(ARG3)
    2583/    FB26 : 22 E4 00            	LD	(SADR),HL
    2584/    FB29 :                     ;
    2585/    FB29 : 21 ED 00            	LD	HL,SIGNS		;Block als Kopfblock
    2586/    FB2C : 3E D3               	LD	A,0D3H			;markieren
    2587/    FB2E : 06 03               	LD	B,3
    2588/    FB30 : 77                  AKP1:	LD	(HL),A
    2589/    FB31 : 23                  	INC	HL
    2590/    FB32 : 10 FC               	DJNZ	AKP1
    2591/    FB34 :                     ;
    2592/    FB34 : CD 2E FD            	CALL	INKPF			;Eingabe Typ und Name
    2593/    FB37 : FD                  	DB	0FDH
    2594/    FB38 : 7C                  	LD	A,H			;LD	A,HY
    2595/    FB39 : 32 EC 00            	LD	(TYP),A			;Typ eintragen
    2596/    FB3C : 2A 16 00            	LD	HL,(SOIL)		;Name eintragen
    2597/    FB3F : 01 10 00            	LD	BC,0010H
    2598/    FB42 : 11 F0 00            	LD	DE,NAME
    2599/    FB45 : ED B0               	LDIR
    2600/    FB47 : E7 02               	DW	RPRST
    2601/    FB49 : 8D                  	DB	CR+80H
    2602/    FB4A : C9                  	RET
    2603/    FB4B :                     ;
    2604/    FB4B :                     ;Abspeichern File
    2605/    FB4B :                     ;
    2606/    FB4B : EB                  HSAV0:	EX	DE,HL			;Test, ob Fileende erreicht
    2607/    FB4C : 2A E2 00            	LD	HL,(EADR)
    2608/    FB4F : A7                  	AND	A, A
    2609/    FB50 : ED 52               	SBC	HL,DE
    2610/    FB52 : EB                  	EX	DE,HL
    2611/    FB53 : D8                  	RET	C			;wenn ja
    2612/    FB54 : 22 25 00            	LD	(SOIL2),HL		;sonst weiter mit
    2613/    FB57 : CD 83 F3            	CALL	SAV3			;Blockausgabe
    2614/    FB5A : CD 9D FD            	CALL	OADR1			;Adressen anzeigen
    2615/    FB5D : 18 EC               	JR	HSAV0
    2616/    FB5F :                     ;
    2617/    FB5F :                     ;Aufzeichnung ueberpruefen
    2618/    FB5F :                     ;
    2619/    FB5F : E7 02               VERIF:	DW	RPRST
    2620/    FB61 : 76 65 72 69 66 79   	DB	"verify? (Y)"
                    3F 20 28 59 29 
    2621/    FB6C : BA                  	DB	0BAH			;":"
    2622/    FB6D : E7 01               	DW	RINCH			;Tastatureingabe
    2623/    FB6F : FE 59               	CP	A, 'Y'
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 45 - 18.7.2004 19:30:37


    2624/    FB71 : C0                  	RET	NZ			;wenn kein Verify
    2625/    FB72 :                     ;
    2626/    FB72 : E7 02               	DW	RPRST
    2627/    FB74 : 20 72 65 77 69 6E   	DB	" rewind "
                    64 20 
    2628/    FB7C : BC                  	DB	0BCH
    2629/    FB7D : E7 01               	DW	RINCH			;warten auf Tastendruck
    2630/    FB7F : E7 02               	DW	RPRST
    2631/    FB81 : 0D                  	DB	CR
    2632/    FB82 : 8D                  	DB	CR+80H
    2633/    FB83 :                     ;
    2634/    FB83 : CD 00 F8            VER1:	CALL	INKY
    2635/    FB86 : FE 03               	CP	A, 3			;>STOP< ?
    2636/    FB88 : CA 38 00            	JP	Z, RST38		;ja --> Abbruch
    2637/    FB8B : CD BD FB            	CALL	VER3			;Block lesen
    2638/    FB8E : 20 F3               	JR	NZ, VER1		;wenn kein Fehler
    2639/    FB90 : 3E E0               	LD	A,0E0H			;L(AADR)
    2640/    FB92 : BB                  	CP	A, E
    2641/    FB93 : 20 EE               	JR	NZ, VER1		;kein Kopfblock
    2642/    FB95 : AF                  	XOR	A
    2643/    FB96 : BA                  	CP	A, D
    2644/    FB97 : 20 EA               	JR	NZ, VER1		;kein Kopfblock
    2645/    FB99 :                     ;
    2646/    FB99 : CD BD FB            VER2:	CALL	VER3			;Block lesen
    2647/    FB9C : C4 7D FD            	CALL	NZ, ERBAD		;evtl. Fehlermeldung
    2648/    FB9F : F5                  	PUSH	AF
    2649/    FBA0 : 01 39 00            	LD	BC,0039H
    2650/    FBA3 : C4 BA F9            	CALL	NZ, BEEP		;wenn Fehler
    2651/    FBA6 : F1                  	POP	AF
    2652/    FBA7 : C0                  	RET	NZ			;wenn Fehler
    2653/    FBA8 : 62                  	LD	H,D
    2654/    FBA9 : 6B                  	LD	L,E
    2655/    FBAA : CD 9D FD            	CALL	OADR1			;Anzeige Ladeadresse
    2656/    FBAD : 3A 25 00            	LD	A,(SOIL2)
    2657/    FBB0 : BB                  	CP	A, E			;Endadresse erreicht?
    2658/    FBB1 : 20 E6               	JR	NZ, VER2		;nein --> weiterlesen
    2659/    FBB3 : 3A 26 00            	LD	A,(SOIL2+1)
    2660/    FBB6 : BA                  	CP	A, D
    2661/    FBB7 : 20 E0               	JR	NZ, VER2		;nein --> weiterlesen
    2662/    FBB9 : CD B1 FD            	CALL	OADR3			;Cursorpos. korrigieren
    2663/    FBBC : C9                  	RET
    2664/    FBBD :                     ;
    2665/    FBBD : 3E FF               VER3:	LD	A,0FFH			;vollen Block
    2666/    FBBF : 32 1E 00            	LD	(ARG2+1),A
    2667/    FBC2 : 21 00 EC            	LD	HL,BWS			;auf den Bildschirm
    2668/    FBC5 : CD C0 FD            	CALL	HLBLK			;Block lesen
    2669/    FBC8 : C9                  	RET
    2670/    FBC9 :                     ;
    2671/    FBC9 :                     ;HeaderLoad
    2672/    FBC9 :                     ;
    2673/    FBC9 : 2A 16 00            LOR0:	LD	HL,(SOIL)		;Beginn Eingabezeile
    2674/    FBCC : 23                  	INC	HL
    2675/    FBCD : 23                  	INC	HL
    2676/    FBCE : 23                  	INC	HL
    2677/    FBCF : 7E                  	LD	A,(HL)			;(HL)=3. Buchstabe
    2678/    FBD0 : FD                  	DB	0FDH			;hinter "@"
    2679/    FBD1 : 6F                  	LD	L,A			;LD	LY,A
    2680/    FBD2 : 2B                  	DEC	HL
    2681/    FBD3 : FD                  	DB	0FDH
    2682/    FBD4 : 26 00               	LD	H,0			;LD	HY,0
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 46 - 18.7.2004 19:30:37


    2683/    FBD6 : 7E                  	LD	A,(HL)			;(HL)=2. Buchstabe
    2684/    FBD7 :                     ;
    2685/    FBD7 :                     LORUF:	
    2686/    FBD7 : =>TRUE              	IF MONTYP == "VP_202C_K7659"
    2687/    FBD7 : CD 83 FF            	CALL	HDKAS
    2688/    FBDA : DA 00 D8            	JP	C, 0D800H		;HEADERDISK
    2689/    FBDD :                     	ENDIF
    2690/    FBDD :                     
    2691/    FBDD : 21 15 00            	LD	HL,SHILO		;SHILO dient als
    2692/    FBE0 : 36 00               	LD	(HL),0			;Namenslaengenpuffer
    2693/    FBE2 : =>FALSE             	IF	MONTYP == "BROSIG_2028_K7659"
    2694/    FBE2 :                     	LD	HL,BPADR		;BPADR ist Moduspuffer
    2695/    FBE2 :                     	LD	(HL),0
    2696/    FBE2 :                     	ENDIF
    2697/    FBE2 :                     ;
    2698/    FBE2 : FE 4E               	CP	A, 'N'			;Namenseingabe?
    2699/    FBE4 : E5                  	PUSH	HL
    2700/    FBE5 : CC 2E FD            	CALL	Z, INKPF		;wenn ja --> Eingabe
    2701/    FBE8 : E1                  	POP	HL
    2702/    FBE9 :                     ;
    2703/    FBE9 : 2A 1B 00            	LD	HL,(ARG1)		;neue Ladedresse
    2704/    FBEC : 22 23 00            	LD	(ARG3),HL		;in ARG3 merken
    2705/    FBEF : 08                  	EX	AF, AF'
    2706/    FBF0 : E7 04               LOR1:	DW	RINKY			;Tastaturabfrage
    2707/    FBF2 : FE 03               	CP	A, 3			;>STOP< ?
    2708/    FBF4 : 20 04               	JR	NZ, LOR2
    2709/    FBF6 : E7 02               	DW	RPRST			;ja --> Abbruch
    2710/    FBF8 : 8D                  	DB	CR+80H
    2711/    FBF9 : C9                  	RET
    2712/    FBFA :                     ;
    2713/    FBFA : 3E FF               LOR2:	LD	A,0FFH			;stets vollen Block lesen
    2714/    FBFC : 32 1D 00            	LD	(ARG2),A
    2715/    FBFF : 21 E0 00            	LD	HL,AADR
    2716/    FC02 : CD C0 FD            	CALL	HLBLK			;Block lesen
    2717/    FC05 : =>FALSE             	IF	MONTYP == "BROSIG_2028_K7659"
    2718/    FC05 :                     	EX	AF, AF'
    2719/    FC05 :                     	CP	A, 'A'			;war zweiter Buchstabe "A"?
    2720/    FC05 :                     	JR	Z, LOR4			;ja --> als Kopfblock werten
    2721/    FC05 :                     	EX	AF, AF'
    2722/    FC05 :                     	ENDIF
    2723/    FC05 : 20 E9               	JR	NZ, LOR1		;sonst bei Fehler neu lesen
    2724/    FC07 :                     ;
    2725/    FC07 : =>FALSE             	IF	MONTYP == "BROSIG_2028_K7659"
    2726/    FC07 :                     	LD	D,A			;A=0	-- das ist Fehler von R.Brosig, hier müsste LD A,D stehen! (vp)
    2727/    FC07 :                     	OR	E
    2728/    FC07 :                     	LD	(BPADR),A
    2729/    FC07 :                     	ENDIF
    2730/    FC07 :                     ;Test, ob Kopfblock gelesen
    2731/    FC07 : 06 03               	LD	B,3			;3 Kopfkennzeichen
    2732/    FC09 : 21 ED 00            	LD	HL,SIGNS
    2733/    FC0C : 7E                  LOR3:	LD	A,(HL)
    2734/    FC0D : FE D3               	CP	A, 0D3H			;Kopfkennzeichen
    2735/    FC0F : 23                  	INC	HL
    2736/    FC10 : 20 DE               	JR	NZ, LOR1		;wenn kein Kopf
    2737/    FC12 : 10 F8               	DJNZ	LOR3			;sonst weitertesten
    2738/    FC14 :                     ;
    2739/    FC14 : E7 02               LOR4:	DW	RPRST
    2740/    FC16 : 8D                  	DB	CR+80H
    2741/    FC17 :                     ;Anzeige von AADR, EADR, SADR
    2742/    FC17 : 06 03               	LD	B,3
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 47 - 18.7.2004 19:30:37


    2743/    FC19 : 2A E0 00            	LD	HL,(AADR)
    2744/    FC1C : 22 25 00            	LD	(SOIL2),HL
    2745/    FC1F : 21 E1 00            	LD	HL,AADR+1
    2746/    FC22 : E7 0C               LOR5:	DW	ROTHS			;Adresse anzeigen
    2747/    FC24 : 23                  	INC	HL
    2748/    FC25 : 23                  	INC	HL
    2749/    FC26 : 23                  	INC	HL
    2750/    FC27 : 23                  	INC	HL
    2751/    FC28 : 10 F8               	DJNZ	LOR5
    2752/    FC2A : E7 02               	DW	RPRST
    2753/    FC2C : 0D                  	DB	CR
    2754/    FC2D : 8D                  	DB	CR+80H
    2755/    FC2E :                     ;Anzeige gelesener Typ und Name
    2756/    FC2E : 21 EC 00            	LD	HL,TYP
    2757/    FC31 : ED 5B 2B 00         	LD	DE,(CUPOS)
    2758/    FC35 : 01 14 00            	LD	BC,0014H
    2759/    FC38 : ED B0               	LDIR
    2760/    FC3A : 13                  	INC	DE
    2761/    FC3B : ED 53 2B 00         	LD	(CUPOS),DE
    2762/    FC3F :                     ;
    2763/    FC3F : FD                  	DB	0FDH
    2764/    FC40 : 7C                  	LD	A,H			;LD	A,HY
    2765/    FC41 : FE 21               	CP	A, 21H			;ist Typ Steuerzeichen?
    2766/    FC43 : 38 09               	JR	C, LOR6			;ja --> kein Vergleich
    2767/    FC45 : 21 EC 00            	LD	HL,TYP
    2768/    FC48 : BE                  	CP	A, (HL)
    2769/    FC49 : C4 90 FD            	CALL	NZ, ERNF		;Typ stimmt nicht
    2770/    FC4C : 20 A2               	JR	NZ, LOR1		;neuen Kopf suchen
    2771/    FC4E :                     ;
    2772/    FC4E : 3A 15 00            LOR6:	LD	A,(SHILO)		;Namenslaenge
    2773/    FC51 : 47                  	LD	B,A
    2774/    FC52 : B7                  	OR	A
    2775/    FC53 : 28 13               	JR	Z, LOR8			;kein Vergleich
    2776/    FC55 :                     ;
    2777/    FC55 : 21 F0 00            	LD	HL,NAME			;Namensvergleich
    2778/    FC58 : ED 5B 16 00         	LD	DE,(SOIL)
    2779/    FC5C : 1A                  LOR7:	LD	A,(DE)
    2780/    FC5D : BE                  	CP	A, (HL)
    2781/    FC5E : 23                  	INC	HL
    2782/    FC5F : 13                  	INC	DE
    2783/    FC60 : C4 90 FD            	CALL	NZ, ERNF		;wenn Name nicht stimmt
    2784/    FC63 : C2 F0 FB            	JP	NZ, LOR1		;dann neuen Kopf lesen
    2785/    FC66 : 10 F4               	DJNZ	LOR7
    2786/    FC68 :                     ;Anzeige der Zieladressen
    2787/    FC68 : 2A 23 00            LOR8:	LD	HL,(ARG3)		;neue Ladeadresse
    2788/    FC6B : AF                  	XOR	A
    2789/    FC6C : B4                  	OR	H
    2790/    FC6D : 28 17               	JR	Z, LOR9			;wenn nicht eingegeben
    2791/    FC6F :                     ;
    2792/    FC6F : ED 4B E0 00         	LD	BC,(AADR)
    2793/    FC73 : 22 E0 00            	LD	(AADR),HL		;neue AADR eintragen
    2794/    FC76 : E7 07               	DW	ROTHL			;und anzeigen
    2795/    FC78 : E7 0E               	DW	ROTSP
    2796/    FC7A : ED 42               	SBC	HL,BC
    2797/    FC7C : ED 4B E2 00         	LD	BC,(EADR)
    2798/    FC80 : 09                  	ADD	HL,BC			;neue EADR berechnen
    2799/    FC81 : 22 E2 00            	LD	(EADR),HL		;eintragen
    2800/    FC84 : E7 07               	DW	ROTHL			;und anzeigen
    2801/    FC86 : E7 02               LOR9:	DW	RPRST
    2802/    FC88 : 0D                  	DB	CR
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 48 - 18.7.2004 19:30:37


    2803/    FC89 : 8D                  	DB	CR+80H
    2804/    FC8A :                     ;
    2805/    FC8A : CD 24 FD            	CALL	HADR			;Adressen kopieren
    2806/    FC8D : ED B0               	LDIR
    2807/    FC8F :                     ;
    2808/    FC8F : 2A E0 00            	LD	HL,(AADR)
    2809/    FC92 : 3A 27 00            LOR10:	LD	A,(KYBTS)		;KYBTS merken
    2810/    FC95 : 32 23 00            	LD	(ARG3),A
    2811/    FC98 : CB B7               	RES	6,A			;SLOW-Mode aus
    2812/    FC9A : 32 27 00            	LD	(KYBTS),A
    2813/    FC9D : CD 30 F1            	CALL	INKEY			;Tastaturabfrage
    2814/    FCA0 : 08                  	EX	AF, AF'
    2815/    FCA1 : 3A 23 00            	LD	A,(ARG3)
    2816/    FCA4 : 32 27 00            	LD	(KYBTS),A		;KYBTS rueckspeichern
    2817/    FCA7 : 08                  	EX	AF, AF'
    2818/    FCA8 : FE 03               	CP	A, 3			;<STOP>?
    2819/    FCAA : C8                  	RET	Z			;ja --> Abbruch
    2820/    FCAB :                     ;
    2821/    FCAB : CD 9D FD            	CALL	OADR1			;Anzeige Blockadresse
    2822/    FCAE : =>FALSE             	IF	MONTYP == "BROSIG_2028_K7659"
    2823/    FCAE :                     	LD	A,(BPADR)		;wenn Mode 0, so lesen
    2824/    FCAE :                     	OR	A			;ohne Fehlerbehandlung
    2825/    FCAE :                     	PUSH	AF
    2826/    FCAE :                     	CALL	Z, BLMKF
    2827/    FCAE :                     	POP	AF
    2828/    FCAE :                     	CALL	NZ, BLMK		;sonst mit
    2829/    FCAE : =>TRUE              	ELSEIF	(MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    2830/    FCAE : CD D6 FC            	CALL	BLMK			;Block lesen
    2831/    FCB1 :                     	ENDIF
    2832/    FCB1 :                     ;
    2833/    FCB1 : EB                  	EX	DE,HL			;Test, ob Ende erreicht
    2834/    FCB2 : 2A E2 00            	LD	HL,(EADR)
    2835/    FCB5 : A7                  	AND	A, A
    2836/    FCB6 : ED 52               	SBC	HL,DE
    2837/    FCB8 : EB                  	EX	DE,HL
    2838/    FCB9 : 30 D7               	JR	NC, LOR10		;nein --> weiterlesen
    2839/    FCBB :                     ;
    2840/    FCBB : 2A E2 00            	LD	HL,(EADR)		;Anzeige der EADR
    2841/    FCBE : CD 9D FD            	CALL	OADR1
    2842/    FCC1 : CD B1 FD            	CALL	OADR3			;Cursorpos. korrigieren
    2843/    FCC4 :                     ;
    2844/    FCC4 : 2A E4 00            	LD	HL,(SADR)
    2845/    FCC7 : 22 23 00            	LD	(ARG3),HL
    2846/    FCCA : 3A EC 00            	LD	A,(TYP)
    2847/    FCCD : FE 43               	CP	A, 'C'			;ist Typ="C"?
    2848/    FCCF : C0                  	RET	NZ			;nein --> Abbruch
    2849/    FCD0 : FD                  	DB	0FDH
    2850/    FCD1 : 7D                  	LD	A,L			;LD	A,LY
    2851/    FCD2 : FE 20               	CP	A, ' '			;ist Selbstart freigeg.?
    2852/    FCD4 : C0                  	RET	NZ			;nein --> Abbruch
    2853/    FCD5 : E9                  	JP	(HL)			;sonst Programmstart
    2854/    FCD6 :                     ;
    2855/    FCD6 :                     ;Block lesen mit Header
    2856/    FCD6 :                     ;
    2857/    FCD6 : CD C0 FD            BLMK:	CALL	HLBLK
    2858/    FCD9 : 28 1E               	JR	Z, BLMK3		;wenn ohne Fehler
    2859/    FCDB :                     ;
    2860/    FCDB : CD 7D FD            	CALL	ERBAD			;Ausgabe "bad record"
    2861/    FCDE : 01 39 00            	LD	BC,0039H
    2862/    FCE1 : CD BA F9            	CALL	BEEP
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 49 - 18.7.2004 19:30:37


    2863/    FCE4 : E7 01               BLMK1:	DW	RINCH			;Tastaturabfrage
    2864/    FCE6 : FE 03               	CP	A, 3			;>STOP< ?
    2865/    FCE8 : 28 38               	JR	Z, BLMK5		;ja --> zurueck
    2866/    FCEA : E7 02               	DW	RPRST
    2867/    FCEC : 0D                  	DB	CR
    2868/    FCED : 8D                  	DB	CR+80H
    2869/    FCEE : 01 20 00            BLMK2:	LD	BC,0020H
    2870/    FCF1 : A7                  	AND	A, A
    2871/    FCF2 : ED 42               	SBC	HL,BC			;Adresse Fehlerblock
    2872/    FCF4 : CD C0 FD            	CALL	HLBLK			;Block neu lesen
    2873/    FCF7 : 20 F5               	JR	NZ, BLMK2		;wenn Fehler
    2874/    FCF9 :                     ;
    2875/    FCF9 : 7A                  BLMK3:	LD	A,D
    2876/    FCFA : A3                  	AND	A, E
    2877/    FCFB : 3C                  	INC	A
    2878/    FCFC : 28 24               	JR	Z, BLMK5		;wenn FFFF-Block gelesen
    2879/    FCFE : E5                  	PUSH	HL
    2880/    FCFF : EB                  	EX	DE,HL
    2881/    FD00 : A7                  	AND	A, A
    2882/    FD01 : ED 5B 25 00         	LD	DE,(SOIL2)
    2883/    FD05 : ED 52               	SBC	HL,DE
    2884/    FD07 : E1                  	POP	HL
    2885/    FD08 : 28 10               	JR	Z, BLMK4		;wenn richtigen Block gelesen
    2886/    FD0A : 38 E2               	JR	C, BLMK2		;wenn
    2887/    FD0C : CD 86 FD            	CALL	ERREC			;Ausgabe "record"
    2888/    FD0F : CD 90 FD            	CALL	ERNF			;"not found"
    2889/    FD12 : 01 40 00            	LD	BC,0040H
    2890/    FD15 : CD BA F9            	CALL	BEEP
    2891/    FD18 : 18 CA               	JR	BLMK1			;erneut lesen
    2892/    FD1A :                     ;
    2893/    FD1A : E5                  BLMK4:	PUSH	HL
    2894/    FD1B : 21 20 00            	LD	HL,0020H		;neue Adresse
    2895/    FD1E : 19                  	ADD	HL,DE
    2896/    FD1F : 22 25 00            	LD	(SOIL2),HL		;uebergeben
    2897/    FD22 : E1                  BLMK5:	POP	HL
    2898/    FD23 : C9                  	RET
    2899/    FD24 :                     
    2900/    FD24 : =>FALSE             	IF	MONTYP == "BROSIG_2028_K7659"
    2901/    FD24 :                     ;
    2902/    FD24 :                     ;Block lesen ohne Fehlerbehandlung
    2903/    FD24 :                     ;
    2904/    FD24 :                     BLMKF:	CALL	HLBLK			;Block lesen
    2905/    FD24 :                     	RET	Z			;wenn kein Fehler
    2906/    FD24 :                     	DB	0FDH			;Selbstart verbieten (A=0)
    2907/    FD24 :                     	LD	L,A			;LD	LY,A
    2908/    FD24 :                     	CALL	ERBAD			;Fehlermeldung
    2909/    FD24 :                     	RET
    2910/    FD24 :                     	ENDIF
    2911/    FD24 :                     ;
    2912/    FD24 :                     ;Uebergibt Adressen fuer Kopfblockaufbereitung
    2913/    FD24 :                     ;
    2914/    FD24 : 21 E0 00            HADR:	LD	HL,AADR
    2915/    FD27 : 11 1B 00            	LD	DE,ARG1
    2916/    FD2A : 01 04 00            	LD	BC,4
    2917/    FD2D : C9                  	RET
    2918/    FD2E :                     ;
    2919/    FD2E :                     ;Abfrage Typ und Namen
    2920/    FD2E :                     ;
    2921/    FD2E : FD                  INKPF:	DB	0FDH
    2922/    FD2F : 7C                  	LD	A,H			;LD	A,HY
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 50 - 18.7.2004 19:30:37


    2923/    FD30 : B7                  	OR	A
    2924/    FD31 : 20 13               	JR	NZ, INKP2		;wenn Typ vorgeben
    2925/    FD33 :                     ;Abfrage Typ
    2926/    FD33 : E7 02               	DW	RPRST
    2927/    FD35 : 0D                  	DB	CR
    2928/    FD36 : 74 79 70            	DB	"typ"
    2929/    FD39 : BA                  	DB	0BAH			;":"
    2930/    FD3A : E7 01               	DW	RINCH
    2931/    FD3C : FE 20               	CP	A, ' '
    2932/    FD3E : 30 02               	JR	NC, INKP1		;Steuerzeichen werden zu
    2933/    FD40 : 3E 20               	LD	A,' '			;Space gewandelt
    2934/    FD42 : E7 00               INKP1:	DW	ROUTC
    2935/    FD44 : FD                  	DB	0FDH			;LD HY,A
    2936/    FD45 : 67                  	LD	H,A			;Typ merken
    2937/    FD46 :                     ;Abfrage Filename
    2938/    FD46 : E7 02               INKP2:	DW	RPRST
    2939/    FD48 : 20 66 69 6C 65 6E   	DB	" filename"
                    61 6D 65 
    2940/    FD51 : BA                  	DB	0BAH			;":"
    2941/    FD52 : 2A 2B 00            	LD	HL,(CUPOS)
    2942/    FD55 : 22 16 00            	LD	(SOIL),HL
    2943/    FD58 : 0E FF               	LD	C,0FFH			;C:=Zeichenzaehler
    2944/    FD5A : 0C                  INKP3:	INC	C
    2945/    FD5B : E7 01               	DW	RINCH			;Zeichen eingeben
    2946/    FD5D : FE 03               	CP	A, 3			;>STOP< ?
    2947/    FD5F : CA AE FD            	JP	Z, OADR2		;ja --> Abbruch
    2948/    FD62 : FE 08               	CP	A, 8			;Cursor links
    2949/    FD64 : 20 05               	JR	NZ, INKP5		;nein
    2950/    FD66 : 0D                  	DEC	C			;ein Zeichen zurueck
    2951/    FD67 : FA 5A FD            	JP	M, INKP3		;wenn linker Rand
    2952/    FD6A : 0D                  INKP4:	DEC	C			;auf vorhergehendes Zeichen
    2953/    FD6B : E7 00               INKP5:	DW	ROUTC			;Zeichen anzeigen
    2954/    FD6D : FE 0D               	CP	A, CR			;>ENTER< ?
    2955/    FD6F : 79                  	LD	A,C
    2956/    FD70 : 32 15 00            	LD	(SHILO),A		;Zeichenanzahl uebergeben
    2957/    FD73 : C8                  	RET	Z			;ja --> zurueck
    2958/    FD74 : 3E 10               	LD	A,16
    2959/    FD76 : B9                  	CP	A, C			;max. Namenlaenge erreicht?
    2960/    FD77 : 3E 08               	LD	A,8
    2961/    FD79 : 20 DF               	JR	NZ, INKP3
    2962/    FD7B : 18 ED               	JR	INKP4			;ja --> ein Zeichen zurueck
    2963/    FD7D :                     ;
    2964/    FD7D :                     ;Fehlermeldungen
    2965/    FD7D :                     ;
    2966/    FD7D : CD B1 FD            ERBAD:	CALL	OADR3			;Cursorpos. korrigieren
    2967/    FD80 : E7 02               	DW	RPRST
    2968/    FD82 : 62 61 64            	DB	"bad"
    2969/    FD85 : A0                  	DB	0A0H
    2970/    FD86 :                     ;
    2971/    FD86 : E7 02               ERREC:	DW	RPRST
    2972/    FD88 : 72 65 63 6F 72 64   	DB	"record"
    2973/    FD8E : A0                  	DB	0A0H
    2974/    FD8F : C9                  	RET
    2975/    FD90 :                     ;
    2976/    FD90 : E7 02               ERNF:	DW	RPRST
    2977/    FD92 : 6E 6F 74 20 66 6F   	DB	"not found"
                    75 6E 64 
    2978/    FD9B : 8D                  	DB	CR+80H
    2979/    FD9C : C9                  	RET
    2980/    FD9D :                     ;
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 51 - 18.7.2004 19:30:37


    2981/    FD9D :                     ;Ausgabe HL, Cursor loeschen und Cursor zurueck
    2982/    FD9D :                     ;
    2983/    FD9D : D5                  OADR1:	PUSH	DE
    2984/    FD9E : E5                  	PUSH	HL
    2985/    FD9F : ED 5B 2B 00         	LD	DE,(CUPOS)
    2986/    FDA3 : E7 07               	DW	ROTHL
    2987/    FDA5 : 2A 2B 00            	LD	HL,(CUPOS)
    2988/    FDA8 : 36 20               	LD	(HL),' '
    2989/    FDAA : ED 53 2B 00         	LD	(CUPOS),DE
    2990/    FDAE : E1                  OADR2:	POP	HL
    2991/    FDAF : D1                  	POP	DE
    2992/    FDB0 : C9                  	RET
    2993/    FDB1 :                     ;
    2994/    FDB1 :                     ;Cursor 5 Zeichen vorruecken
    2995/    FDB1 :                     ;
    2996/    FDB1 : E5                  OADR3:	PUSH	HL
    2997/    FDB2 : C5                  	PUSH	BC
    2998/    FDB3 : 2A 2B 00            	LD	HL,(CUPOS)
    2999/    FDB6 : 01 05 00            	LD	BC,0005H
    3000/    FDB9 : 09                  	ADD	HL,BC
    3001/    FDBA : 22 2B 00            	LD	(CUPOS),HL
    3002/    FDBD : C1                  	POP	BC
    3003/    FDBE : E1                  	POP	HL
    3004/    FDBF : C9                  	RET
    3005/    FDC0 :                     ;
    3006/    FDC0 :                     ;Block lesen mit Headerkopf
    3007/    FDC0 :                     ;
    3008/    FDC0 : CD BC F4            HLBLK:	CALL	LOA24			;synchronisieren
    3009/    FDC3 : CD C6 F4            	CALL	LOA25			;Flanke abwarten
    3010/    FDC6 : 0E 07               	LD	C,7
    3011/    FDC8 : 11 10 09            HLB1:	LD	DE,0910H
    3012/    FDCB : 3E 07               	LD	A,7
    3013/    FDCD : 3D                  HLB2:	DEC	A
    3014/    FDCE : 20 FD               	JR	NZ, HLB2
    3015/    FDD0 : CD BC F4            	CALL	LOA24			;synchronisieren
    3016/    FDD3 : CD BC F4            HLB3:	CALL	LOA24			;Flanke?
    3017/    FDD6 : 20 E8               	JR	NZ, HLBLK		;nein --> kein Vorton
    3018/    FDD8 : 15                  	DEC	D
    3019/    FDD9 : 20 F8               	JR	NZ, HLB3
    3020/    FDDB : 0D                  	DEC	C
    3021/    FDDC : 28 0C               	JR	Z, HLB5
    3022/    FDDE : DB 02               HLB4:	IN	A, 2
    3023/    FDE0 : A8                  	XOR	B
    3024/    FDE1 : CB 77               	BIT	6,A
    3025/    FDE3 : 20 E3               	JR	NZ, HLB1
    3026/    FDE5 : 1D                  	DEC	E
    3027/    FDE6 : 20 F6               	JR	NZ, HLB4
    3028/    FDE8 : 18 D6               	JR	HLBLK
    3029/    FDEA :                     ;Synchronisierimpulse lesen
    3030/    FDEA : CD C6 F4            HLB5:	CALL	LOA25			;Flanke abwarten
    3031/    FDED : 3E 44               	LD	A,44H
    3032/    FDEF : 3D                  HLB6:	DEC	A
    3033/    FDF0 : 20 FD               	JR	NZ, HLB6
    3034/    FDF2 : CD BC F4            	CALL	LOA24			;Flanke?
    3035/    FDF5 : 20 F3               	JR	NZ, HLB5		;wenn nicht
    3036/    FDF7 : CD C6 F4            	CALL	LOA25			;Flanke abwarten
    3037/    FDFA : 3E 1E               	LD	A,1EH
    3038/    FDFC : 3D                  HLB7:	DEC	A
    3039/    FDFD : 20 FD               	JR	NZ, HLB7
    3040/    FDFF :                     ;2 Byte Kopf lesen
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 52 - 18.7.2004 19:30:37


    3041/    FDFF : CD 9D F4            	CALL	LOA19			;2 Byte lesen nach DE
    3042/    FE02 : ED 53 13 00         	LD	(DATA),DE		;und merken
    3043/    FE06 :                     ;20H Datenbyte lesen
    3044/    FE06 : D5                  	PUSH	DE
    3045/    FE07 : DD E1               	POP	IX
    3046/    FE09 : 3E 1A               	LD	A,1AH
    3047/    FE0B : 0E 10               	LD	C,10H			;10Hx 2 Byte
    3048/    FE0D : 3D                  HLB8:	DEC	A
    3049/    FE0E : 20 FD               	JR	NZ, HLB8
    3050/    FE10 : CD 9D F4            HLB9:	CALL	LOA19			;lesen nach DE
    3051/    FE13 : DD 19               	ADD	IX,DE			;Pruefsumme bilden
    3052/    FE15 : C5                  	PUSH	BC
    3053/    FE16 : 4D                  	LD	C,L
    3054/    FE17 : 44                  	LD	B,H
    3055/    FE18 : 2A 1D 00            	LD	HL,(ARG2)
    3056/    FE1B : AF                  	XOR	A
    3057/    FE1C : ED 42               	SBC	HL,BC			;Endadresse erreicht?
    3058/    FE1E : 69                  	LD	L,C
    3059/    FE1F : 60                  	LD	H,B
    3060/    FE20 : C1                  	POP	BC
    3061/    FE21 : 38 05               	JR	C, HLB10		;ja --> Leseende
    3062/    FE23 : 73                  	LD	(HL),E
    3063/    FE24 : 23                  	INC	HL
    3064/    FE25 : 72                  	LD	(HL),D
    3065/    FE26 : 18 06               	JR	HLB12
    3066/    FE28 :                     ;
    3067/    FE28 : 3E 01               HLB10:	LD	A,1
    3068/    FE2A : 3D                  HLB11:	DEC	A
    3069/    FE2B : 20 FD               	JR	NZ, HLB11
    3070/    FE2D : 23                  	INC	HL
    3071/    FE2E :                     ;
    3072/    FE2E : 23                  HLB12:	INC	HL
    3073/    FE2F : 0D                  	DEC	C
    3074/    FE30 : 28 07               	JR	Z, HLB14		;wenn Blockende
    3075/    FE32 : 3E 12               	LD	A,12H
    3076/    FE34 : 3D                  HLB13:	DEC	A
    3077/    FE35 : 20 FD               	JR	NZ, HLB13
    3078/    FE37 : 18 D7               	JR	HLB9			;sonst weiterlesen
    3079/    FE39 :                     ;
    3080/    FE39 : 3E 12               HLB14:	LD	A,12H
    3081/    FE3B : 3D                  HLB15:	DEC	A
    3082/    FE3C : 20 FD               	JR	NZ, HLB15
    3083/    FE3E : CD 9D F4            	CALL	LOA19			;Pruefsumme lesen
    3084/    FE41 : EB                  	EX	DE,HL
    3085/    FE42 : DD E5               	PUSH	IX
    3086/    FE44 : C1                  	POP	BC
    3087/    FE45 : AF                  	XOR	A
    3088/    FE46 : ED 42               	SBC	HL,BC			;Z<>0 Ladefehler
    3089/    FE48 : EB                  	EX	DE,HL
    3090/    FE49 : ED 5B 13 00         	LD	DE,(DATA)		;Kopf uebergeben
    3091/    FE4D : C9                  	RET
    3092/    FE4E :                     ;
    3093/    FE4E :                     ;Suchen Kopfblock
    3094/    FE4E :                     ;
    3095/    FE4E : E5                  SUCHK:	PUSH	HL
    3096/    FE4F : D5                  	PUSH	DE
    3097/    FE50 : C5                  	PUSH	BC
    3098/    FE51 : E7 04               SUCH1:	DW	RINKY			;Tastaturabfrage
    3099/    FE53 : FE 03               	CP	A, 3			;>STOP< ?
    3100/    FE55 : 28 18               	JR	Z, SUCH3		;ja --> Abbruch
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 53 - 18.7.2004 19:30:37


    3101/    FE57 : 3E FF               	LD	A,0FFH			;vollen Block
    3102/    FE59 : 32 1D 00            	LD	(ARG2),A
    3103/    FE5C : 21 E0 00            	LD	HL,AADR			;nach AADR
    3104/    FE5F : CD C0 FD            	CALL	HLBLK			;Block lesen
    3105/    FE62 :                     ;
    3106/    FE62 : 06 03               	LD	B,3			;Test ob Kopfblock
    3107/    FE64 : 21 ED 00            	LD	HL,SIGNS
    3108/    FE67 : 7E                  SUCH2:	LD	A,(HL)
    3109/    FE68 : FE D3               	CP	A, 0D3H
    3110/    FE6A : 23                  	INC	HL
    3111/    FE6B : 20 E4               	JR	NZ, SUCH1		;kein Kopfblock
    3112/    FE6D : 10 F8               	DJNZ	SUCH2			;weitertesten
    3113/    FE6F : C1                  SUCH3:	POP	BC
    3114/    FE70 : D1                  	POP	DE
    3115/    FE71 : E1                  	POP	HL
    3116/    FE72 : C9                  	RET
    3117/    FE73 :                     ;
    3118/    FE73 :                     ;Aufbereitung Kopfpuffer
    3119/    FE73 :                     ;
    3120/    FE73 : E5                  AKP:	PUSH	HL
    3121/    FE74 : D5                  	PUSH	DE
    3122/    FE75 : C5                  	PUSH	BC
    3123/    FE76 : CD 1D FB            	CALL	AKP0			;Aufbereitung unter HSAVE
    3124/    FE79 : C1                  	POP	BC
    3125/    FE7A : D1                  	POP	DE
    3126/    FE7B : E1                  	POP	HL
    3127/    FE7C : C9                  	RET
    3128/    FE7D :                     
    3129/    FE7D : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
    3130/    FE7D :                     ;
    3131/    FE7D :                     ;logischen Druckertreiber ruecksetzen
    3132/    FE7D :                     ;
    3133/    FE7D :                     DRDEL:	PUSH	HL
    3134/    FE7D :                     	LD	HL,DRZSP
    3135/    FE7D :                     	LD	(HL),0
    3136/    FE7D :                     	INC	HL
    3137/    FE7D :                     	LD	(HL),0
    3138/    FE7D :                     	INC	HL
    3139/    FE7D :                     	LD	(HL),0
    3140/    FE7D :                     	POP	HL
    3141/    FE7D :                     	RET
    3142/    FE7D :                     ;
    3143/    FE7D :                     ;Bildschirmkopie drucken
    3144/    FE7D :                     ;
    3145/    FE7D :                     BSDR:	CALL	DRDEL			;Drucker ruecksetzen
    3146/    FE7D :                     	PUSH	DE
    3147/    FE7D :                     	PUSH	HL
    3148/    FE7D :                     	LD	HL,BWS			;erste Adresse
    3149/    FE7D :                     	LD	DE,0
    3150/    FE7D :                     	LD	A,CR
    3151/    FE7D :                     	CALL	RDRAK			;Wagenruecklauf
    3152/    FE7D :                     BSDR1:	LD	A,(HL)
    3153/    FE7D :                     	CP	A, 0FFH			;Cursor erreicht?
    3154/    FE7D :                     	JR	Z, BSDR2		;ja
    3155/    FE7D :                     	CALL	RDRAK			;Druckerausgabe
    3156/    FE7D :                     	INC	HL			;naechstes Zeichen
    3157/    FE7D :                     	INC	E
    3158/    FE7D :                     	LD	A,E
    3159/    FE7D :                     	CP	A, 20H
    3160/    FE7D :                     	JR	NZ, BSDR1		;kein Zeileende
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 54 - 18.7.2004 19:30:37


    3161/    FE7D :                     	LD	E,0
    3162/    FE7D :                     	LD	A,CR
    3163/    FE7D :                     	CALL	RDRAK			;Wagenruecklauf
    3164/    FE7D :                     	LD	A,0AH
    3165/    FE7D :                     	CALL	RDRAK			;Zeilenvorschub
    3166/    FE7D :                     	INC	D
    3167/    FE7D :                     	LD	A,D
    3168/    FE7D :                     	CP	A, 20H
    3169/    FE7D :                     	JR	NZ, BSDR1		;kein BWS-Ende
    3170/    FE7D :                     BSDR2:	POP	HL
    3171/    FE7D :                     	POP	DE
    3172/    FE7D :                     	XOR	A
    3173/    FE7D :                     	RET
    3174/    FE7D :                     
    3175/    FE7D : =>TRUE              	ELSEIF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    3176/    FE7D :                     ;
    3177/    FE7D :                     ;******************************************************
    3178/    FE7D :                     ; Druckertreiber           CENTONICS
    3179/    FE7D :                     ;******************************************************
    3180/    FE7D :                     ;
    3181/    FE7D : 3A 1B 00            DRINI:	LD	A,(ARG1)	
    3182/    FE80 : 32 35 00            	LD	(DRZSP),A		;fuer Joystickeinbindung
    3183/    FE83 : B7                  	OR	A	
    3184/    FE84 : C0                  	RET	NZ	
    3185/    FE85 : 21 8C FE            	LD	HL,INLST	
    3186/    FE88 : CD AE FE            	CALL	LSTOT	
    3187/    FE8B : C9                  	RET		
    3188/    FE8C :                     ;
    3189/    FE8C : 07                  INLST:	DB	7			;Anzahl
    3190/    FE8D : 1B                  	DB	ESC	
    3191/    FE8E : 40                  	DB	'@'	
    3192/    FE8F : 1B                  	DB	ESC	
    3193/    FE90 : 38                  	DB	'8'			;PE aus
    3194/    FE91 : 1B                  	DB	ESC	
    3195/    FE92 : 6C                  	DB	'l'	
    3196/    FE93 : 08                  	DB	8			;linker Rand
    3197/    FE94 :                     ;
    3198/    FE94 : F5                  DRZEL:	PUSH	AF	
    3199/    FE95 : 3A 1B 00            	LD	A,(ARG1)	
    3200/    FE98 : CD 9D FE            	CALL	DRAKK	
    3201/    FE9B : F1                  	POP	AF	
    3202/    FE9C : C9                  	RET		
    3203/    FE9D :                     ;
    3204/    FE9D : F5                  DRAKK:	PUSH	AF	
    3205/    FE9E : FE 1E               	CP	A, NL			;NL-->CRLF
    3206/    FEA0 : 20 07               	JR	NZ, DRAK1	
    3207/    FEA2 : 3E 0D               	LD	A,CR	
    3208/    FEA4 : CD B7 FE            	CALL	ZEIDR	
    3209/    FEA7 : 3E 0A               	LD	A,LF	
    3210/    FEA9 : CD B7 FE            DRAK1:	CALL	ZEIDR	
    3211/    FEAC : F1                  	POP	AF	
    3212/    FEAD : C9                  	RET		
    3213/    FEAE :                     ;
    3214/    FEAE : 46                  LSTOT:	LD	B,(HL)			;<HL>-Liste
    3215/    FEAF : 23                  LST1:	INC	HL	
    3216/    FEB0 : 7E                  	LD	A,(HL)	
    3217/    FEB1 : CD B7 FE            	CALL	ZEIDR	
    3218/    FEB4 : 10 F9               	DJNZ	LST1		;<B> mal
    3219/    FEB6 : C9                  	RET		
    3220/    FEB7 :                     ;
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 55 - 18.7.2004 19:30:37


    3221/    FEB7 : F5                  ZEIDR:	PUSH	AF	
    3222/    FEB8 : F3                  	DI		
    3223/    FEB9 : ED 57               	LD	A,I	
    3224/    FEBB : 32 0B 00            	LD	(BPADR),A		;retten I-Register
    3225/    FEBE : 3E 0F               	LD	A,0FH			;PIO - Mode 0
    3226/    FEC0 : D3 01               	OUT	1, A	
    3227/    FEC2 : 3E B4               	LD	A,0B4H			;L(INTAB)
    3228/    FEC4 : D3 01               	OUT	1, A	
    3229/    FEC6 : 3E 83               	LD	A,083H			;INT ein
    3230/    FEC8 : D3 01               	OUT	1, A	
    3231/    FECA : 3E FF               	LD	A,0FFH			;H(INTAB+1)
    3232/    FECC : ED 47               	LD	I,A	
    3233/    FECE :                     ;
    3234/    FECE : F1                  	POP	AF	
    3235/    FECF : D3 00               	OUT	0		, A	;ausgeben
    3236/    FED1 : 37                  	SCF		
    3237/    FED2 : FB                  	EI		
    3238/    FED3 : 38 FE               ZEID1:	JR	C, ZEID1	
    3239/    FED5 : 3A 0B 00            	LD	A,(BPADR)	
    3240/    FED8 : ED 47               	LD	I,A	
    3241/    FEDA : C9                  	RET		
    3242/    FEDB :                     ;
    3243/    FEDB : F3                  INTS:	DI		
    3244/    FEDC : B7                  	OR	A		;Cy=0
    3245/    FEDD : ED 4D               	RETI		
    3246/    FEDF :                     	
    3247/    FEDF : =>FALSE             	IF	MONTYP <> "VP_202C_K7659"
    3248/    FEDF :                     ;
    3249/    FEDF :                     ;Bildschirmkopie drucken
    3250/    FEDF :                     ;
    3251/    FEDF :                     BSDR:	PUSH	DE	
    3252/    FEDF :                     	PUSH	HL	
    3253/    FEDF :                     	LD	HL,BWS			;erste Adresse
    3254/    FEDF :                     	LD	DE,0	
    3255/    FEDF :                     	LD	A,CR	
    3256/    FEDF :                     	CALL	DRAKK			;Wagenruecklauf
    3257/    FEDF :                     BSDR1:	LD	A,(HL)	
    3258/    FEDF :                     	CALL	DRAKK			;Druckerausgabe
    3259/    FEDF :                     	INC	HL			;naechstes Zeichen
    3260/    FEDF :                     	INC	E	
    3261/    FEDF :                     	LD	A,E	
    3262/    FEDF :                     	CP	A, 20H	
    3263/    FEDF :                     	JR	NZ, BSDR1			;kein Zeileende
    3264/    FEDF :                     	LD	E,0	
    3265/    FEDF :                     	LD	A,CR	
    3266/    FEDF :                     	CALL	DRAKK			;Wagenruecklauf
    3267/    FEDF :                     	LD	A,0AH	
    3268/    FEDF :                     	CALL	DRAKK			;Zeilenvorschub
    3269/    FEDF :                     	INC	D	
    3270/    FEDF :                     	LD	A,D	
    3271/    FEDF :                     	CP	A, 20H	
    3272/    FEDF :                     	JR	NZ, BSDR1			;kein BWS-Ende
    3273/    FEDF :                     BSDR2:	POP	HL	
    3274/    FEDF :                     	POP	DE	
    3275/    FEDF :                     	XOR	A	
    3276/    FEDF :                     	RET		
    3277/    FEDF :                     	
    3278/    FEDF :                     	ENDIF
    3279/    FEDF :                     
    3280/    FEDF :                     	ENDIF
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 56 - 18.7.2004 19:30:37


    3281/    FEDF :                     
    3282/    FEDF :                     ;
    3283/    FEDF :                     ;Ausgabe Ton, in C steht die Tonlaenge
    3284/    FEDF :                     ;
    3285/    FEDF : C5                  SOUND:	PUSH	BC
    3286/    FEE0 : 3E 80               	LD	A,80H
    3287/    FEE2 : D3 00               	OUT	0, A			;Ausgabe Userport
    3288/    FEE4 : D3 02               	OUT	2, A			;Ausgabe Tonbandbuchse
    3289/    FEE6 : 41                  	LD	B,C
    3290/    FEE7 : DD CB 00 46         SOUN1:	BIT	0,(IX+0)		;warten erste Halbperiode
    3291/    FEEB : 10 FA               	DJNZ	SOUN1
    3292/    FEED : AF                  	XOR	A
    3293/    FEEE :                     
    3294/    FEEE : =>FALSE             	IF MONTYP <> "VP_202C_K7659"
    3295/    FEEE :                     	LD	B,C
    3296/    FEEE :                     	OUT	0, A
    3297/    FEEE :                     	OUT	2, A
    3298/    FEEE : =>TRUE              	ELSEIF MONTYP == "VP_202C_K7659"
    3299/    FEEE : D3 00               	OUT	0, A
    3300/    FEF0 : D3 02               	OUT	2, A
    3301/    FEF2 : 41                  	LD	B,C
    3302/    FEF3 :                     	ENDIF
    3303/    FEF3 : DD CB 00 46         SOUN2:	BIT	0,(IX+0)		;warten zweite Halbperiode
    3304/    FEF7 : 10 FA               	DJNZ	SOUN2
    3305/    FEF9 : C1                  	POP	BC
    3306/    FEFA : C9                  	RET
    3307/    FEFB :                     ;
    3308/    FEFB :                     ;Joystickabfrage, Joystickmodul nach 'practic'
    3309/    FEFB :                     ;
    3310/    FEFB : 3E CF               GETST:	LD	A,0CFH			;PIO Mode 2
    3311/    FEFD : 0E 1F               	LD	C,1FH
    3312/    FEFF : D3 01               	OUT	1, A
    3313/    FF01 : 79                  	LD	A,C
    3314/    FF02 : D3 01               	OUT	1, A
    3315/    FF04 : 3E 20               	LD	A,20H			;linker Joystick
    3316/    FF06 : D3 00               	OUT	0, A
    3317/    FF08 : DB 00               	IN	A, 0
    3318/    FF0A : A1                  	AND	A, C
    3319/    FF0B : 37                  	SCF
    3320/    FF0C : C8                  	RET	Z			;Cy=1 --> kein Modul
    3321/    FF0D : 2F                  	CPL
    3322/    FF0E : A1                  	AND	A, C
    3323/    FF0F : 47                  	LD	B,A
    3324/    FF10 : 3E 40               	LD	A,40H			;rechter Joystick
    3325/    FF12 : D3 00               	OUT	0, A
    3326/    FF14 : DB 00               	IN	A, 0
    3327/    FF16 : 2F                  	CPL
    3328/    FF17 : A1                  	AND	A, C
    3329/    FF18 : 4F                  	LD	C,A
    3330/    FF19 : B0                  	OR	B			;Z=0 --> keine Taste gedrueckt
    3331/    FF1A : C9                  	RET
    3332/    FF1B :                     
    3333/    FF1B : =>TRUE              	IF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    3334/    FF1B :                     ;
    3335/    FF1B :                     ;Joystickeinbindung
    3336/    FF1B :                     ;
    3337/    FF1B : CD 00 F8            JOYIN:	CALL	INKY			;Tastatureingabe
    3338/    FF1E : C0                  	RET	NZ	;wenn Taste gedrueckt
    3339/    FF1F : 3A 35 00            	LD	A,(DRZSP)	
    3340/    FF22 : B7                  	OR	A	
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 57 - 18.7.2004 19:30:38


    3341/    FF23 : C8                  	RET	Z	;kein Joy-Modus
    3342/    FF24 :                     ;
    3343/    FF24 : C5                  	PUSH	BC	
    3344/    FF25 : CD FB FE            	CALL	GETST	
    3345/    FF28 : 3E 20               	LD	A,20H		
    3346/    FF2A : CB 60               	BIT	4,B	
    3347/    FF2C : 20 1C               	JR	NZ, JOYI1	
    3348/    FF2E : 3E 20               	LD	A,20H		
    3349/    FF30 : CB 60               	BIT	4,B	
    3350/    FF32 : 20 16               	JR	NZ, JOYI1	
    3351/    FF34 : 3E 0B               	LD	A,0BH		
    3352/    FF36 : CB 58               	BIT	3,B	
    3353/    FF38 : 20 10               	JR	NZ, JOYI1	
    3354/    FF3A : 3D                  	DEC	A	
    3355/    FF3B : CB 50               	BIT	2,B	
    3356/    FF3D : 20 0B               	JR	NZ, JOYI1	
    3357/    FF3F : 3D                  	DEC	A	
    3358/    FF40 : CB 48               	BIT	1,B	
    3359/    FF42 : 20 06               	JR	NZ, JOYI1	
    3360/    FF44 : 3D                  	DEC	A	
    3361/    FF45 : CB 40               	BIT	0,B	
    3362/    FF47 : 20 01               	JR	NZ, JOYI1	
    3363/    FF49 : AF                  	XOR	A	
    3364/    FF4A : 32 04 00            JOYI1:	LD	(LAKEY),A	
    3365/    FF4D : C1                  	POP	BC	
    3366/    FF4E : C9                  	RET		
    3367/    FF4F :                     
    3368/    FF4F :                     	ENDIF
    3369/    FF4F :                     ;
    3370/    FF4F :                     ;Initialisieren Zsatzmonitor
    3371/    FF4F :                     ;
    3372/    FF4F : 21 5B FF            ZMINI:	LD	HL,ZMTAB
    3373/    FF52 : 11 B0 00            	LD	DE,USRKD
    3374/    FF55 : 01 09 00            	LD	BC,K7STG-ZMTAB		;Laenge
    3375/    FF58 : ED B0               	LDIR
    3376/    FF5A : C9                  	RET
    3377/    FF5B :                     ;
    3378/    FF5B :                     ;
    3379/    FF5B :                     ;
    3380/    FF5B : 4C                  ZMTAB:	DB	"L"			;Header-Load
    3381/    FF5C : C9 FB               	DW	LOR0
    3382/    FF5E : 53                  	DB	"S"			;Header-Save
    3383/    FF5F : EB FA               	DW	SAR0
    3384/    FF61 : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
    3385/    FF61 :                     	DB	"D"			;Druckertreiber ruecksetzen
    3386/    FF61 :                     	DW	RDDEL
    3387/    FF61 :                     	ENDIF
    3388/    FF61 : 49                  	DB	"I"			;Druckertreiber initialisieren
    3389/    FF62 : CD FF               	DW	RDINI
    3390/    FF64 :                     ;
    3391/    FF64 :                     ;Stringtabelle fuer Inkey-Routine
    3392/    FF64 :                     ;
    3393/    FF64 :                     
    3394/    FF64 : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
    3395/    FF64 :                     K7STG:	DB	81H
    3396/    FF64 :                     	DB	CR
    3397/    FF64 :                     	DB	"(C) Rainer Brosig,Florinstr.2c,"
    3398/    FF64 :                     	DB	"COSWIG,8270, V.5.4 FR 8.11.87"
    3399/    FF64 :                     	DB	82H
    3400/    FF64 :                     	DB	"GOSUB"
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 58 - 18.7.2004 19:30:38


    3401/    FF64 :                     	DB	83H
    3402/    FF64 :                     	DB	"CALL"
    3403/    FF64 :                     	DB	84H
    3404/    FF64 :                     	DB	"DATA"
    3405/    FF64 :                     	DB	85H
    3406/    FF64 :                     	DB	"EDIT"
    3407/    FF64 :                     	DB	88H
    3408/    FF64 :                     	DB	"FOR"
    3409/    FF64 :                     	DB	87H
    3410/    FF64 :                     	DB	"GOTO"
    3411/    FF64 :                     	DB	89H
    3412/    FF64 :                     	DB	"INPUT"
    3413/    FF64 :                     	DB	8AH
    3414/    FF64 :                     	DB	"CHR$("
    3415/    FF64 :                     	DB	9CH
    3416/    FF64 :                     	DB	"POKE"
    3417/    FF64 :                     	DB	8CH
    3418/    FF64 :                     	DB	"CLOAD",'"'
    3419/    FF64 :                     	DB	8BH
    3420/    FF64 :                     	DB	"NEXT"
    3421/    FF64 :                     	DB	8FH
    3422/    FF64 :                     	DB	"OUT"
    3423/    FF64 :                     	DB	8DH
    3424/    FF64 :                     	DB	"PRINTAT("
    3425/    FF64 :                     	DB	90H
    3426/    FF64 :                     	DB	"PRINT"
    3427/    FF64 :                     	DB	92H
    3428/    FF64 :                     	DB	"RUN"
    3429/    FF64 :                     	DB	95H
    3430/    FF64 :                     	DB	"RETURN"
    3431/    FF64 :                     	DB	86H
    3432/    FF64 :                     	DB	"CSAVE",'"'
    3433/    FF64 :                     	DB	94H
    3434/    FF64 :                     	DB	"LIST"
    3435/    FF64 :                     	DB	97H
    3436/    FF64 :                     	DB	"WINDOW"
    3437/    FF64 :                     	DB	99H
    3438/    FF64 :                     	DB	"INKEY$"
    3439/    FF64 :                     	DB	0
    3440/    FF64 :                     
    3441/    FF64 :                     	db	26h,0h,0h,60h,44h,24h,66h	; Füllbytes im Brosig-Monitor?
    3442/    FF64 :                     
    3443/    FF64 : =>TRUE              	ELSEIF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    3444/    FF64 :                     
    3445/    FF64 : 8C                  K7STG:	DB	8CH			;L
    3446/    FF65 : 48 4C 4F 41 44      	DB	"HLOAD"	
    3447/    FF6A : 86                  	DB	86H			;S
    3448/    FF6B : 48 53 41 56 45      	DB	"HSAVE"	
    3449/    FF70 : 97                  	DB	97H			;W
    3450/    FF71 : 57 49 4E 44 4F 57   	DB	"WINDOW:CLS"	
                    3A 43 4C 53 
    3451/    FF7B : 85                  	DB	85H			;E
    3452/    FF7C : 1B                  	DB	ESC			;1 Zoll Vorschub
    3453/    FF7D : 4E                  	DB	'N'	
    3454/    FF7E : 06                  	DB	6	
    3455/    FF7F : 1B                  	DB	ESC			;ELITE-Schrift
    3456/    FF80 : 4D                  	DB	'M'	
    3457/    FF81 : 01                  	DB	1	
    3458/    FF82 : 00                  	DB	0	
    3459/    FF83 :                     ;
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 59 - 18.7.2004 19:30:38


    3460/    FF83 :                     
    3461/    FF83 : =>TRUE              	IF MONTYP == "VP_202C_K7659"
    3462/    FF83 :                     ;
    3463/    FF83 :                     ;Umleitung RAM-Disk -- Kassette
    3464/    FF83 :                     ;
    3465/    FF83 : 32 0B 00            HDKAS:	LD	(BPADR),A
    3466/    FF86 : E7 02               	DW	RPRST
    3467/    FF88 : 0D                  	DB	CR
    3468/    FF89 : 43 61 73 73 65 74   	DB	"Cassette or Disk"
                    74 65 20 6F 72 20 
                    44 69 73 6B 
    3469/    FF99 : BA                  	DB	0BAH			;":"
    3470/    FF9A :                     ;
    3471/    FF9A : E7 01               HDKA1:	DW	RINCH
    3472/    FF9C : FE 43               	CP	A, 'C'
    3473/    FF9E : 28 05               	JR	Z, HDKA2		;Cy=0
    3474/    FFA0 : FE 44               	CP	A, 'D'
    3475/    FFA2 : 20 F6               	JR	NZ, HDKA1
    3476/    FFA4 : 37                  	SCF
    3477/    FFA5 :                     ;
    3478/    FFA5 : F5                  HDKA2:	PUSH	AF
    3479/    FFA6 : E7 00               	DW	ROUTC
    3480/    FFA8 : E7 02               	DW	RPRST
    3481/    FFAA : 8D                  	DB	CR+80H
    3482/    FFAB : F1                  	POP	AF
    3483/    FFAC :                     ;
    3484/    FFAC : 3A 0B 00            	LD	A,(BPADR)	
    3485/    FFAF : C9                  	RET			;Cy=1 RAM-Disk
    3486/    FFB0 :                     
    3487/    FFB0 :                     	ENDIF
    3488/    FFB0 :                     
    3489/    FFB0 : =FFB0H              P1END:	EQU	$		
    3490/    FFB0 :                     	
    3491/    FFB0 :                     	ENDIF
    3492/    FFB0 :                     ;
    3493/    FFB0 :                     ;Sprungverteiler
    3494/    FFB0 :                     ;
    3495/    FFB7 :                     	ORG	0FFB7H
    3496/    FFB7 :                     ;
    3497/    FFB7 : C9                  RRET:	RET
    3498/    FFB8 : C3 DF FE            	JP	SOUND			;Tonausgabe, eine Periode
    3499/    FFBB : C3 FB FE            	JP	GETST			;Joystikabfrage
    3500/    FFBE : C3 73 FE            	JP	AKP			;Aufbereitung Kopfpuffer
    3501/    FFC1 : C3 4E FE            	JP	SUCHK			;Kopfblock suchen
    3502/    FFC4 : C3 89 F3            	JP	BSMK			;Block schreiben
    3503/    FFC7 : C3 D6 FC            	JP	BLMK			;Block lesen
    3504/    FFCA : C3 B7 FE            RZEID:	JP	ZEIDR			;phys. Druckertreiber
    3505/    FFCD : C3 7D FE            RDINI:	JP	DRINI			;Druckertreiber initialisieren
    3506/    FFD0 : C3 B7 FF            	JP	RRET			;BIN
    3507/    FFD3 : C3 B7 FF            	JP	RRET			;AIN
    3508/    FFD6 : C3 B7 FF            	JP	RRET			;BSTA
    3509/    FFD9 : C3 B7 FF            	JP	RRET			;ASTA
    3510/    FFDC : C3 BA F9            RBEEP:	JP	BEEP			;Tonausgabe
    3511/    FFDF : C3 94 FE            	JP	DRZEL			;log. Druckertreiber
    3512/    FFE2 : C3 0F E8            	JP	HARDC			;BWS+Druck
    3513/    FFE5 :                     	
    3514/    FFE5 : =>FALSE             	IF MONTYP <> "VP_202C_K7659"
    3515/    FFE5 :                     	JP	BSDR			;Bildschirmkopie
    3516/    FFE5 : =>TRUE              	ELSEIF MONTYP == "VP_202C_K7659"
    3517/    FFE5 : C3 B7 FF            RBSDR:	JP	RRET			;Bildschirmkopie
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 60 - 18.7.2004 19:30:38


    3518/    FFE8 :                     	ENDIF
    3519/    FFE8 : C3 9D FE            RDRAK:	JP	DRAKK			;log. Druckertreiber
    3520/    FFEB : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
    3521/    FFEB :                     RDDEL:	JP	DRDEL			;log. Treiber ruecksetzen
    3522/    FFEB : =>TRUE              	ELSEIF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    3523/    FFEB : C3 B7 FF            	JP	RRET			;log. Treiber ruecksetzen
    3524/    FFEE :                     	ENDIF	
    3525/    FFEE : C3 4F FF            RZMIN:	JP	ZMINI			;Zusatzmonitor installieren
    3526/    FFF1 : C3 D7 FB            	JP	LORUF			;Headerload
    3527/    FFF4 : C3 EE FA            	JP	SARUF			;Headersave
    3528/    FFF7 : C3 D9 FA            	JP	STAT			;Tastaturstatus
    3529/    FFFA : C3 3A F1            	JP	POLL			;Tastaturpolling
    3530/    FFFD : =>FALSE             	IF MONTYP == "BROSIG_2028_K7659"
    3531/    FFFD :                     	JP	INKY			;Tastaturabfrage
    3532/    FFFD : =>TRUE              	ELSEIF (MONTYP == "VP_202B_K7659") || (MONTYP == "VP_202C_K7659")
    3533/    FFFD : C3 1B FF            	JP	JOYIN			;Tastaturabfrage
    3534/   10000 :                     	ENDIF	
    3535/   10000 :                     ;
    3536/   10000 :                     	ENDIF
    3537/   10000 :                     
    3538/   10000 :                     	END
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 61 - 18.7.2004 19:30:38


  Symboltabelle (*=unbenutzt):
  ----------------------------

 AADR :                          E0 - |  AKP :                         FE73 C |
 AKP0 :                        FB1D C |  AKP1 :                        FB30 C |
*ARCHITECTURE :   i86-unknown-msdos - |  ARG1 :                          1B - |
 ARG2 :                          1D - |  ARG3 :                          23 - |
 AUS1 :                        F5D3 C |  AUSX :                        F5D8 C |
 A_KDO :                       F6C5 C |  BEEP :                        F9BA C |
 BEEP1 :                       F9BB C |  BEEP2 :                       F9C4 C |
 BEEP3 :                       F9C8 C |  BEEP4 :                       F9D1 C |
 BEEP5 :                       F9D8 C |  BEEP6 :                       F9E8 C |
 BEEP7 :                       F9F1 C | *BIGENDIAN :                      0 - |
 BLMK :                        FCD6 C |  BLMK1 :                       FCE4 C |
 BLMK2 :                       FCEE C |  BLMK3 :                       FCF9 C |
 BLMK4 :                       FD1A C |  BLMK5 :                       FD22 C |
 BPADR :                          B - |  BPOPC :                          D - |
*BRANCHEXT :                      0 - |  BREAK :                       F564 C |
 BROSIGERW :                      1 - |  BSMK :                        F389 C |
 BUFFA :                         1F - |  BWS :                         EC00 - |
 B_KDO :                       F587 C | *CASESENSITIVE :                  0 - |
 CKO1 :                        F77A C |  CKO2 :                        F77E C |
 CKO3 :                        F786 C |  CLOAD :                       F3F8 C |
 CLS :                            C - | *CONSTPI :        3.141592653589793 - |
 COPY :                        F1CF C |  COPY1 :                       F1DE C |
 COPY2 :                       F1E1 C |  CR :                             D - |
 CSAVE :                       F369 C |  CUPOS :                         2B - |
 C_KDO :                       F777 C |  DATA :                          13 - |
*DATE :                   18.7.2004 - |  DKO1 :                        F4D1 C |
 DKO2 :                        F4E2 C |  DKO3 :                        F4F0 C |
 DRAK1 :                       FEA9 C |  DRAKK :                       FE9D C |
 DRINI :                       FE7D C |  DRZEL :                       FE94 C |
 DRZSP :                         35 - |  D_KDO :                       F4CE C |
 EADR :                          E2 - |  ERBAD :                       FD7D C |
 ERNF :                        FD90 C |  ERREC :                       FD86 C |
 ESC :                           1B - |  E_KDO :                       F599 C |
*FALSE :                          0 - |  FBANZ :                         6C - |
 FKO1 :                        F7B0 C |  FKO2 :                        F7B6 C |
 FKO3 :                        F7C1 C |  FKO4 :                        F7CD C |
 FKO5 :                        F7E5 C |  FKO6 :                        F7ED C |
 FKO7 :                        F7F1 C | *FULLPMMU :                       1 - |
 F_KDO :                       F7A2 C |  GETST :                       FEFB C |
 G_KDO :                       F5B3 C |  HADR :                        FD24 C |
 HARDC :                       E80F - | *HAS64 :                          0 - |
*HASFPU :                         0 - | *HASPMMU :                        0 - |
 HDKA1 :                       FF9A C |  HDKA2 :                       FFA5 C |
 HDKAS :                       FF83 C |  HLB1 :                        FDC8 C |
 HLB10 :                       FE28 C |  HLB11 :                       FE2A C |
 HLB12 :                       FE2E C |  HLB13 :                       FE34 C |
 HLB14 :                       FE39 C |  HLB15 :                       FE3B C |
 HLB2 :                        FDCD C |  HLB3 :                        FDD3 C |
 HLB4 :                        FDDE C |  HLB5 :                        FDEA C |
 HLB6 :                        FDEF C |  HLB7 :                        FDFC C |
 HLB8 :                        FE0D C |  HLB9 :                        FE10 C |
 HLBLK :                       FDC0 C |  HSAV0 :                       FB4B C |
 HSAV1 :                       FB17 C |  H_KDO :                       F6B8 C |
 INC1 :                        F20F C |  INCH :                        F20C C |
*INEXTMODE :                      0 - |  INHEX :                       F2F4 C |
*INIT :                        F000 C |  INIT1 :                       F002 C |
 INIT2 :                       F00F C |  INIT3 :                       F198 C |
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 62 - 18.7.2004 19:30:38


 INIT4 :                       F1CE C |  INKEY :                       F130 C |
 INKP1 :                       FD42 C |  INKP2 :                       FD46 C |
 INKP3 :                       FD5A C |  INKP4 :                       FD6A C |
 INKP5 :                       FD6B C |  INKPF :                       FD2E C |
 INKY :                        F800 C |  INLIN :                       F2B3 C |
 INLST :                       FE8C C | *INLWORDMODE :                    0 - |
*INMAXMODE :                      0 - |  INS1 :                        F2C0 C |
*INSRCMODE :                      0 - |  INSTR :                       F2B9 C |
*INSUPMODE :                      0 - | *INTS :                        FEDB C |
 INY1 :                        F812 C |  INY10 :                       F854 C |
 INY11 :                       F856 C |  INY12 :                       F862 C |
 INY13 :                       F868 C |  INY14 :                       F86A C |
 INY15 :                       F875 C |  INY16 :                       F876 C |
 INY17 :                       F87C C |  INY18 :                       F88F C |
 INY19 :                       F891 C |  INY2 :                        F818 C |
 INY20 :                       F8AF C |  INY21 :                       F935 C |
 INY22 :                       F951 C |  INY23 :                       F95B C |
 INY24 :                       F966 C |  INY25 :                       F979 C |
 INY26 :                       F97D C |  INY27 :                       F990 C |
 INY28 :                       F9A2 C |  INY29 :                       F9AD C |
 INY3 :                        F829 C |  INY4 :                        F835 C |
 INY5 :                        F837 C |  INY6 :                        F83E C |
 INY7 :                        F840 C |  INY8 :                        F842 C |
 INY9 :                        F852 C |  JOYI1 :                       FF4A C |
 JOYIN :                       FF1B C |  JP038 :                       F90A C |
 JP100 :                       F8DB C |  JP200 :                       F8E0 C |
 JP300 :                       F8E5 C |  JPX :                         F8E8 C |
 J_KDO :                       F5A5 C |  K7FKA :                       FA03 C |
 K7FKY :                       F9F8 C |  K7KEY :                       FA19 C |
 K7STG :                       FF64 C |  KDO1 :                        F058 C |
 KDO2 :                        F05F C |  KDO3 :                        F079 C |
 KDO4 :                        F088 C |  KDO5 :                        F091 C |
 KDO6 :                        F0A6 C |  KDOTB :                       F0B1 C |
 KON1 :                        F2DB C |  KON2 :                        F2EC C |
 KONVX :                       F2D1 C |  KYBTS :                         27 - |
 K_KDO :                       F50B C |  LAKEY :                          4 - |
 LF :                             A - | *LISTON :                         1 - |
 LOA1 :                        F3FB C |  LOA10 :                       F446 C |
 LOA11 :                       F453 C |  LOA12 :                       F460 C |
 LOA13 :                       F463 C |  LOA14 :                       F47B C |
 LOA15 :                       F47D C |  LOA16 :                       F481 C |
 LOA17 :                       F487 C |  LOA18 :                       F48C C |
 LOA19 :                       F49D C |  LOA2 :                        F40C C |
 LOA20 :                       F4A0 C |  LOA21 :                       F4A8 C |
 LOA22 :                       F4A9 C |  LOA23 :                       F4BA C |
 LOA24 :                       F4BC C |  LOA25 :                       F4C6 C |
 LOA26 :                       F4B5 C |  LOA27 :                       F48E C |
 LOA3 :                        F417 C |  LOA5 :                        F41F C |
 LOA6 :                        F424 C |  LOA7 :                        F42A C |
 LOA8 :                        F435 C |  LOA9 :                        F441 C |
 LOR0 :                        FBC9 C |  LOR1 :                        FBF0 C |
 LOR10 :                       FC92 C |  LOR2 :                        FBFA C |
 LOR3 :                        FC0C C | *LOR4 :                        FC14 C |
 LOR5 :                        FC22 C |  LOR6 :                        FC4E C |
 LOR7 :                        FC5C C |  LOR8 :                        FC68 C |
 LOR9 :                        FC86 C |  LORUF :                       FBD7 C |
 LST1 :                        FEAF C |  LSTOT :                       FEAE C |
 LSYNC :                         33 - | *MACEXP :                         1 - |
 MEM :                         F325 C |  MEM1 :                        F328 C |
 MEM2 :                        F33B C |  MEM3 :                        F342 C |
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 63 - 18.7.2004 19:30:38


 MEM4 :                        F34F C | *MOMCPU :                        80 - |
*MOMCPUNAME :                   Z80 - |  MONTB :                       F1F2 C |
 MONTYP :             VP_202C_K7659 - |  NAME :                          F0 - |
 NBYTE :                         69 - | *NINTA :                       F7FE C |
 NINTR :                       F74A C |  NKTA :                        F724 C |
 NL :                            1E - |  NMI :                           66 - |
 N_KDO :                       F727 C |  O4SL1 :                       F92A C |
 O4SL2 :                       F92B C |  O4SLT :                       F90E C |
 O4TAB :                       F92F C |  OADR1 :                       FD9D C |
 OADR2 :                       FDAE C |  OADR3 :                       FDB1 C |
 OTHLS :                       F5C7 C |  OUT0 :                        F219 C |
 OUT1 :                        F21E C |  OUT10 :                       F28E C |
 OUT2 :                        F239 C |  OUT3 :                        F23A C |
 OUT5 :                        F256 C |  OUT6 :                        F26E C |
 OUT7 :                        F27C C |  OUT8 :                        F27F C |
 OUT9 :                        F285 C |  OUTCH :                       F21B C |
 OUTDP :                       F5C4 C |  OUTHL :                       F31A C |
 OUTHX :                       F301 C |  OUTSP :                       F5CF C |
 OUX1 :                        F30A C |  OUX2 :                        F315 C |
 O_KDO :                       F169 C | *P1END :                       FFB0 - |
*PADDING :                        1 - |  PARA :                        F4FF C |
 PLFKY :                         41 - |  POLL :                        F13A C |
 PRS1 :                        F2A6 C |  PRST7 :                       F2A5 C |
 PTFKA :                         45 - |  PTFKY :                         43 - |
 PTKEY :                         3B - |  PTNXZ :                         3F - |
 PTSTG :                         3D - |  R20BT :                          3 - |
 RBEEP :                       FFDC C |  RBSDR :                       FFE5 C |
 RDINI :                       FFCD C |  RDRAK :                       FFE8 C |
 REG1 :                        F55F C |  REGA :                        F533 C |
 REGAF :                         5B - |  REGAN :                       F173 C |
 REGBR :                         4D - |  REGDA :                       F5E4 C |
 REGH :                        F54A C |  REGPC :                         61 - |
 REGSP :                         63 - | *RELAXED :                        0 - |
 RINCH :                        1E7 - |  RINHX :                        3E7 - |
 RINKY :                        4E7 - |  RKO1 :                        F5F8 C |
 RKO10 :                       F6AF C |  RKO2 :                        F623 C |
 RKO3 :                        F65A C |  RKO4 :                        F639 C |
 RKO5 :                        F665 C |  RKO6 :                        F66A C |
 RKO7 :                        F67D C |  RKO8 :                        F680 C |
 RKO9 :                        F691 C |  ROTDP :                        DE7 - |
 ROTHL :                        7E7 - |  ROTHS :                        CE7 - |
 ROTHX :                        6E7 - |  ROTSP :                        EE7 - |
 ROUTC :                         E7 - |  RPRST :                        2E7 - |
 RRET :                        FFB7 C |  RST1 :                        F0E8 C |
 RST20 :                         20 - |  RST38 :                         38 - |
 RSTTB :                       F108 C | *RZEID :                       FFCA C |
 RZMIN :                       FFEE C |  R_KDO :                       F5DF C |
 SADR :                          E4 - |  SAR0 :                        FAEB C |
 SARUF :                       FAEE C |  SAV1 :                        F36F C |
 SAV10 :                       F3B1 C |  SAV11 :                       F3C1 C |
 SAV12 :                       F3C5 C |  SAV13 :                       F3CA C |
 SAV14 :                       F3D0 C |  SAV15 :                       F3D2 C |
 SAV16 :                       F3DA C |  SAV17 :                       F3DF C |
 SAV18 :                       F3E2 C |  SAV19 :                       F3E4 C |
 SAV2 :                        F37D C |  SAV20 :                       F3ED C |
 SAV21 :                       F3F1 C |  SAV3 :                        F383 C |
 SAV4 :                        F386 C |  SAV5 :                        F38B C |
 SAV6 :                        F397 C |  SAV7 :                        F399 C |
 SAV8 :                        F3A6 C |  SAV9 :                        F3AD C |
 SBEEP :                       F8FC C |  SCAPS :                       F900 C |
 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 64 - 18.7.2004 19:30:38


 SCHL2 :                       F905 C |  SCHLT :                       F902 C |
 SGRAF :                       F8F0 C |  SHILO :                         15 - |
 SIGNS :                         ED - |  SOIL :                          16 - |
 SOIL2 :                         25 - |  SOUN1 :                       FEE7 C |
 SOUN2 :                       FEF3 C |  SOUND :                       FEDF C |
 SPACE :                       F2CA C |  SPADR :                         6A - |
 SPRNT :                       F8F4 C |  SSLOW :                       F8F8 C |
 STAT :                        FAD9 C |  SUCH1 :                       FE51 C |
 SUCH2 :                       FE67 C |  SUCH3 :                       FE6F C |
 SUCHK :                       FE4E C |  SYSSK :                         B0 - |
*TIME :                    19:30:36 - |  TKO1 :                        F52A C |
*TRUE :                           1 - |  TYP :                           EC - |
 T_KDO :                       F51D C |  USRKD :                         B0 - |
 USRSK :                         90 - |  VER1 :                        FB83 C |
 VER2 :                        FB99 C |  VER3 :                        FBBD C |
 VERIF :                       FB5F C | *VERSION :                     1418 - |
 WINDA :                         49 - |  WINDE :                         4B - |
 WINDL :                         47 - |  WKO1 :                        F6ED C |
 WKO2 :                        F720 C |  WKO3 :                        F722 C |
 W_KDO :                       F6D1 C |  ZEID1 :                       FED3 C |
 ZEIDR :                       FEB7 C |  ZKO1 :                        F14B C |
 ZMINI :                       FF4F C |  ZMTAB :                       FF5B C |
 Z_KDO :                       F148 C |

    399 Symbole
     31 unbenutzte Symbole

 AS V1.41r8 - Quelle Z1013MON.ASM - Seite 65 - 18.7.2004 19:30:38


  Zeichentabellen:
  ----------------

STANDARD (0 vernderte Zeichen)


1.37 Sekunden Assemblierzeit

   3539 Zeilen Quelltext
      2 Durchlufe
    161 KByte verfgbarer Restspeicher
  35290 Byte verfgbarer Stack
      0 Fehler
      0 Warnungen
